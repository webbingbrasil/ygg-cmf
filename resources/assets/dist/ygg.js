(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{0:function(t,e,n){n("KINh"),n("yiJr"),t.exports=n("K0p+")},1:function(t,e){},"K0p+":function(t,e){},KINh:function(t,e,n){"use strict";n.r(e);n("qxpy"),n("rmf8"),n("u8M4"),n("eOqu"),n("V4S9"),n("3PMH"),n("H0pb");var r=n("XuX8"),i=n.n(r),a=n("L2JU"),o=n("jE9Z"),s=n("dV7z"),l={name:"YggActionBar",props:{ready:{type:Boolean,default:!0},container:Boolean}},c=n("KHd+"),u=Object(c.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.ready?n("div",{staticClass:"YggActionBar"},[n("div",{staticClass:"YggActionBar__bar"},[n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col left pr-0 pr-sm-3"},[t._t("left")],2),t._v(" "),n("div",{staticClass:"col right pl-0 pl-sm-3"},[t._t("right")],2)])])]),t._v(" "),n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("div",{staticClass:"YggActionBar__extras"},[t._t("extras")],2)]),t._v(" "),t.$slots["extras-right"]?[n("div",{staticClass:"col-auto"},[n("div",{staticClass:"YggActionBar__extras"},[t._t("extras-right")],2)])]:t._e()],2)])]):t._e()},[],!1,null,null,null).exports,d=n("jl8+"),f=n.n(d),h={name:"DropdownArrow"},p=Object(c.a)(h,function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{width:"10",height:"5",viewBox:"0 0 10 5","fill-rule":"evenodd"}},[e("path",{attrs:{d:"M10 0L5 5 0 0z"}})])},[],!1,null,null,null).exports,g=function(t){return window.i18n[t]},m={computed:{language:function(){return document.documentElement.lang}},methods:{l:g}},v=function(t){return{methods:{lSub:function(e){return g("".concat(t,".").concat(e))}}}};function b(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var y={name:"YggMultiselect",functional:!0,render:function(t,e){var n=e.data,r=e.children,i=void 0===r?[]:r,a=e.slots;e.props.placeholder||(n.attrs.placeholder=g("form.multiselect.placeholder")),n.attrs.showPointer=!1;var o=a().caret;return t({extends:f.a,computed:{isSingleLabelVisible:function(){return 0===this.singleValue||f.a.computed.isSingleLabelVisible.call(this)}},mounted:function(){var t=this;this.$el.addEventListener("blur",function(){return t.deactivate()})}},n,[o?t("template",{slot:"caret"},o):t(p,{class:"multiselect__select",slot:"caret"}),t("template",{slot:"maxElements"},g("form.multiselect.max_text"))].concat(b(i)))}},_=Object(c.a)(y,void 0,void 0,!1,null,null,null).exports,w={name:"YggLocaleSelector",components:{YggMultiselect:_},props:{locales:Array,value:String,errors:Object},computed:{hasLocaleErrors:function(){return this.errors&&!!Object.keys(this.errors).length},errorClasses:function(){return this.hasError(this.value)?"YggLocaleSelector--has-error":this.hasLocaleErrors?"YggLocaleSelector--has-partial-error":""}},methods:{optionClasses:function(t){return this.hasError(t)?"error-dot":""},hasError:function(t){return this.errors&&this.errors[t]}}},O=Object(c.a)(w,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ygg-multiselect",{staticClass:"YggLocaleSelector d-inline-block",class:t.errorClasses,attrs:{"allow-empty":!1,options:t.locales,searchable:!1,value:t.value},on:{input:function(e){return t.$emit("input",e)}},scopedSlots:t._u([{key:"option",fn:function(e){return n("div",{class:t.optionClasses(e.option)},[t._v(t._s(e.option))])}}])})},[],!1,null,null,null).exports,C=n("o0o1"),x=n.n(C);function k(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}var S,Y,j={name:"YggDropdown",components:{DropdownArrow:p},provide:function(){return{$dropdown:this}},props:{text:String,showArrow:{type:Boolean,default:!0},disabled:Boolean},data:function(){return{opened:!1,isAbove:!1}},watch:{opened:function(t){var e=this;t&&this.$nextTick(function(t){return e.$emit("opened")})}},methods:{handleFocus:(S=x.a.mark(function t(){return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.disabled){t.next=2;break}return t.abrupt("return");case 2:return this.opened=!0,t.next=5,this.$nextTick();case 5:this.adjustPosition();case 6:case"end":return t.stop()}},t,this)}),Y=function(){var t=this,e=arguments;return new Promise(function(n,r){var i=S.apply(t,e);function a(t){k(i,n,r,a,o,"next",t)}function o(t){k(i,n,r,a,o,"throw",t)}a(void 0)})},function(){return Y.apply(this,arguments)}),handleBlur:function(){this.opened=!1,this.isAbove=!1},toggleIfFocused:function(t){this.opened&&(this.$el.blur(),t.preventDefault())},adjustPosition:function(){var t=this.$refs.list.getBoundingClientRect().bottom;this.isAbove=t>window.innerHeight}},mounted:function(){}},P=Object(c.a)(j,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"YggDropdown",class:{"YggDropdown--open":t.opened,"YggDropdown--disabled":t.disabled,"YggDropdown--above":t.isAbove,"YggDropdown--no-arrow":!t.showArrow},attrs:{tabindex:t.disabled?-1:0},on:{focus:t.handleFocus,blur:t.handleBlur}},[n("div",{staticClass:"YggDropdown__text",on:{mousedown:t.toggleIfFocused}},[t._t("text",[t._v(t._s(t.text))])],2),t._v(" "),t.showArrow?n("dropdown-arrow",{staticClass:"YggDropdown__arrow"}):t._e(),t._v(" "),t.disabled?t._e():n("div",[n("ul",{ref:"list",staticClass:"YggDropdown__list"},[t._t("default")],2)])],1)},[],!1,null,null,null).exports,D={name:"YggDropdownItem",inject:["$dropdown"],props:{customClass:[String,Object]},methods:{handleClick:function(t){this.$emit("click",t),this.$dropdown.$el.blur()}}},A=Object(c.a)(D,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"YggDropdown__item"},[n("a",{staticClass:"YggDropdown__link",class:t.customClass,attrs:{href:""},on:{mousedown:function(t){t.preventDefault()},click:function(e){return e.preventDefault(),t.handleClick(e)}}},[t._t("default")],2)])},[],!1,null,null,null).exports,$=function(){},L={props:{transitionClass:String},data:function(){return{active:0,width:0,enteringElm:null,leavingElm:null,afterEnterCallback:$}},computed:{enterActiveClass:function(){return"".concat(this.transitionClass," collapse-enter-active")}},methods:{increase:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$;this.active=(this.active+1)%2,this.afterEnterCallback=t},beforeLeave:function(t){},leave:function(t){var e=this;setTimeout(function(){return t.style.width="".concat(e.width,"px")},100)},afterLeave:function(t){t.style.width="",this.enteringElm.style.visibility="",this.afterEnterCallback()},beforeEnter:function(t){},enter:function(t){t.style.visibility="hidden",this.width=t.scrollWidth,this.enteringElm=t},afterEnter:function(t){}}},E=Object(c.a)(L,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition-group",{attrs:{"enter-active-class":t.enterActiveClass,"leave-active-class":t.transitionClass},on:{"after-enter":t.afterEnter,"after-leave":t.afterLeave,"before-enter":t.beforeEnter,enter:t.enter,leave:t.leave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:0===t.active,expression:"active===0"}],key:"0",staticStyle:{position:"absolute"}},[t._t("frame-0",null,{next:t.increase})],2),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:1===t.active,expression:"active===1"}],key:"1",staticStyle:{position:"absolute"}},[t._t("frame-1",null,{next:t.increase})],2)])},[],!1,null,null,null).exports,B={methods:{getMergedIdentifier:function(t,e){for(var n=this.$parent;n&&null==n[t];)n=n.$parent;var r="";return n&&(r=n[t]+"."),"".concat(r).concat(e)}}},I={mixins:[B],props:{errorIdentifier:{type:[String,Number],required:!0}},computed:{mergedErrorIdentifier:function(){return this.getMergedIdentifier("mergedErrorIdentifier",this.errorIdentifier)}}},F={inject:["$field"],props:{focused:Boolean},watch:{focused:function(t){t&&this.$focusableElm.focus()}},data:function(){return{$focusableElm:null}},methods:{setFocusable:function(t){var e=this;this.$focusableElm=t,this.$field&&this.$focusableElm.addEventListener("blur",function(t){e.$field.$emit("blur")})}}},M=n("vDqi"),T=n.n(M),z={methods:{patchXsrf:function(t){return t.headers||(t.headers={}),t.headers[T.a.defaults.xsrfHeaderName]=this.xsrfToken,t}}},N=function(t,e){for(var n,r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];return(n=console)[t].apply(n,["SHARP : ".concat(e)].concat(i))},V=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return N.apply(void 0,["log"].concat(e))},R=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return N.apply(void 0,["error"].concat(e))};function q(t){return new Promise(function(e){var n=new FileReader;n.addEventListener("loadend",function(){e(JSON.parse(n.result))}),n.readAsText(t)})}var K={inject:["actionsBus"],created:function(){var t=this,e=this.$options.actions;if(e)if("function"==typeof e._disabled&&e._disabled.call(this))V("".concat(this.$options.name," : actions are disabled"));else if(this.actionsBus)for(var n=function(){var n=i[r],a=e[n],o=function(t,e){return"string"==typeof e?"function"!=typeof t[e]?void R("".concat(t.$options.name," (ActionEvents) : this.").concat(e," is not a function")):function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t[e].apply(t,r)}:"function"==typeof e?function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.apply(t,r)}:void R("".concat(t.$options.name," (ActionEvents) : unprocessable action type (only function on string)"))}(t,a);o&&(t.actionsBus.$on(n,o),t.$once("hook:beforeDestroy",function(){t.actionsBus.$off(n,o)}))},r=0,i=Object.keys(this.$options.actions);r<i.length;r++)n();else R("Use of action options without actionsBus injected")}},U=function(t){return{computed:{readOnlyFields:function(){for(var e=JSON.parse(JSON.stringify(this[t])),n=0,r=Object.keys(e);n<r.length;n++){e[r[n]].readOnly=!0}return e}}}};function H(t){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var G={methods:{updateScroll:function(){var t=this.autoScrollOptions;if("function"==typeof t&&(t=t.apply(this,arguments)),"object"===H(t)){var e=t,n=e.list,r=e.item,i="function"==typeof r?r():r,a="function"==typeof n?n():n;a&&i&&(a.scrollTop=i.offsetTop-a.offsetHeight/2+i.offsetHeight/2)}}}},W=n("sEfC"),Q=n.n(W),J=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sm";return{data:function(){return{isViewportSmall:!1}},methods:{$_responsiveUpdate:function(){var t=this.$_testElm.offsetWidth;this.isViewportSmall=!!t}},created:function(){var e="viewport-down-".concat(t);this.$_testElm=document.getElementById(e),this.$_testElm||(this.$_testElm=document.createElement("div"),this.$_testElm.id=e,this.$_testElm.classList.add("d-".concat(t,"-none")),document.body.appendChild(this.$_testElm)),this.$_responsiveUpdate(),this.$_debouncedRespnsiveUpdate=Q()(this.$_responsiveUpdate,300),window.addEventListener("resize",this.$_debouncedRespnsiveUpdate)},destroyed:function(){window.removeEventListener("resize",this.$_debouncedRespnsiveUpdate)}}},X={mixins:[B],props:{configIdentifier:{type:String,required:!0}},computed:{mergedConfigIdentifier:function(){return this.getMergedIdentifier("mergedConfigIdentifier",this.configIdentifier)}}};function Z(t,e,n){var r;return function(){var i=this,a=arguments,o=function(){r=null,n||t.apply(i,a)},s=n&&!r;clearTimeout(r),r=setTimeout(o,e),s&&t.apply(i,a)}}var tt={beforeCreate:function(){var t=this;this.$options.computed=this.$options.computed||{};var e=this.$options,n=e.computed,r=e.debounced;r&&function(){"function"==typeof r&&(r=r(t.$options));var e=r.wait;null==e&&(console.warn("[Debounce mixin] Debounced option wait time not defined default : 200"),e=200);for(var i=function(){var t=o[a];if("function"==typeof r[t]){if(t in n)return"continue";n[t]=function(){return Z(r[t].bind(this),e)}}},a=0,o=Object.keys(r);a<o.length;a++)i()}()}},et={name:"YggActionBarForm",mixins:[{inject:["actionsBus"],data:function(){return{ready:!1}},methods:{emitAction:function(){var t;(t=this.actionsBus).$emit.apply(t,arguments)}},mounted:function(){var t=this;this.actionsBus.$on("setup",function(){t.ready=!0})}},K],components:{YggActionBar:u,YggLocaleSelector:O,YggDropdown:P,YggDropdownItem:A,Collapse:E},data:function(){return{showSubmitButton:!1,showDeleteButton:!1,showBackButton:!1,deleteButtonOpened:!1,opType:"create",actionsState:null}},methods:{focusDelete:function(){this.$refs.openDelete&&this.$refs.openDelete.focus()},label:function(t,e){var n,r="action_bar.form.".concat(t);if(this.actionsState){var i=this.actionsState,a=i.state,o=i.modifier;n=g("".concat(r,".").concat(a,".").concat(o))}return!n&&e&&(r+=".".concat(e)),n||g(r)}},actions:{setup:function(t){var e=t.showSubmitButton,n=t.showDeleteButton,r=t.showBackButton,i=t.opType;this.showSubmitButton=e,this.showDeleteButton=n,this.showBackButton=r,this.opType=i},updateActionsState:function(t){this.actionsState=t}}},nt=Object(c.a)(et,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ygg-action-bar",{attrs:{ready:t.ready,container:""}},[n("template",{slot:"left"},[n("button",{staticClass:"YggButton YggButton--secondary-accent",on:{click:function(e){return t.emitAction("cancel")}}},[t._v("\n            "+t._s(t.showBackButton?t.label("back_button"):t.label("cancel_button"))+"\n        ")]),t._v(" "),t.showDeleteButton?n("div",{staticClass:"w-100 h-100"},[n("collapse",{attrs:{"transition-class":"YggButton__collapse-transition"},scopedSlots:t._u([{key:"frame-0",fn:function(e){return[n("button",{staticClass:"YggButton YggButton--danger",on:{click:function(n){return e.next(t.focusDelete)}}},[n("svg",{attrs:{"fill-rule":"evenodd",height:"16",viewBox:"0 0 16 24",width:"16"}},[n("path",{attrs:{d:"M4 0h8v2H4zM0 3v4h1v17h14V7h1V3H0zm13 18H3V8h10v13z"}}),t._v(" "),n("path",{attrs:{d:"M5 10h2v9H5zm4 0h2v9H9z"}})])])]}},{key:"frame-1",fn:function(e){return[n("button",{ref:"openDelete",staticClass:"YggButton YggButton--danger",on:{blur:function(t){return e.next()},click:function(e){return t.emitAction("delete")}}},[t._v("\n                        "+t._s(t.label("delete_button"))+"\n                    ")])]}}],null,!1,1892196310)})],1):t._e()]),t._v(" "),n("template",{slot:"right"},[t.showSubmitButton?n("button",{staticClass:"YggButton YggButton--accent",on:{click:function(e){return t.emitAction("submit")}}},[t._v("\n            "+t._s(t.label("submit_button",t.opType))+"\n        ")]):t._e()])],2)},[],!1,null,null,null).exports;var rt,it=i.a.extend({name:"YggEventBus"}),at=(rt=document.head.querySelector("meta[name=base-url]"))?"/".concat(rt.content):"/ygg",ot="".concat(at,"/api"),st="".concat(ot,"/upload"),lt=n("Qyje"),ct=n.n(lt);function ut(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function dt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ft(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ht(t){return Object.entries(t).reduce(function(t,e){var n=ft(e,2);return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ut(n,!0).forEach(function(e){dt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ut(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t,dt({},n[0],function(t){return Array.isArray(t)&&!t.length?null:t}(n[1])))},t||{})}function pt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function gt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pt(n,!0).forEach(function(e){mt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pt(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function mt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var vt=T.a.create({baseURL:ot,paramsSerializer:function(t){var e=ht(t);return ct.a.stringify(e,{strictNullHandling:!0})}});function bt(t){var e=t.dashboardKey,n=t.filters;return vt.get("dashboard/".concat(e),{params:gt({},n)}).then(function(t){return t.data})}var yt=n("Oluq"),_t={name:"YggModal",mixins:[m],components:{BModal:n.n(yt).a},inheritAttrs:!1,props:{visible:Boolean,cancelTitle:String,title:String,okTitle:String,okOnly:Boolean,isError:Boolean},methods:{show:function(){this.$refs.modal.show()},hide:function(){this.$refs.modal.hide()},handleVisiblityChanged:function(t){this.$emit("update:visible",t)}}},wt=Object(c.a)(_t,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",t._g(t._b({ref:"modal",staticClass:"YggModal",class:{"YggModal--error":t.isError},attrs:{"cancel-title":t.cancelTitle||t.l("modals.cancel_button"),"ok-only":t.okOnly,"ok-title":t.okTitle||t.l("modals.ok_button"),title:t.title,visible:t.visible,"no-enforce-focus":""},on:{change:t.handleVisiblityChanged}},"b-modal",t.$attrs,!1),t.$listeners),[n("template",{slot:"modal-header"},[n("div",[n("h5",{staticClass:"YggModal__heading"},[t._t("title",[t._v(t._s(t.title))])],2),t._v(" "),t.okOnly?t._e():n("button",{staticClass:"YggModal__close",attrs:{type:"button"},on:{click:t.hide}},[n("svg",{staticClass:"YggModal__close-icon",attrs:{width:"10",height:"10",viewBox:"0 0 10 10","fill-rule":"evenodd"}},[n("path",{attrs:{d:"M9.8 8.6L8.4 10 5 6.4 1.4 10 0 8.6 3.6 5 .1 1.4 1.5 0 5 3.6 8.6 0 10 1.4 6.4 5z"}})])])])]),t._v(" "),t._t("default")],2)},[],!1,null,null,null).exports;function Ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Ct(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ot(n,!0).forEach(function(e){xt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ot(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function xt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kt(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var St=function(){},Yt={name:"YggActionView",components:{YggModal:wt},provide:function(){return{actionsBus:new it({name:"YggActionsEventBus"}),axiosInstance:vt}},props:{context:{type:String,required:!0}},data:function(){return{mainModalsData:{},mainModalId:0,showErrorPage:!1,errorPageData:null}},computed:{barComp:function(){return function(t){if("form"===t)return nt}(this.context)}},methods:{showMainModal:function(t){var e=this,n=t.text,r=t.okCallback,i=void 0===r?St:r,a=t.okCloseOnly,o=t.isError,s=kt(t,["text","okCallback","okCloseOnly","isError"]),l=this.mainModalId;this.$set(this.mainModalsData,l,{props:Ct({},s,{okOnly:a,noCloseOnBackdrop:a,noCloseOnEsc:a,visible:!0,isError:o}),okCallback:i,hiddenCallback:function(){return e.$delete(e.mainModalsData,l)},text:n}),this.mainModalId++}},created:function(){var t=this,e=this._provided,n=e.actionsBus,r=e.axiosInstance;n.$on("showMainModal",this.showMainModal),r.interceptors.response.use(function(t){return t},function(e){var n=e.response,r=n.status,i=n.data;return"get"===e.config.method&&404===r&&(t.showErrorPage=!0,t.errorPageData={status:r,message:i.message}),Promise.reject(e)})}},jt=Object(c.a)(Yt,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"YggActionView"},[t.showErrorPage?[n("div",{staticClass:"container"},[n("h1",[t._v("Error "+t._s(t.errorPageData.status))]),t._v(" "),n("p",[t._v(t._s(t.errorPageData.message))])])]:[t.barComp?n(t.barComp,{tag:"component"}):t._e(),t._v(" "),t._t("default"),t._v(" "),n("notifications",{staticStyle:{top:"6rem"},attrs:{"animation-name":"slideRight",position:"top right",reverse:""},scopedSlots:t._u([{key:"body",fn:function(e){var r=e.item,i=e.close;return[n("div",{staticClass:"YggToastNotification",class:"YggToastNotification--"+(r.type||"info"),attrs:{"data-test":"notification",role:"alert"}},[n("div",{staticClass:"YggToastNotification__details"},[n("h3",{staticClass:"YggToastNotification__title mb-2"},[t._v(t._s(r.title))]),t._v(" "),r.text?n("p",{staticClass:"YggToastNotification__caption",domProps:{innerHTML:t._s(r.text)}}):t._e()]),t._v(" "),n("button",{staticClass:"YggToastNotification__close-button",attrs:{"data-test":"close-notification",type:"button"},on:{click:i}},[n("svg",{staticClass:"YggToastNotification__icon",attrs:{"aria-label":"close","fill-rule":"evenodd",height:"10",viewBox:"0 0 10 10",width:"10"}},[n("path",{attrs:{d:"M9.8 8.6L8.4 10 5 6.4 1.4 10 0 8.6 3.6 5 .1 1.4 1.5 0 5 3.6 8.6 0 10 1.4 6.4 5z"}})])])])]}}])}),t._v(" "),t._l(t.mainModalsData,function(e,r){return n("ygg-modal",t._b({key:r,on:{hidden:e.hiddenCallback,ok:e.okCallback}},"ygg-modal",e.props,!1),[t._v("\n            "+t._s(e.text)+"\n        ")])})]],2)},[],!1,null,null,null).exports;function Pt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Dt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pt(n,!0).forEach(function(e){At(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pt(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function At(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $t(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}var Lt={inject:["mainLoading","axiosInstance","actionsBus"],methods:{installInterceptors:function(){var t=this;this.axiosInstance.interceptors.request.use(function(e){return t.mainLoading.$emit("show"),e},function(t){return Promise.reject(t)}),this.axiosInstance.interceptors.response.use(function(e){return t.mainLoading.$emit("hide"),e},function(){var e=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){$t(a,r,i,o,s,"next",t)}function s(t){$t(a,r,i,o,s,"throw",t)}o(void 0)})}}(x.a.mark(function e(n){var r,i,a,o,s;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.response,i=n.config.method,t.mainLoading.$emit("hide"),!(r.data instanceof Blob&&"application/json"===r.data.type)){e.next=6;break}return e.next=5,q(r.data);case 5:r.data=e.sent;case 6:a=r.data,o=r.status,s={title:g("modals.".concat(o,".title"))||g("modals.error.title"),text:a.message||g("modals.".concat(o,".message"))||g("modals.error.message"),isError:!0},419===o&&(s.okCallback=function(){return location.reload()}),e.t0=o,e.next=401===e.t0?12:403===e.t0?14:404===e.t0?14:417===e.t0?14:419===e.t0?14:500===e.t0?14:16;break;case 12:return t.actionsBus.$emit("showMainModal",Dt({},s,{okCallback:function(){location.href="".concat(at,"/login")}})),e.abrupt("break",16);case 14:return 404===o&&"get"===i||t.actionsBus.$emit("showMainModal",Dt({},s,{okCloseOnly:!0})),e.abrupt("break",16);case 16:return e.abrupt("return",Promise.reject(n));case 17:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}},created:function(){this.synchronous||(this.installInterceptors(),this.mainLoading.$emit("show"))}},Et={mixins:[Lt],inject:["axiosInstance"],data:function(){return{data:null,layout:null}},methods:{get:function(){var t=this;return this.axiosInstance.get(this.apiPath,{params:this.apiParams}).then(function(e){return t.mount(e.data),t.handleNotifications(e.data),Promise.resolve(e)}).catch(function(t){return Promise.reject(t)})},post:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.apiPath,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.data,n=arguments.length>2?arguments[2]:void 0;return this.axiosInstance.post(t,e,n).then(function(t){return Promise.resolve(t)}).catch(function(t){return Promise.reject(t)})},showNotification:function(t){var e=t.level,n=t.title,r=t.message,i=t.autoHide;this.$notify({title:n,type:e,text:r,duration:i?4e3:-1})},handleNotifications:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Array.isArray(e.notifications)&&setTimeout(function(){return e.notifications.forEach(t.showNotification)},500)}}},Bt=n("QLus"),It=n.n(Bt),Ft=n("5MXG"),Mt=n.n(Ft),Tt={bind:function(t,e,n){var r=e.modifier,i=void 0===r?"width":r,a=e.expression,o=i;t._updateHasOverflow=Z(function(){"width"===o?n.context[a]=t.scrollWidth>t.offsetWidth:"height"===o&&(n.context[a]=t.scrollHeight>t.offsetHeight)},100),window.addEventListener("resize",t._updateHasOverflow)},inserted:function(t){t._updateHasOverflow()},unbind:function(t){window.removeEventListener("resize",t._updateHasOverflow)}},zt={name:"YggBTabs",mixins:[J("sm")],extends:It.a,components:{bCollapse:Mt.a,DropdownArrow:p},data:function(){return{expanded:!0,hasNavOverflow:!1,extraNavGhostWidth:0}},watch:{currentTab:function(){this.hasNavOverflow&&(this.expanded=!1)}},computed:{collapseActivated:function(){return this.isViewportSmall&&(this.hasNavOverflow||this.tabs.length>2)},tabsHaveError:function(){return this.tabs.some(function(t){return t.hasError})},dropdownButtonClasses:function(){return this.tabs[this.currentTab].hasError?"error-dot":this.tabsHaveError?"error-dot--partial":""}},methods:{addExtraNavGhostWidthForSlot:function(t){var e=this.$slots[t];e&&e[0]&&e[0].elm&&(this.extraNavGhostWidth+=e[0].elm.offsetWidth)}},mounted:function(){this.addExtraNavGhostWidthForSlot("nav-prepend")},directives:{HasOverflow:Tt}},Nt=Object(c.a)(zt,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"YggTabs",class:{"YggTabs--collapse":t.collapseActivated,"YggTabs--nav-overflow":t.hasNavOverflow},attrs:{id:t.id||null}},[n("div",{staticClass:"mb-3",class:{"m-sm-0":!t.hasNavOverflow}},[t.hasNavOverflow?t._t("nav-prepend"):t._e(),t._v(" "),n("button",{staticClass:"YggTabs__collapse-btn YggButton YggButton--secondary mb-1",class:{"d-none":!t.hasNavOverflow},on:{click:function(e){t.expanded=!t.expanded}}},[t.tabs[t.currentTab]?n("span",{class:t.dropdownButtonClasses},[t._v(t._s(t.tabs[t.currentTab].title))]):t._e(),t._v(" "),n("dropdown-arrow",{staticClass:"ml-1",style:t.expanded&&"transform: rotate(180deg)"})],1),t._v(" "),n("div",{directives:[{name:"has-overflow",rawName:"v-has-overflow.width",value:t.hasNavOverflow,expression:"hasNavOverflow",modifiers:{width:!0}}],staticClass:"YggTabs__nav YggTabs__nav--ghost m-0 p-0",staticStyle:{height:"0",overflow:"hidden"}},[n("div",{style:{minWidth:t.extraNavGhostWidth+"px"}},[t._v(" ")]),t._v(" "),t._l(t.tabs,function(e){return n("a",{staticClass:"YggTabs__nav-link",domProps:{innerHTML:t._s(e.title)}})})],2),t._v(" "),n("b-collapse",{class:{"d-block":!t.hasNavOverflow},attrs:{id:"tabs",visible:t.expanded}},[n("div",{staticClass:"YggTabs__nav mb-0 mb-sm-3",attrs:{role:"tablist","aria-setsize":t.tabs.length,"aria-posinset":t.currentTab+1}},[t.hasNavOverflow?t._e():t._t("nav-prepend"),t._v(" "),t._l(t.tabs,function(e){return n("a",{staticClass:"YggTabs__nav-link",class:{"YggTabs__nav-link--has-error":e.hasError,"YggTabs__nav-link--active":e.localActive,"YggTabs__nav-link--disabled":e.disabled},attrs:{href:e.href,role:"tab","aria-selected":e.localActive?"true":"false","aria-controls":e.id||null,id:e.controlledBy||null},domProps:{innerHTML:t._s(e.title)},on:{click:function(n){return n.preventDefault(),n.stopPropagation(),t.clickTab(e)},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:t.nextTab(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:"button"in e&&0!==e.button?null:t.previousTab(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])?null:"button"in e&&2!==e.button?null:t.nextTab(e)},function(n){return!n.type.indexOf("key")&&t._k(n.keyCode,"space",32,n.key,[" ","Spacebar"])?null:(n.preventDefault(),n.stopPropagation(),t.clickTab(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:t.previousTab(e)}]}})})],2)])],2),t._v(" "),n("div",{ref:"tabsContainer",staticClass:"tab-content"},[t._t("default"),t._v(" "),t.tabs&&t.tabs.length?t._e():t._t("empty")],2)])},[],!1,null,null,null).exports,Vt=n("ohI8");function Rt(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}var qt,Kt={name:"YggBTab",extends:n.n(Vt).a,provide:function(){return{$tab:this}},data:function(){return{errors:{}}},computed:{hasError:function(){return Object.keys(this.errors).length>0}},watch:{localActive:{immediate:!0,handler:(qt=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){Rt(a,r,i,o,s,"next",t)}function s(t){Rt(a,r,i,o,s,"throw",t)}o(void 0)})}}(x.a.mark(function t(e){return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=4;break}return t.next=3,this.$nextTick();case 3:this.$emit("active");case 4:case"end":return t.stop()}},t,this)})),function(t){return qt.apply(this,arguments)})}},methods:{setError:function(t){this.$set(this.errors,t,!0)},clearError:function(t){this.$delete(this.errors,t)}},created:function(){var t=this;this.$on("error",function(e){return t.setError(e)}),this.$on("clear",function(e){return t.clearError(e)})}},Ut=Object(c.a)(Kt,void 0,void 0,!1,null,null,null).exports,Ht={name:"YggTabbedLayout",props:{layout:Object},provide:function(){if(!this.showTabs)return{$tab:!1}},components:{YggTabs:Nt,YggTab:Ut},computed:{showTabs:function(){return this.layout.tabbed&&this.layout.tabs.length>1}}},Gt=Object(c.a)(Ht,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"YggTabbedLayout"},[t.showTabs?[n("YggTabs",[n("template",{slot:"nav-prepend"},[t._t("nav-prepend")],2),t._v(" "),t._l(t.layout.tabs,function(e,r){return n("YggTab",{key:r,attrs:{title:e.title}},[t._t("default",null,null,e)],2)})],2)]:[n("div",[t._t("nav-prepend")],2),t._v(" "),t._l(t.layout.tabs,function(e){return n("div",[t._t("default",null,null,e)],2)})]],2)},[],!1,null,null,null).exports;function Wt(t,e,n){var r=e.value;n.children.length&&n.children.some(function(t){return t.tag})?t.classList.remove(r):t.classList.add(r)}function Qt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Jt={name:"YggGrid",props:{rows:{type:Array,required:!0}},methods:{colClasses:function(t){var e,n=t.size,r=t.sizeXS,i=!!n;return Qt(e={},"col-".concat(r),r),Qt(e,"col-md-".concat(n),i),Qt(e,"col-md",!i),e}},directives:{"empty-class":{inserted:Wt,componentUpdated:Wt}}},Xt=Object(c.a)(Jt,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"YggGrid"},t._l(t.rows,function(e){return n("div",{staticClass:"YggGrid__row row"},t._l(e,function(e){return n("div",{directives:[{name:"empty-class",rawName:"v-empty-class",value:"YggGrid__col--empty",expression:"'YggGrid__col--empty'"}],staticClass:"YggGrid__col",class:t.colClasses(e)},[t._t("default",null,null,e)],2)}),0)}),0)},[],!1,null,null,null).exports,Zt={name:"YggFieldsLayout",components:{YggGrid:Xt},props:{layout:{type:Array,required:!0},visible:{type:Object,default:function(){return{}}}},data:function(){return{fieldsetMap:{}}},methods:{isFieldsetVisible:function(t){var e=this,n=t.id,r=t.fields;return(this.fieldsetMap[n]||(this.fieldsetMap[n]=[].concat.apply([],r))).some(function(t){return e.visible[t.key]})}}},te=Object(c.a)(Zt,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ygg-grid",{attrs:{rows:t.layout},scopedSlots:t._u([{key:"default",fn:function(e){return[e.legend?n("fieldset",{directives:[{name:"show",rawName:"v-show",value:t.isFieldsetVisible(e),expression:"isFieldsetVisible(fieldLayout)"}],staticClass:"YggForm__fieldset"},[n("div",{staticClass:"YggModule__inner"},[n("div",{staticClass:"YggModule__header"},[n("legend",{staticClass:"YggModule__title"},[t._v(t._s(e.legend))])]),t._v(" "),n("div",{staticClass:"YggModule__content"},[n("ygg-fields-layout",{attrs:{layout:e.fields},scopedSlots:t._u([{key:"default",fn:function(e){return[t._t("default",null,null,e)]}}],null,!0)})],1)])]):t._t("default",null,null,e)]}}],null,!0)})},[],!1,null,null,null).exports;function ee(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function ne(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ee(n,!0).forEach(function(e){re(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ee(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function re(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ie(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ae(t){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var oe=["text","textarea"];function se(t){return oe.includes(t.type)}function le(t){var e,n=ne({},t.localeObject,re({},t.locale,t.value));return e=n,Object.entries(e).every(function(t){var e=ie(t,2);return e[0],function(t){return null===t||""===t}(e[1])})?null:n}function ce(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function ue(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var de=function(t){return{_localizedForm:t,methods:{fieldLocalizedValue:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.data,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.fieldLocale,a=this[t][e];return this.localized&&a.localized&&se(a)?le({localeObject:r[e],locale:i[e],value:n}):n},defaultFieldLocaleMap:function(t){var e=t.fields,n=t.locales;return Object.values(e).filter(function(t){return t.localized}).reduce(function(t,e){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ce(n,!0).forEach(function(e){ue(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ce(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t,ue({},e.key,n&&n[0]))},{})}}}},fe=n("mwIZ"),he=n.n(fe),pe=n("7wO+"),ge=n.n(pe);function me(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function ve(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?me(n,!0).forEach(function(e){be(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):me(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function be(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ye(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var _e=/{{([\s\S]+?)}}/g;function we(t,e){return(t||[]).find(function(t){return t.name===e})}function Oe(t){var e=t.dynamicOptions,n=void 0===e?{}:e,r=t.attributeValue;return"map"===n.type?n.path:"template"===n.type?ye(r.matchAll(_e)).map(function(t){return t[1].trim()}):[]}function Ce(t){var e=t.dynamicOptions,n=t.attributeValue,r=t.contextData,i=t.contextSources;return"map"===e.type?function(t){var e=t.map,n=t.path,r=t.contextData,i=n.map(function(t){return r[t]});return he()(e,i)}({map:n,path:e.path,contextData:r}):"template"===e.type?function(t){var e=t.template,n=t.sources,r=t.contextData,i=ge()(e,{interpolate:_e,evaluate:!1,escape:!1}),a=(n||[]).reduce(function(t,e){return ve({},t,be({},e,null))},{});return i(ve({},a,{},r))}({template:n,sources:i,contextData:r}):n}function xe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function ke(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xe(n,!0).forEach(function(e){Se(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xe(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Se(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ye(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function je(t,e,n){var r=Object.entries(t||{}).reduce(function(t,r){var i=Ye(r,2),a=i[0],o=function(t,e,n){var r=n.dynamicAttributes,i=n.contextData,a=we(r,t),o=Oe({dynamicOptions:a,attributeValue:e});return a?function(t){var e=t.contextSources,n=t.contextData;return e.filter(function(t){var e=n[t];return null==e||""===e})}({contextSources:o,contextData:i}).length>0?{isEmpty:null==a.default,value:a.default}:{value:Ce({dynamicOptions:a,attributeValue:e,contextData:i,contextSources:o})}:{value:e}}(a,i[1],{dynamicAttributes:e,contextData:n}),s=t.resolvedEmptyAttributes||[];return o.isEmpty&&s.push(a),ke({},t,{resolvedEmptyAttributes:s,attributes:ke({},t.attributes,Se({},a,o.value))})},{});return{attributes:r.attributes,resolvedEmptyAttributes:r.resolvedEmptyAttributes}}function Pe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function De(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pe(n,!0).forEach(function(e){Ae(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pe(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Ae(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Le(t,e){var n=function(t,e){return Object.entries(t).reduce(function(t,n){var r=$e(n,2),i=r[0],a=r[1];return De({},t,Ae({},i,function(t,e){return"autocomplete"===t&&e?e.id:e}(e[i].type,a)))},{})}(e,t);return Object.entries(t).reduce(function(t,e){var r=$e(e,2),i=r[0],a=r[1],o=je(a,a.dynamicAttributes,n),s=o.attributes,l=o.resolvedEmptyAttributes;return De({},t,Ae({},i,De({},s,{readOnly:s.readOnly||l.length>0})))},{})}function Ee(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Be(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ie(t,e,n){return Object.values(t).filter(function(t){return n=e,r=t.dynamicAttributes,i=t,(r||[]).some(function(t){return Oe({dynamicOptions:t,attributeValue:i[t.name]}).includes(n)});var n,r,i}).reduce(function(t,e){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ee(n,!0).forEach(function(e){Be(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ee(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t,Be({},e.key,n?n(e,null):null))},{})}function Fe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Me(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Fe(n,!0).forEach(function(e){Te(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fe(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Te(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ze(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Ne(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){ze(a,r,i,o,s,"next",t)}function s(t){ze(a,r,i,o,s,"throw",t)}o(void 0)})}}var Ve,Re,qe,Ke,Ue={name:"YggForm",extends:Et,mixins:[K,U("fields"),m,de("fields")],components:{YggTabbedLayout:Gt,YggFieldsLayout:te,YggGrid:Xt},props:{resourceKey:String,instanceId:String,independant:{type:Boolean,default:!1},ignoreAuthorizations:Boolean,reloadOnSubmit:{type:Boolean,default:!1},props:Object},inject:["actionsBus"],provide:function(){return{$form:this}},data:function(){return{ready:!1,fields:null,authorizations:null,errors:{},fieldLocale:{},locales:null,fieldVisible:{},curFieldsetId:0,pendingJobs:[]}},computed:{apiPath:function(){var t="form/".concat(this.resourceKey);return this.instanceId&&(t+="/".concat(this.instanceId)),t},localized:function(){return Array.isArray(this.locales)&&!!this.locales.length},isCreation:function(){return!this.instanceId},isReadOnly:function(){return!this.ignoreAuthorizations&&!(this.isCreation?this.authorizations.create:this.authorizations.update)},synchronous:function(){return this.independant},hasErrors:function(){var t=this;return Object.keys(this.errors).some(function(e){return!t.errors[e].cleared})},baseResourceKey:function(){return this.resourceKey.split(":")[0]},downloadLinkBase:function(){return"/download/".concat(this.resourceKey,"/").concat(this.instanceId)},listUrl:function(){return"".concat(at,"/list/").concat(this.baseResourceKey,"?restore-context=1")},localeSelectorErrors:function(){var t=this;return Object.keys(this.errors).reduce(function(e,n){var r=t.locales.find(function(t){return n.endsWith(".".concat(t))});return r&&(e[r]=!0),e},{})},transformedFields:function(){return Le(this.isReadOnly?this.readOnlyFields:this.fields,this.data)}},methods:{updateData:(Ke=Ne(x.a.mark(function t(e,n){var r,i,a=this,o=arguments;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=o.length>2&&void 0!==o[2]?o[2]:{},i=r.forced,this.data=Me({},this.data,{},i?null:Ie(this.fields,e,function(t){return a.fieldLocalizedValue(t.key,null)}),Te({},e,this.fieldLocalizedValue(e,n)));case 2:case"end":return t.stop()}},t,this)})),function(t,e){return Ke.apply(this,arguments)}),updateVisibility:function(t,e){this.$set(this.fieldVisible,t,e)},updateLocale:function(t,e){this.$set(this.fieldLocale,t,e)},mount:function(t){var e=t.fields,n=t.layout,r=t.data,i=void 0===r?{}:r,a=t.authorizations,o=void 0===a?{}:a,s=t.locales;this.fields=e,this.data=i,this.layout=this.patchLayout(n),this.locales=s,this.authorizations=o,e&&(this.fieldVisible=Object.keys(this.fields).reduce(function(t,e){return t[e]=!0,t},{}),this.fieldLocale=this.defaultFieldLocaleMap({fields:e,locales:s})),this.validate()},validate:function(){var t,e=this;Object.keys(this.fieldLocale).length>0&&!this.locales.length&&(t="Some fields are localized but the form hasn't any locales configured",e.actionsBus.$emit("showMainModal",{title:"Data error",text:t,isError:!0,okCloseOnly:!0}))},handleError:function(t){var e=t.response;422===e.status&&(this.errors=e.data.errors||{})},patchLayout:function(t){if(t){var e=0,n=function t(n){n.legend?n.id="".concat(e++,"#").concat(n.legend):n.fields&&n.fields.forEach(function(e){e.forEach(t)})};return t.tabs.forEach(function(t){return t.columns.forEach(n)}),t}},init:(qe=Ne(x.a.mark(function t(){return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.independant){t.next=5;break}this.mount(this.props),this.ready=!0,t.next=13;break;case 5:if(!this.resourceKey){t.next=12;break}return t.next=8,this.get();case 8:this.setupActionBar(),this.ready=!0,t.next=13;break;case 12:R("no resource key provided");case 13:case"end":return t.stop()}},t,this)})),function(){return qe.apply(this,arguments)}),setupActionBar:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.disable,n=void 0!==e&&e,r=this.isCreation?this.authorizations.create:this.authorizations.update;this.actionsBus.$emit("setup",{showSubmitButton:r&&!n,showDeleteButton:!this.isCreation&&this.authorizations.delete&&!n,showBackButton:this.isReadOnly,opType:this.isCreation?"create":"update"})},afterSubmit:function(){this.reloadOnSubmit?location.reload():location.href=this.listUrl},submit:(Re=Ne(x.a.mark(function t(){var e,n,r,i=arguments;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=i.length>0&&void 0!==i[0]?i[0]:{},n=e.postFn,!this.pendingJobs.length){t.next=3;break}return t.abrupt("return");case 3:if(t.prev=3,!n){t.next=10;break}return t.next=7,n(this.data);case 7:t.t0=t.sent,t.next=13;break;case 10:return t.next=12,this.post();case 12:t.t0=t.sent;case 13:if(r=t.t0,!this.independant){t.next=19;break}return this.$emit("submit",r),t.abrupt("return",r);case 19:r.data.ok&&(this.mainLoading.$emit("show"),this.afterSubmit());case 20:t.next=26;break;case 22:return t.prev=22,t.t1=t.catch(3),this.handleError(t.t1),t.abrupt("return",Promise.reject(t.t1));case 26:case"end":return t.stop()}},t,this,[[3,22]])})),function(){return Re.apply(this,arguments)})},actions:{submit:function(){this.submit().catch(function(){})},delete:(Ve=Ne(x.a.mark(function t(){return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.axiosInstance.delete(this.apiPath);case 3:this.afterSubmit(),t.next=8;break;case 6:t.prev=6,t.t0=t.catch(0);case 8:case"end":return t.stop()}},t,this,[[0,6]])})),function(){return Ve.apply(this,arguments)}),cancel:function(){this.afterSubmit()},setPendingJob:function(t){var e=t.key,n=t.origin;t.value?this.pendingJobs.push(e):this.pendingJobs=this.pendingJobs.filter(function(t){return t!==e}),this.pendingJobs.length?this.actionsBus.$emit("updateActionsState",{state:"pending",modifier:n}):this.actionsBus.$emit("updateActionsState",null)}},created:function(){var t=this;this.$on("error-cleared",function(e){t.errors[e]&&t.$set(t.errors[e],"cleared",!0)})},mounted:function(){this.init()}},He=Object(c.a)(Ue,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"YggForm"},[t.ready?[n("div",{staticClass:"container"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.hasErrors,expression:"hasErrors"}],staticClass:"YggNotification YggNotification--error",attrs:{role:"alert"}},[n("div",{staticClass:"YggNotification__details"},[n("div",{staticClass:"YggNotification__text-wrapper"},[n("p",{staticClass:"YggNotification__title"},[t._v(t._s(t.l("form.validation_error.title")))]),t._v(" "),n("p",{staticClass:"YggNotification__subtitle"},[t._v(t._s(t.l("form.validation_error.description")))])])])]),t._v(" "),n("ygg-tabbed-layout",{ref:"tabbedLayout",attrs:{layout:t.layout},scopedSlots:t._u([{key:"default",fn:function(e){return[n("ygg-grid",{ref:"columnsGrid",attrs:{rows:[e.columns]},scopedSlots:t._u([{key:"default",fn:function(e){return[t.fields?n("ygg-fields-layout",{ref:"fieldLayout",attrs:{layout:e.fields,visible:t.fieldVisible},scopedSlots:t._u([{key:"default",fn:function(e){return[n("ygg-field-display",{ref:"field",attrs:{"config-identifier":e.key,"context-data":t.data,"context-fields":t.transformedFields,"error-identifier":e.key,"field-key":e.key,"field-layout":e,locale:t.fieldLocale[e.key],"update-data":t.updateData,"update-visibility":t.updateVisibility},on:{"locale-change":t.updateLocale}})]}}],null,!0)}):t._e()]}}],null,!0)})]}}],null,!1,2477299600)})],1)]:t._e()],2)},[],!1,null,null,null).exports;function Ge(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function We(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Qe={name:"YggTemplate",components:{RenderedTemplate:{functional:!0,props:{name:String,template:String,templateProps:Array,templateData:Object},render:function(t,e){var n=e.props,r=e.data,i=n.name,a=n.template,o=n.templateProps,s=n.templateData;return t({name:"YggTemplate".concat(i),template:"<div>".concat(a,"</div>"),props:o},function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ge(n,!0).forEach(function(e){We(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ge(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},r,{props:s}))}}},props:{name:String,templateData:Object,template:String},computed:{templateProps:function(){return Object.keys(this.templateData||{})}}},Je=Object(c.a)(Qe,function(){var t=this.$createElement;return(this._self._c||t)("rendered-template",{staticClass:"YggTemplate",attrs:{name:this.name,template:this.template,"template-data":this.templateData,"template-props":this.templateProps}})},[],!1,null,null,null).exports,Xe={name:"YggLoading",props:{visible:Boolean,inline:Boolean,small:Boolean},data:function(){return{show:this.visible}},watch:{visible:function(t){this.show=t}},created:function(){var t=this;this.$on("show",function(e){return t.show=!0}),this.$on("hide",function(e){return t.show=!1})}},Ze=Object(c.a)(Xe,function(){var t=this.$createElement,e=this._self._c||t;return this.inline?e("div",{directives:[{name:"show",rawName:"v-show",value:this.show,expression:"show"}],staticClass:"YggLoading",class:{"YggLoading--small":this.small}},[e("svg",{staticClass:"YggLoading__svg",attrs:{viewBox:"-75 -75 150 150"}},[e("circle",{attrs:{cx:"0",cy:"0",r:"37.5"}})])]):e("div",{directives:[{name:"show",rawName:"v-show",value:this.show,expression:"show"}],staticClass:"YggLoading__overlay"},[e("div",{staticClass:"YggLoading",class:{"YggLoading--small":this.small}},[e("svg",{staticClass:"YggLoading__svg",attrs:{viewBox:"-75 -75 150 150"}},[e("circle",{attrs:{cx:"0",cy:"0",r:"37.5"}})])])])},[],!1,null,null,null).exports,tn=n("qLf8"),en=n.n(tn);function nn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var rn=function(){function t(e){var n=e.list,r=e.minQueryLength,i=e.searchKeys;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options={caseSensitive:!1,include:[],minMatchCharLength:1,shouldSort:!0,tokenize:!0,matchAllTokens:!1,findAllMatches:!1,id:null,keys:i||["value"],location:0,threshold:0,distance:0,maxPatternLength:64},this.fuse=new en.a(n,this.options),this.minQueryLength=r||0}var e,n,r;return e=t,(n=[{key:"search",value:function(t){return void 0===t||t.length<this.minQueryLength?this.fuse.list:this.fuse.search(t)}}])&&nn(e.prototype,n),r&&nn(e,r),t}(),an={inject:{$form:{default:function(){return new i.a}}},props:{locale:String,localized:Boolean},computed:{locales:function(){return this.$form.locales},isLocalized:function(){return this.$form.localized&&this.localized}}};function on(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var sn={mixins:[an],computed:{localizedSearchKeys:function(){var t=this;return this.localized?this.searchKeys.map(function(e){var n=e;return t.localizedDataKeys.includes(e)&&(n+=".".concat(t.locale)),n}):this.searchKeys},localizedDataKeys:function(){var t=this;return Array.isArray(this.localValues)&&this.localValues.length?Object.keys(this.localValues[0]).filter(function(e){return t.isLocaleObject(t.localValues[0][e])}):[]}},methods:{isLocaleObject:function(t){return this.locales&&function(t,e){return!(!t||"object"!==ae(t))&&e.every(function(e){return e in t})}(t,this.locales)},localizedTemplateData:function(t){var e=this;return this.localized?Object.entries(t).reduce(function(t,n){var r=on(n,2),i=r[0],a=r[1];return t[i]=e.isLocaleObject(a)?a[e.locale]:a,t},{}):t}}};function ln(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).dependantAttributes,r=t.$attrs.dynamicAttributes;(n||[]).some(function(t){return we(r,t)})?t.$nextTick(e):e()}function cn(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}var un,dn={name:"YggAutocomplete",components:{Multiselect:f.a,YggTemplate:Je,YggLoading:Ze},mixins:[m,tt,sn],props:{fieldKey:String,value:[String,Number,Object,Array],mode:String,localValues:{type:Array,default:function(){return[]}},placeholder:{type:String,default:function(){return g("form.multiselect.placeholder")}},remoteEndpoint:String,remoteMethod:String,remoteSearchAttribute:{type:String,default:"query"},itemIdAttribute:{type:String,default:"id"},searchMinChars:{type:Number,default:1},searchKeys:{type:Array,default:function(){return["value"]}},readOnly:Boolean,listItemTemplate:String,resultItemTemplate:String,noResultItem:Boolean,multiple:Boolean,hideSelected:Boolean,searchable:{type:Boolean,default:!0},allowEmpty:{type:Boolean,default:!0},clearOnSelect:Boolean,preserveSearch:{type:Boolean,default:!0},showPointer:{type:Boolean,default:!0},dynamicAttributes:Array},data:function(){return{ready:!1,query:"",suggestions:this.localValues,opened:!1,isLoading:!1}},watch:{localValues:function(){this.isRemote||this.updateLocalSuggestions(this.query)}},computed:{isRemote:function(){return"remote"===this.mode},hideDropdown:function(){return this.isQueryTooShort},isQueryTooShort:function(){return this.isRemote&&this.query.length<this.searchMinChars},searchStrategy:function(){return this.isRemote?null:new rn({list:this.localValues,minQueryLength:this.searchMinChars,searchKeys:this.localizedSearchKeys})},clearButtonVisible:function(){return!!this.value&&!this.opened},classes:function(){return[{"YggAutocomplete--remote":this.isRemote},{"YggAutocomplete--disabled":this.readOnly}]},overlayVisible:function(){var t=!!this.fieldKey;return this.value&&t}},methods:{updateSuggestions:function(t){this.query=t,this.isQueryTooShort||(this.isRemote?(this.isLoading=!0,this.updateRemoteSuggestions(t)):this.updateLocalSuggestions(t))},updateLocalSuggestions:function(t){this.suggestions=this.searchStrategy.search(t)},updateRemoteSuggestions:Q()(function(t){var e,n,r,i,a=this;return(e={url:this.remoteEndpoint,method:this.remoteMethod,locale:this.locale,searchAttribute:this.remoteSearchAttribute,query:t},n=e.url,r=e.method,i=mt({locale:e.locale},e.searchAttribute,e.query),"get"===r.toLowerCase()?T.a.get(n,{params:i}).then(function(t){return t.data}):T.a.post(n,i).then(function(t){return t.data})).then(function(t){a.suggestions=t}).finally(function(){a.isLoading=!1})},200),handleSelect:function(t){this.$emit("input",t)},handleDropdownClose:function(){this.opened=!1,this.$emit("close")},handleDropdownOpen:function(){this.opened=!0,this.$emit("open")},handleClearButtonClicked:function(){var t=this;this.$emit("input",null),this.$nextTick(function(){t.$refs.multiselect.activate()})},itemMatchValue:function(t){return t[this.itemIdAttribute]==this.value[this.itemIdAttribute]},findLocalValue:function(){return this.value&&null!=this.value[this.itemIdAttribute]?this.localValues.some(this.itemMatchValue)?this.localValues.find(this.itemMatchValue):(R("Autocomplete (key: ".concat(this.fieldKey,") can't find local value matching : ").concat(JSON.stringify(this.value))),null):null},setDefault:(un=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){cn(a,r,i,o,s,"next",t)}function s(t){cn(a,r,i,o,s,"throw",t)}o(void 0)})}}(x.a.mark(function t(){return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.$emit("input",this.findLocalValue(),{force:!0}),t.next=3,this.$nextTick();case 3:this.ready=!0;case 4:case"end":return t.stop()}},t,this)})),function(){return un.apply(this,arguments)})},created:function(){"local"!==this.mode||this.searchKeys||function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];N.apply(void 0,["warn"].concat(e))}("Autocomplete (key: ".concat(this.fieldKey,") has local mode but no searchKeys, default set to ['value']")),this.isRemote?this.ready=!0:ln(this,this.setDefault,{dependantAttributes:["localValues"]})}},fn=Object(c.a)(dn,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"YggAutocomplete",class:t.classes},[t.ready?[n("multiselect",{ref:"multiselect",staticClass:"YggAutocomplete__multiselect",class:{"YggAutocomplete__multiselect--hide-dropdown":t.hideDropdown},attrs:{value:t.value,options:t.suggestions,"track-by":t.itemIdAttribute,"internal-search":!1,placeholder:t.placeholder,loading:t.isLoading,multiple:t.multiple,disabled:t.readOnly,"hide-selected":t.hideSelected,"allow-empty":t.allowEmpty,"preserve-search":t.preserveSearch,"show-pointer":t.showPointer,searchable:t.searchable},on:{"search-change":function(e){return t.updateSuggestions(e)},select:t.handleSelect,input:function(e){return t.$emit("multiselect-input",e)},close:t.handleDropdownClose,open:t.handleDropdownOpen},scopedSlots:t._u([{key:"singleLabel",fn:function(e){var r=e.option;return[n("YggTemplate",{attrs:{name:"ResultItem",template:t.resultItemTemplate,"template-data":t.localizedTemplateData(r)}})]}},{key:"option",fn:function(e){var r=e.option;return[n("YggTemplate",{attrs:{name:"ListItem",template:t.listItemTemplate,"template-data":t.localizedTemplateData(r)}})]}}],null,!1,2689023318)},[n("template",{slot:"clear"},[t.clearButtonVisible?[n("button",{staticClass:"YggAutocomplete__result-item__close-button",attrs:{type:"button"},on:{click:t.handleClearButtonClicked}},[n("svg",{staticClass:"YggAutocomplete__result-item__close-icon",attrs:{"aria-label":"close","fill-rule":"evenodd",height:"10",viewBox:"0 0 10 10",width:"10"}},[n("path",{attrs:{d:"M9.8 8.6L8.4 10 5 6.4 1.4 10 0 8.6 3.6 5 .1 1.4 1.5 0 5 3.6 8.6 0 10 1.4 6.4 5z"}})])])]:t._e()],2),t._v(" "),t._v(" "),t._v(" "),n("template",{slot:"loading"},[n("YggLoading",{attrs:{visible:t.isLoading,inline:"",small:""}})],1),t._v(" "),n("template",{slot:"noResult"},[t._v("\n                "+t._s(t.l("form.autocomplete.no_results_text"))+"\n            ")])],2),t._v(" "),t.overlayVisible?[n("div",{staticClass:"YggAutocomplete__overlay multiselect"},[n("div",{staticClass:"multiselect__tags"},[n("YggTemplate",{attrs:{template:t.resultItemTemplate,"template-data":t.localizedTemplateData(t.value),name:"ResultItem"}})],1)])]:t._e()]:t._e()],2)},[],!1,null,null,null).exports,hn=function(t,e){var n=e.value;n&&t.setAttribute("maxlength",n)},pn={name:"YggTextarea",props:{value:{type:String},placeholder:String,readOnly:Boolean,maxLength:Number,rows:Number},data:function(){return{}},methods:{handleInput:function(t){this.$emit("input",t.target.value)}},directives:{Maxlength:hn}},gn=Object(c.a)(pn,function(){var t=this.$createElement;return(this._self._c||t)("textarea",{directives:[{name:"maxlength",rawName:"v-maxlength",value:this.maxLength,expression:"maxLength"}],staticClass:"YggTextarea",attrs:{disabled:this.readOnly,placeholder:this.placeholder,rows:this.rows},domProps:{value:this.value},on:{input:this.handleInput}})},[],!1,null,null,null).exports,mn={name:"YggText",mixins:[F],props:{value:[String,Number],placeholder:String,readOnly:Boolean,maxLength:Number,inputType:{type:String,default:"text"}},data:function(){return{}},methods:{handleInput:function(t){this.$emit("input",t.target.value)}},mounted:function(){this.setFocusable(this.$refs.input)},directives:{Maxlength:hn}},vn=Object(c.a)(mn,function(){var t=this.$createElement;return(this._self._c||t)("input",{directives:[{name:"maxlength",rawName:"v-maxlength",value:this.maxLength,expression:"maxLength"}],ref:"input",staticClass:"YggText",attrs:{type:this.inputType,placeholder:this.placeholder,disabled:this.readOnly},domProps:{value:this.value},on:{input:this.handleInput}})},[],!1,null,null,null).exports,bn=n("6/sb"),yn=n.n(bn),_n=n("d90G"),wn=n("lcPr"),On=n.n(wn);var Cn={props:{compactThumbnail:Boolean},computed:{modifiers:function(){return{compacted:this.compactThumbnail}}}},xn={props:{modifiers:{type:Object,default:function(){}}},computed:{modifiersClasses:function(){return{"YggUpload--compacted":this.modifiers.compacted}}}};function kn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Sn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?kn(n,!0).forEach(function(e){Yn(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kn(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Yn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jn(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}var Pn,Dn={name:"YggVueClip",extends:_n.a,components:{YggModal:wt,VueCropper:On.a},inject:["actionsBus","axiosInstance","$form","$field"],mixins:[m,xn],props:{downloadId:String,pendingKey:String,ratioX:Number,ratioY:Number,value:Object,croppableFileTypes:Array,readOnly:Boolean},data:function(){return{showEditModal:!1,croppedImg:null,resized:!1,allowCrop:!1,isNew:!this.value,canDownload:!!this.value}},watch:{value:function(t){t||(this.files=[])},"file.status":function(t){t in this.statusFunction&&this[this.statusFunction[t]]()}},computed:{file:function(){return this.files[0]},originalImageSrc:function(){return this.file&&(this.file.thumbnail||this.file.dataUrl)},imageSrc:function(){return this.croppedImg||this.originalImageSrc},size:function(){if(null==this.file.size)return"";var t=parseFloat(this.file.size.toFixed(2))/1024/1024,e="";return t<.1&&(e+="<",t=.1),e+=t.toLocaleString(),"".concat(e," MB")},operationFinished:function(){return{crop:this.hasInitialCrop?!!this.croppedImg:null}},operations:function(){return Object.keys(this.operationFinished)},activeOperationsCount:function(){var t=this;return this.operations.filter(function(e){return null!==t.operationFinished[e]}).length},operationFinishedCount:function(){var t=this;return this.operations.filter(function(e){return t.operationFinished[e]}).length},progress:function(){var t=this.file?this.file.progress:100,e=1-.05*(this.activeOperationsCount-this.operationFinishedCount);return Math.floor(t)*e},inProgress:function(){return this.file&&"exist"!==this.file.status&&this.progress<100},statusFunction:function(){return{error:"onStatusError",success:"onStatusSuccess",added:"onStatusAdded"}},fileName:function(){var t=this.file.name.split("/");return t.length?t[t.length-1]:""},fileExtension:function(){var t=this.fileName.split(".").pop();return t?".".concat(t):null},downloadLink:function(){return"".concat(this.$form.downloadLinkBase,"/").concat(this.downloadId)},showThumbnail:function(){return this.imageSrc},hasInitialCrop:function(){return!(!this.ratioX||!this.ratioY)&&this.isCroppable},isCroppable:function(){return!this.croppableFileTypes||this.croppableFileTypes.includes(this.fileExtension)}},methods:{setPending:function(t){this.actionsBus.$emit("setPendingJob",{key:this.pendingKey,origin:"upload",value:t})},onStatusAdded:function(){this.$emit("reset"),this.setPending(!0)},onStatusError:function(){var t=this.file.errorMessage;this.remove(),this.$emit("error",t)},onStatusSuccess:function(){var t=this,e={};try{e=JSON.parse(this.file.xhrResponse.responseText)}catch(t){console.log(t)}e.uploaded=!0,this.$emit("success",e),this.$emit("input",e),this.setPending(!1),this.allowCrop=!0,this.$nextTick(function(e){t.isCropperReady()&&t.onCropperReady()})},download:(Pn=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){jn(a,r,i,o,s,"next",t)}function s(t){jn(a,r,i,o,s,"throw",t)}o(void 0)})}}(x.a.mark(function t(){var e,n,r;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.value.uploaded){t.next=9;break}return t.next=3,this.axiosInstance.post(this.downloadLink,{fileName:this.value.name},{responseType:"blob"});case 3:e=t.sent,n=e.data,(r=this.$refs.dlLink).href=URL.createObjectURL(n),r.download=this.fileName,r.click();case 9:case"end":return t.stop()}},t,this)})),function(){return Pn.apply(this,arguments)}),remove:function(){this.canDownload=!1,this.removeFile(this.file),this.files.splice(0,1),this.setPending(!1),this.resetEdit(),this.$emit("input",null),this.$emit("reset"),this.$emit("removed")},resetEdit:function(){this.croppedImg=null,this.resized=!1},onEditButtonClick:function(){this.$emit("active"),this.showEditModal=!0,this.allowCrop=!0},handleImageLoaded:function(){this.isNew&&this.$emit("image-updated")},onEditModalShown:function(){var t=this;this.resized||this.$nextTick(function(){var e=t.$refs.cropper.cropper;e.resize(),e.reset(),t.resized=!0})},onEditModalHidden:function(){var t=this;this.$emit("inactive"),setTimeout(function(){return t.$refs.cropper.cropper.reset()},300)},onEditModalOk:function(){this.updateCroppedImage(),this.updateCropData()},isCropperReady:function(){return this.$refs.cropper&&this.$refs.cropper.cropper.ready},onCropperReady:function(){this.hasInitialCrop&&(this.updateCroppedImage(),this.updateCropData())},updateCropData:function(){var t=this.getCropData(),e=this.getImageData(),n=e.naturalWidth,r=e.naturalHeight;Math.abs(t.rotate)%180&&(n=e.naturalHeight,r=e.naturalWidth);var i={width:t.width/n,height:t.height/r,x:t.x/n,y:t.y/r,rotate:-1*t.rotate};if(this.allowCrop){var a=Sn({},this.value,{cropData:i});this.$emit("input",a),this.$emit("updated",a)}},updateCroppedImage:function(){this.allowCrop&&(this.isNew=!0,this.croppedImg=this.$refs.cropper.getCroppedCanvas().toDataURL())},getCropData:function(){return this.$refs.cropper.getData(!0)},getImageData:function(){return this.$refs.cropper.getImageData()},rotate:function(t){!function(t,e){var n=t.getCropBoxData(),r=t.getContainerData();n.width=2,n.height=2,n.top=0;var i=r.width/2-1;n.left=i,t.setCropBoxData(n),t.rotate(e);var a=t.getCanvasData(),o=a.height,s=r.height,l=s/o,c=a.width*l;a.height=s,a.width=c,a.top=0,a.width>=r.width?a.left=0:a.left=(r.width-a.width)/2,t.setCanvasData(a),n.left=0,n.top=0,n.width=a.width,n.height=a.height,t.setCropBoxData(n)}(this.$refs.cropper.cropper,t)}},created:function(){this.options.thumbnailWidth=null,this.options.thumbnailHeight=null,this.options.maxFiles=1,this.value&&(this.addedFile(Sn({},this.value,{upload:{}})),this.file.thumbnail=this.value.thumbnail,this.file.status="exist")},beforeDestroy:function(){this.uploader._uploader.destroy()}},An=Object(c.a)(Dn,function(){var t,e=this,n=e.$createElement,r=e._self._c||n;return r("div",{staticClass:"YggUpload",class:[{"YggUpload--empty":!e.file,"YggUpload--disabled":e.readOnly},e.modifiersClasses]},[r("div",{staticClass:"YggUpload__inner"},[r("div",{staticClass:"YggUpload__content"},[r("form",{directives:[{name:"show",rawName:"v-show",value:!e.file,expression:"!file"}],staticClass:"dropzone"},[r("button",{staticClass:"dz-message YggButton YggButton--ghost YggUpload__upload-button",attrs:{disabled:e.readOnly,type:"button"}},[e._v("\n                    "+e._s(e.l("form.upload.browse_button"))+"\n                ")])]),e._v(" "),e.file?[r("div",{staticClass:"YggUpload__container",class:{row:e.showThumbnail}},[e.showThumbnail?r("div",{staticClass:"YggUpload__thumbnail",class:[e.modifiers.compacted?"col-4 col-sm-3 col-xl-2":"col-4 col-md-4"]},[r("img",{attrs:{src:e.imageSrc},on:{load:e.handleImageLoaded}})]):e._e(),e._v(" "),r("div",{staticClass:"YggUpload__infos",class:(t={},t[e.modifiers.compacted?"col-8 col-sm-9 col-xl-10":"col-8 col-md-8"]=e.showThumbnail,t)},[r("div",{staticClass:"mb-3 text-truncate"},[r("label",{staticClass:"YggUpload__filename"},[e._v(e._s(e.fileName))]),e._v(" "),r("div",{staticClass:"YggUpload__info mt-2"},[r("span",{directives:[{name:"show",rawName:"v-show",value:e.size,expression:"size"}],staticClass:"mr-2"},[e._v(e._s(e.size))]),e._v(" "),r("a",{directives:[{name:"show",rawName:"v-show",value:e.canDownload,expression:"canDownload"}],staticClass:"YggUpload__download-link",attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.download(t)}}},[e._v("\n                                    "+e._s(e.l("form.upload.download_link"))+"\n                                ")])]),e._v(" "),r("transition",{attrs:{name:"YggUpload__progress"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.inProgress,expression:"inProgress"}],staticClass:"YggUpload__progress mt-2"},[r("div",{staticClass:"YggUpload__progress-bar",style:{width:e.progress+"%"},attrs:{"aria-valuenow":e.progress,"aria-valuemax":"100","aria-valuemin":"0",role:"progressbar"}})])])],1),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.readOnly,expression:"!readOnly"}]},[r("button",{directives:[{name:"show",rawName:"v-show",value:!!e.originalImageSrc&&!e.inProgress,expression:"!!originalImageSrc && !inProgress"}],staticClass:"YggButton YggButton--sm YggButton--secondary",attrs:{disabled:!e.isCroppable,type:"button"},on:{click:e.onEditButtonClick}},[e._v("\n                                "+e._s(e.l("form.upload.edit_button"))+"\n                            ")]),e._v(" "),r("button",{staticClass:"YggButton YggButton--sm YggButton--secondary YggButton--danger YggUpload__remove-button",attrs:{disabled:e.readOnly,type:"button"},on:{click:function(t){return e.remove()}}},[e._v("\n                                "+e._s(e.l("form.upload.remove_button"))+"\n                            ")])])]),e._v(" "),r("button",{directives:[{name:"show",rawName:"v-show",value:!e.readOnly,expression:"!readOnly"}],staticClass:"YggUpload__close-button",attrs:{type:"button"},on:{click:function(t){return e.remove()}}},[r("svg",{staticClass:"YggUpload__close-icon",attrs:{"aria-label":"close","fill-rule":"evenodd",height:"10",viewBox:"0 0 10 10",width:"10"}},[r("path",{attrs:{d:"M9.8 8.6L8.4 10 5 6.4 1.4 10 0 8.6 3.6 5 .1 1.4 1.5 0 5 3.6 8.6 0 10 1.4 6.4 5z"}})])])])]:e._e(),e._v(" "),r("div",{ref:"clip-preview-template",staticClass:"clip-preview-template",staticStyle:{display:"none"}},[r("div")])],2)]),e._v(" "),e.originalImageSrc&&e.isCroppable?[r("ygg-modal",{ref:"modal",attrs:{title:e.l("modals.cropper.title"),visible:e.showEditModal,"no-close-on-backdrop":""},on:{"update:visible":function(t){e.showEditModal=t},hidden:e.onEditModalHidden,ok:e.onEditModalOk,shown:e.onEditModalShown}},[r("vue-cropper",{ref:"cropper",staticClass:"YggUpload__modal-vue-cropper",attrs:{"aspect-ratio":e.ratioX/e.ratioY,"auto-crop-area":1,background:!0,guides:!1,ready:e.onCropperReady,rotatable:!0,src:e.originalImageSrc,"view-mode":2,zoomable:!1,alt:"Source image","drag-mode":"crop"}}),e._v(" "),r("div",[r("button",{staticClass:"YggButton YggButton--primary",on:{click:function(t){return e.rotate(-90)}}},[r("i",{staticClass:"fa fa-rotate-left"})]),e._v(" "),r("button",{staticClass:"YggButton YggButton--primary",on:{click:function(t){return e.rotate(90)}}},[r("i",{staticClass:"fa fa-rotate-right"})])])],1)]:e._e(),e._v(" "),r("a",{ref:"dlLink",staticStyle:{display:"none"}})],2)},[],!1,null,null,null).exports,$n=["Backspace","Enter"],Ln=["ArrowLeft","ArrowUp","ArrowDown","ArrowRight","Escape","Tab"],En=i.a.extend({mixins:[z,Cn],inject:["xsrfToken"],props:{downloadId:String,pendingKey:String,id:Number,value:Object,maxImageSize:Number,ratioX:Number,ratioY:Number,croppableFileTypes:Array},components:{YggVueClip:An},data:function(){return{show:this.value,marker:null}},computed:{options:function(){return this.patchXsrf({url:st,uploadMultiple:!1,acceptedFiles:{extensions:["image/*"],message:g("form.upload.message.bad_extension")},maxFilesize:{limit:this.maxImageSize,message:g("form.upload.message.file_too_big")}})},dropzone:function(){return this.$refs.vueclip.uploader._uploader},fileInput:function(){return this.dropzone.hiddenFileInput}},methods:{handleAdded:function(){this.show=!0,this.$emit("added")},inputClick:function(){this.fileInput.click()}},mounted:function(){var t=this;this.$on("delete-intent",function(){var e=t.$el.querySelector(".YggUpload__remove-button");e.focus(),e.addEventListener("keydown",function(e){$n.includes(e.key)?t.$emit("remove"):Ln.includes(e.key)&&t.$emit("escape")})})}}),Bn=Object(c.a)(En,function(){var t=this,e=t.$createElement;return(t._self._c||e)("ygg-vue-clip",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],ref:"vueclip",staticClass:"YggMarkdownUpload",attrs:{"croppable-file-types":t.croppableFileTypes,"download-id":t.downloadId,modifiers:t.modifiers,"on-added-file":t.handleAdded,options:t.options,"pending-key":t.pendingKey,ratioX:t.ratioX,ratioY:t.ratioY,value:t.value},on:{active:function(e){return t.$emit("active")},"image-updated":function(e){return t.$emit("refresh")},inactive:function(e){return t.$emit("inactive")},removed:function(e){return t.$emit("remove")},success:function(e){return t.$emit("success",e)},updated:function(e){return t.$emit("update",e)}}})},[],!1,null,null,null).exports;function In(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Fn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Mn=function(t){var e=t.textProp;return{_localizedEditor:{textProp:e},mixins:[an],computed:{localizedText:function(){return this.isLocalized?null!==this.value[e]?this.value[e][this.locale]:"":this.value[e]}},methods:{localizedValue:function(t){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?In(n,!0).forEach(function(e){Fn(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):In(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},this.value,Fn({},e,this.isLocalized?le({localeObject:this.value[e],locale:this.locale,value:t}):t))}}}};function Tn(t){return(Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Nn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zn(n,!0).forEach(function(e){Vn(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zn(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Vn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rn(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function qn(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){Rn(a,r,i,o,s,"next",t)}function s(t){Rn(a,r,i,o,s,"throw",t)}o(void 0)})}}var Kn,Un,Hn=function(){},Gn=Symbol("fileIdSymbol"),Wn={name:"YggMarkdown",mixins:[Mn({textProp:"text"})],props:{uniqueIdentifier:String,fieldConfigIdentifier:String,value:{type:Object,default:function(){return{}}},placeholder:String,toolbar:Array,height:{type:Number,default:300},innerComponents:Object,readOnly:Boolean},inject:["$tab"],data:function(){return{simplemdeInstances:{},cursorPos:{line:0,ch:0},uploaderId:(this.value.files||[]).length}},watch:{locale:(Un=qn(x.a.mark(function t(){return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isLocalized){t.next=4;break}return t.next=3,this.$nextTick();case 3:this.refreshOnExternalChange();case 4:case"end":return t.stop()}},t,this)})),function(){return Un.apply(this,arguments)})},computed:{simplemde:function(){return this.isLocalized?this.simplemdeInstances[this.locale]:this.simplemdeInstances},codemirror:function(){return(this.simplemde||{}).codemirror},idSymbol:function(){return Gn},filesByName:function(){return this.value.files.reduce(function(t,e){return t[e.name]=e,t},{})},indexByFileId:function(){var t=this;return this.value.files.reduce(function(e,n,r){return e[n[t.idSymbol]]=r,e},{})},text:function(){return this.localizedText}},methods:{localizedTextareaRef:function(t){return"textarea_".concat(t)},indexedFiles:function(){var t=this;return(this.value.files||[]).map(function(e,n){return Nn(Vn({},t.idSymbol,n),e)})},createUploader:function(t){var e,n=this,r=t.id,i=t.value,a=t.removeOptions,o=new Bn({mixins:[(e=this,{parent:e})],propsData:Nn({id:r,value:i},this.innerComponents.upload,{downloadId:this.fieldConfigIdentifier,pendingKey:"".concat(this.uniqueIdentifier,".upload.").concat(r)})});return o.$on("success",function(t){return n.updateUploaderData(o,t)}),o.$on("refresh",function(){return n.refreshCodemirror()}),o.$on("remove",function(){return n.removeMarker(o,a)}),o.$on("update",function(t){return n.updateFileData(o,t)}),o.$on("active",function(){return n.setMarkerActive(o)}),o.$on("inactive",function(){return n.setMarkerInactive(o)}),o.$on("escape",function(){return n.escapeMarker()}),o.$mount(),o},createUserUploader:function(t){var e=this,n=null;return this.lastUploader&&this.lastUploader.$destroy(),(n=this.lastUploader=this.createUploader(t)).inputClick(),new Promise(function(t){n.$on("added",function(){e.lastUploader=null,t(n)})})},refreshCodemirror:function(){console.log("refresh codemirror"),this.codemirror.refresh(),this.codemirror.focus()},removeMarker:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.isCMEvent,i=n.relativeFallbackLine,a=t.id,o=t.marker;if(!o.explicitlyCleared){if(!r){o.inclusiveLeft=o.inclusiveRight=!1;var s=o.find(),l=s.from.line,c=l-i;this.codemirror.replaceRange("",{line:c},{line:l+1,ch:0}),o.inclusiveLeft=o.inclusiveRight=!0,o.clear(),this.codemirror.focus()}t.$destroy(),this.value.files=this.value.files.filter(function(t){return t[e.idSymbol]!==a})}},escapeMarker:function(){this.codemirror.focus()},updateUploaderData:function(t,e){var n=t.id,r=t.marker.find(),i=this.codemirror.getLine(r.from.line);this.codemirror.replaceRange(i.replace(/\(.*?\)/,"(".concat(e.name,")")),r.from,r.to),this.value.files.push(Nn(Vn({},this.idSymbol,n),e))},setMarkerActive:function(t){var e=t.marker;this.codemirror.addLineClass(e.lines[0],"wrap","YggMarkdown__line--active")},setMarkerInactive:function(t){var e=t.marker;this.codemirror.removeLineClass(e.lines[0],"wrap","YggMarkdown__line--active")},updateFileData:function(t,e){var n=t.id,r=this.indexByFileId[n],i=this.value.files[r];this.$set(this.value.files,r,Nn({},i,{},e))},insertUploadImage:(Kn=qn(x.a.mark(function t(){var e,n,r,i,a,o,s,l,c,u,d,f,h=this,p=arguments;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=p.length>0&&void 0!==p[0]?p[0]:{},n=e.replaceBySelection,r=e.data,i=e.isInsertion,a=this.codemirror.getSelection(" "),o=this.codemirror.getLine(this.cursorPos.line)||"",s={id:r?this.filesByName[r.name][this.idSymbol]:this.uploaderId++,value:r&&this.filesByName[r.name],removeOptions:{relativeFallbackLine:1}},!i){t.next=10;break}return t.next=7,this.createUserUploader(s);case 7:t.t0=t.sent,t.next=11;break;case 10:t.t0=this.createUploader(s);case 11:return l=t.t0,a&&(this.codemirror.replaceSelection(""),o=this.codemirror.getLine(this.cursorPos.line)),(o.length||0===this.cursorPos.line&&0===this.cursorPos.ch||this.codemirror.findMarksAt({line:this.cursorPos.line-1,ch:0}).length)&&this.codemirror.replaceRange("\n",this.cursorPos),this.codemirror.getInputField().blur(),c=n?a:"![]()",u=i||this.cursorPos.line===this.codemirror.lineCount()-1?1:0,c+="\n".repeat(u),this.codemirror.replaceRange(c,this.cursorPos),this.codemirror.setCursor(this.cursorPos.line-u,0,{scroll:!!i}),d=this.cursorPos,f={line:this.cursorPos.line,ch:this.cursorPos.ch+c.length},l.marker=this.codemirror.markText(d,f,{replacedWith:l.$el,clearWhenEmpty:!1,inclusiveRight:!0,inclusiveLeft:!0,$component:l}),this.codemirror.addLineClass(l.marker.lines[0],"wrap","YggMarkdown__upload-line"),l.marker.lines[0].on("delete",function(){return h.removeMarker(l,{isCMEvent:!0,relativeFallbackLine:1})}),t.abrupt("return",l);case 25:case"end":return t.stop()}},t,this)})),function(){return Kn.apply(this,arguments)}),onCursorActivity:function(){this.codemirror&&(this.cursorPos=this.codemirror.getCursor())},onChange:function(){this.codemirror&&this.$emit("input",this.localizedValue(this.codemirror.getValue()))},onBeforeChange:function(t,e){if(e&&e.origin&&e.origin.includes("delete")){var n=t.findMarks(e.from,e.to);console.log(n),n.length&&n.forEach(function(t){t.$component&&(e.cancel(),t.$component.$emit("delete-intent"))})}},codemirrorOn:function(t,e,n,r){r&&n(t),t.on(e,n)},localizeToolbar:function(t){t.toolbar.forEach(function(t){if("object"===Tn(t)){var e=t.name.replace(/-/g,"_");t.title=g("form.markdown.icons.".concat(e,".title"))}}),t.gui.toolbar.remove(),t.createToolbar()},setReadOnly:function(t){t.codemirror.setOption("readOnly",!0),t.toolbar.forEach(function(t){return"object"===Tn(t)&&(t.action=Hn)})},bindImageAction:function(t){var e=this;(t.toolbar.find(function(t){return"image"===t.name})||{}).action=function(){return e.insertUploadImage({isInsertion:!0})}},parse:function(){var t=this,e=[];return this.codemirror.eachLine(function(n){var r=n.text,i=t.codemirror.getLineNumber(n),a=/!\[(.*?)\]\((.*?)\)/g.exec(r);if(a){var o=a.index,s=a[0].length,l=a[1],c=a[2];e.push({range:{start:{ch:o,line:i},end:{ch:o+s,line:i}},data:{name:c,title:l}})}}),e.reverse().forEach(function(e){var n=e.range,r=e.data;t.codemirror.setSelection(n.start,n.end,{scroll:!1}),t.insertUploadImage({replaceBySelection:!0,data:r})}),e},refreshOnExternalChange:function(){var t=this;if(!this.simplemde.parsed){var e=this.parse();this.simplemde.parsed=!0,e.length&&this.$nextTick(function(){return window.scrollTo(0,0)})}setTimeout(function(){return t.codemirror.refresh()},50)},createSimpleMDE:function(t){var e=t.element,n=t.initialValue,r=new yn.a({element:e,initialValue:n,placeholder:this.placeholder,spellChecker:!1,toolbar:this.toolbar,autoDownloadFontAwesome:!1,status:!1});return this.readOnly&&this.setReadOnly(r),this.localizeToolbar(r),this.bindImageAction(r),this.initCM(r.codemirror),r},initCM:function(t){t.setSize("auto",this.height),this.codemirrorOn(t,"cursorActivity",this.onCursorActivity,!0),this.codemirrorOn(t,"change",this.onChange),this.codemirrorOn(t,"beforeChange",this.onBeforeChange)}},mounted:function(){var t=this;this.isLocalized?this.simplemdeInstances=this.locales.reduce(function(e,n){return Nn({},e,Vn({},n,t.createSimpleMDE({element:t.$refs[t.localizedTextareaRef(n)][0],initialValue:(t.value.text||{})[n]})))},{}):this.simplemdeInstances=this.createSimpleMDE({element:this.$refs.textarea,initialValue:this.value.text}),this.value.files=this.indexedFiles(),this.$tab?this.$tab.$once("active",function(){return t.refreshOnExternalChange()}):this.$nextTick(function(){return t.refreshOnExternalChange()})}},Qn=Object(c.a)(Wn,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"YggMarkdown",class:{"YggMarkdown--read-only":t.readOnly}},[n("div",{staticClass:"YggModule__inner"},[t.isLocalized?t._l(t.locales,function(e){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.locale===e,expression:"locale === loc"}]},[n("textarea",{ref:t.localizedTextareaRef(e),refInFor:!0,attrs:{id:t.localizedTextareaRef(e)}})])}):[n("textarea",{ref:"textarea"})]],2)])},[],!1,null,null,null).exports;function Jn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Xn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Jn(n,!0).forEach(function(e){Zn(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jn(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Zn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var tr={name:"YggNumber",functional:!0,render:function(t,e){var n=e.props,r=n.step,i=n.min,a=n.max,o=n.showControls,s=e.data;return t(vn,Xn({},s,{class:Xn({"hide-controls":!o},s.class),props:Xn({inputType:"number"},s.props),attrs:Xn({step:r,min:i,max:a},s.attrs)}))}},er=Object(c.a)(tr,void 0,void 0,!1,null,null,null).exports,nr={name:"YggUpload",components:{YggVueClip:An},mixins:[z,Cn],inject:["$field","xsrfToken"],props:{uniqueIdentifier:String,fieldConfigIdentifier:String,value:Object,fileFilter:Array,maxFileSize:Number,thumbnail:String,croppableFileTypes:Array,ratioX:Number,ratioY:Number,readOnly:Boolean},computed:{options:function(){var t={};return t.url=st,t.uploadMultiple=!1,this.fileFilter&&(t.acceptedFiles={extensions:this.fileFilter,message:g("form.upload.message.bad_extension")}),this.maxFileSize&&(t.maxFilesize={limit:this.maxFileSize,message:g("form.upload.message.file_too_big")}),this.patchXsrf(t),t}},methods:{}},rr=Object(c.a)(nr,function(){var t=this,e=t.$createElement;return(t._self._c||e)("ygg-vue-clip",{attrs:{"croppable-file-types":t.croppableFileTypes,"download-id":t.fieldConfigIdentifier,modifiers:t.modifiers,options:t.options,"pending-key":t.uniqueIdentifier,ratioX:t.ratioX,ratioY:t.ratioY,"read-only":t.readOnly,value:t.value},on:{error:function(e){return t.$field.$emit("error",e)},input:function(e){return t.$emit("input",e)},reset:function(e){return t.$field.$emit("clear")}}})},[],!1,null,null,null).exports,ir={mixins:[an],methods:{localizeLabel:function(t){return this.isLocalized?t[this.locale]:t},localizedOptionLabel:function(t){return this.localizeLabel(t.label)}}},ar={extends:ir,methods:{localizeLabel:function(t){return this.isLocalized?t[this.locale]||g("form.tags.unknown_label"):t},localizedTagLabel:function(t){var e,n,r,i,a=this;return this.isLocalized?(e={locales:this.locales,resolve:function(e){return e===a.locale?t:null}},n=e.locales,r=e.resolve,i=void 0===r?function(){return null}:r,n.reduce(function(t,e){return ne({},t,re({},e,i(e)))},{})):t},localizedCustomLabel:function(t){return this.localizeLabel(t.label)}}};function or(t){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sr(t,e){return!e||"object"!==or(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lr(t){return(lr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ur(t,e)}function ur(t,e){return(ur=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function dr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var hr=function(){function t(e){dr(this,t),this.id=e.id,this.label=e.label}var e,n,r;return e=t,(n=[{key:"internalId",set:function(t){this._internalId=t},get:function(){return this._internalId}}])&&fr(e.prototype,n),r&&fr(e,r),t}(),pr=function(t){function e(){return dr(this,e),sr(this,lr(e).apply(this,arguments))}return cr(e,hr),e}(),gr=function(t){function e(){return dr(this,e),sr(this,lr(e).apply(this,arguments))}return cr(e,hr),e}(),mr={name:"YggTags",mixins:[ar],components:{YggMultiselect:_},props:{value:Array,options:Array,placeholder:String,maxTagCount:Number,createText:String,creatable:{type:Boolean,default:!0},readOnly:Boolean},data:function(){return{tags:[],lastIndex:0}},computed:{indexedOptions:function(){return this.options.map(this.patchOption)},dynamicPlaceholder:function(){return this.tags.length<(this.maxTagCount||1/0)?this.placeholder:""},ids:function(){return this.tags.map(function(t){return t.internalId})}},watch:{tags:"onTagsChanged"},methods:{patchOption:function(t,e){var n=new pr(t);return n.internalId=e,n},patchTag:function(t){var e=this.indexedOptions.find(function(e){return e.id===t.id}),n=new gr(e);return n.internalId=e.internalId,n},handleNewTag:function(t){var e=new gr({id:null,label:this.localizedTagLabel(t)});e.internalId=this.lastIndex++,this.tags.push(e)},handleInput:function(t){this.tags=t},handleTextInput:function(t){t.length>0&&this.$refs.multiselect.filteredOptions.length>1?this.$refs.multiselect.pointer=1:this.$refs.multiselect.pointer=0},onTagsChanged:function(){this.$emit("input",this.tags.map(function(t){return new gr(t)}))}},created:function(){this.lastIndex+=this.options.length,this.tags=(this.value||[]).map(this.patchTag)}},vr=Object(c.a)(mr,function(){var t=this,e=t.$createElement;return(t._self._c||e)("ygg-multiselect",{ref:"multiselect",staticClass:"YggTags",attrs:{"close-on-select":!1,"custom-label":t.localizedCustomLabel,disabled:t.readOnly,max:t.maxTagCount,options:t.indexedOptions,placeholder:t.dynamicPlaceholder,"show-labels":!1,"tag-placeholder":t.createText,taggable:t.creatable,value:t.tags,"hide-selected":"",label:"label",multiple:"",searchable:"","track-by":"_internalId"},on:{input:t.handleInput,"search-change":t.handleTextInput,tag:t.handleNewTag}})},[],!1,null,null,null).exports,br=n("oihH"),yr={name:"YggDatepicker",extends:n.n(br).a,computed:{remainingDays:function(){var t=this.days.length+this.blankDays;return t>35?42-t:35-t}},methods:{init:function(){this.value&&this.setValue(this.value),this.showDayCalendar()},clickOutside:function(){}}},_r=Object(c.a)(yr,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"YggDate__datepicker",class:t.wrapperClass},[n("input",{class:t.inputClass,attrs:{"clear-button":t.clearButton,disabled:t.disabledPicker,id:t.id,name:t.name,placeholder:t.placeholder,required:t.required,type:t.inline?"hidden":"text",readonly:""},domProps:{value:t.formattedValue},on:{click:function(e){return t.showCalendar()}}}),t._v(" "),t.clearButton&&t.selectedDate?n("i",{staticClass:"vdp-datepicker__clear-button",on:{click:function(e){return t.clearDate()}}},[t._v("×")]):t._e(),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showDayView,expression:"showDayView"}],staticClass:"YggDate__calendar",class:{open:t.showDayView},style:t.calendarStyle},[n("header",[n("span",{staticClass:"prev",class:{disabled:t.previousMonthDisabled(t.pageTimestamp)},on:{click:t.previousMonth}},[n("svg",{attrs:{"fill-rule":"evenodd",height:"12",viewBox:"0 0 8 12",width:"8"}},[n("path",{attrs:{d:"M7.5 10.6L2.8 6l4.7-4.6L6.1 0 0 6l6.1 6z"}})])]),t._v(" "),n("span",{staticClass:"up",on:{click:t.showMonthCalendar}},[n("span",{staticClass:"YggDate__cur-month"},[t._v(t._s(t.currMonthName))]),t._v(" "),n("span",{staticClass:"YggDate__cur-year"},[t._v(t._s(t.currYear))])]),t._v(" "),n("span",{staticClass:"next",class:{disabled:t.nextMonthDisabled(t.pageTimestamp)},on:{click:t.nextMonth}},[n("svg",{attrs:{"fill-rule":"evenodd",height:"12",viewBox:"0 0 8 12",width:"8"}},[n("path",{attrs:{d:"M0 10.6L4.7 6 0 1.4 1.4 0l6.1 6-6.1 6z"}})])])]),t._v(" "),n("div",{staticClass:"YggDate__innerContainer"},[n("div",{staticClass:"YggDate__rContainer"},[n("div",{staticClass:"YggDate__weekdays"},t._l(t.daysOfWeek,function(e){return n("span",{staticClass:"cell day-header"},[t._v(t._s(e))])}),0),t._v(" "),n("div",{staticClass:"YggDate__days"},[n("div",{staticClass:"YggDate__dayContainer"},[t._l(t.blankDays,function(t){return n("span",{staticClass:"cell day blank"})}),t._v(" "),t._l(t.days,function(e){return n("span",{staticClass:"cell day",class:t.dayClasses(e),on:{click:function(n){return t.selectDate(e)}}},[t._v(t._s(e.date)+"\n                        ")])}),t._v(" "),t._l(t.remainingDays,function(t){return n("span",{staticClass:"cell day blank"})})],2)])])])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showMonthView,expression:"showMonthView"}],staticClass:"YggDate__calendar",class:{open:t.showMonthView},style:t.calendarStyle},[n("header",[n("span",{staticClass:"prev",class:{disabled:t.previousYearDisabled(t.pageTimestamp)},on:{click:t.previousYear}},[n("svg",{attrs:{"fill-rule":"evenodd",height:"12",viewBox:"0 0 8 12",width:"8"}},[n("path",{attrs:{d:"M7.5 10.6L2.8 6l4.7-4.6L6.1 0 0 6l6.1 6z"}})])]),t._v(" "),n("span",{staticClass:"up",on:{click:t.showYearCalendar}},[n("span",{staticClass:"YggDate__cur-year"},[t._v(t._s(t.getPageYear()))])]),t._v(" "),n("span",{staticClass:"next",class:{disabled:t.nextYearDisabled(t.pageTimestamp)},on:{click:t.nextYear}},[n("svg",{attrs:{"fill-rule":"evenodd",height:"12",viewBox:"0 0 8 12",width:"8"}},[n("path",{attrs:{d:"M0 10.6L4.7 6 0 1.4 1.4 0l6.1 6-6.1 6z"}})])])]),t._v(" "),n("div",{staticClass:"YggDate__innerContainer"},[n("div",{staticClass:"YggDate__rContainer"},[n("div",{staticClass:"YggDate__monthContainer"},t._l(t.months,function(e){return n("span",{staticClass:"cell month",class:{selected:e.isSelected,disabled:e.isDisabled},on:{click:function(n){return n.stopPropagation(),t.selectMonth(e)}}},[t._v(t._s(e.month))])}),0)])])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showYearView,expression:"showYearView"}],staticClass:"YggDate__calendar",class:{open:t.showYearView},style:t.calendarStyle},[n("header",[n("span",{staticClass:"prev",class:{disabled:t.previousDecadeDisabled(t.pageTimestamp)},on:{click:t.previousDecade}},[n("svg",{attrs:{"fill-rule":"evenodd",height:"12",viewBox:"0 0 8 12",width:"8"}},[n("path",{attrs:{d:"M7.5 10.6L2.8 6l4.7-4.6L6.1 0 0 6l6.1 6z"}})])]),t._v(" "),n("span",{staticClass:"up"},[n("span",{staticClass:"YggDate__cur-decade"},[t._v(t._s(t.getPageDecade()))])]),t._v(" "),n("span",{staticClass:"next",class:{disabled:t.nextMonthDisabled(t.pageTimestamp)},on:{click:t.nextDecade}},[n("svg",{attrs:{"fill-rule":"evenodd",height:"12",viewBox:"0 0 8 12",width:"8"}},[n("path",{attrs:{d:"M0 10.6L4.7 6 0 1.4 1.4 0l6.1 6-6.1 6z"}})])])]),t._v(" "),n("div",{staticClass:"YggDate__innerContainer"},[n("div",{staticClass:"YggDate__rContainer"},[n("div",{staticClass:"YggDate__yearContainer"},t._l(t.years,function(e){return n("span",{staticClass:"cell year",class:{selected:e.isSelected,disabled:e.isDisabled},on:{click:function(n){return n.stopPropagation(),t.selectYear(e)}}},[t._v(t._s(e.year))])}),0)])])])])},[],!1,null,null,null).exports,wr=n("UX8W"),Or=n.n(wr),Cr=n("wd/R"),xr=n.n(Cr),kr=Or.a.methods.renderFormat,Sr={name:"YggTimePicker",mixins:[Or.a,G],props:{active:Boolean,min:String,max:String,minMaxFormat:{type:String,default:"HH:mm"}},data:function(){return{showDropdown:!0,isSelection:!1}},watch:{minute:function(){var t=this;this.$nextTick(function(e){return t.updateScroll("minutes")})},hour:function(){var t=this;this.$nextTick(function(e){return t.updateScroll("hours")})},active:function(t){var e=this;t&&["minutes","hours"].forEach(function(t){return e.updateScroll(t)})}},computed:{minMoment:function(){var t=this.min?xr()(this.min,this.minMaxFormat):xr()("0:0",this.minMaxFormat);return{minutes:t.minutes(),hours:t.hours()}},maxMoment:function(){var t=this.max?xr()(this.max,this.minMaxFormat):xr()("23:59",this.minMaxFormat);return{minutes:t.minutes(),hours:t.hours()}},croppedHours:function(){var t=this;return this.hours.filter(function(e){return(e=parseInt(e))>=t.minMoment.hours&&e<=t.maxMoment.hours})},croppedMinutes:function(){var t=this,e=parseInt(this.hour);return e===this.minMoment.hours?this.minutes.filter(function(e){return(e=parseInt(e))>=t.minMoment.minutes}):e===this.maxMoment.hours?this.minutes.filter(function(e){return(e=parseInt(e))<=t.maxMoment.minutes}):this.minutes},autoScrollOptions:function(){var t=this;return function(e){return t.isSelection?t.isSelection=!1:{list:t.$refs[e],item:function(){return t.$refs[e].querySelector(".active")}}}}},methods:{select2:function(t,e){this.select(t,e),this.isSelection=!0},renderFormat:function(){kr.apply(this,arguments)}}},Yr=Object(c.a)(Sr,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"time-picker"},[n("header",[n("span",{staticClass:"hint",domProps:{textContent:t._s(t.hourType)}}),t._v(" "),n("span",{staticClass:"hint",domProps:{textContent:t._s(t.minuteType)}})]),t._v(" "),n("div",{staticClass:"dropdown"},[n("div",{staticClass:"select-list"},[n("ul",{ref:"hours",staticClass:"hours"},t._l(t.croppedHours,function(e){return n("li",{class:{active:t.value&&t.hour===e},domProps:{textContent:t._s(e)},on:{click:function(n){return n.stopPropagation(),t.select2("hour",e)}}})}),0),t._v(" "),n("ul",{ref:"minutes",staticClass:"minutes"},t._l(t.croppedMinutes,function(e){return n("li",{class:{active:t.value&&t.minute===e},domProps:{textContent:t._s(e)},on:{click:function(n){return n.stopPropagation(),t.select2("minute",e)}}})}),0)])])])},[],!1,null,null,null).exports,jr=n("hZff"),Pr={name:"YggDate",components:{YggDatePicker:_r,YggTimePicker:Yr,bPopover:n.n(jr).a},inject:["$field"],mixins:[F,m],props:{value:{type:[Object,String]},hasDate:{type:Boolean,default:!0},hasTime:{type:Boolean,default:!1},displayFormat:{type:String,default:"DD/MM/YYYY HH:mm"},mondayFirst:Boolean,stepTime:{type:Number,default:30},minTime:String,maxTime:String,readOnly:Boolean},data:function(){return{showPicker:!1,localInputValue:null}},computed:{moment:function(){return this.value&&xr()(this.value,this.hasTime&&!this.hasDate?"HH:mm":null)},dateObject:function(){return this.moment?this.moment.toDate():null},timeObject:function(){return this.moment?{HH:this.moment.format("HH"),mm:this.moment.format("mm")}:null},inputValue:function(){return"string"==typeof this.localInputValue?this.localInputValue:this.moment?this.moment.format(this.displayFormat):""}},methods:{getMoment:function(){return this.moment||xr()()},handleDateSelect:function(t){var e=this.getMoment();e.set({year:t.getFullYear(),month:t.getMonth(),date:t.getDate()}),this.$emit("input",e)},handleTimeSelect:function(t){var e=t.data,n=this.getMoment();n.set({hour:e.HH,minute:e.mm,second:e.ss}),this.$emit("input",n)},handleInput:function(t){var e=xr()(t.target.value,this.displayFormat,!0);this.localInputValue=t.target.value,e.isValid()?(this.rollback(),this.$emit("input",e),this.showPicker=!0):(this.$field.$emit("error","".concat(g("form.date.validation_error.format")," (").concat(this.displayFormat,")")),this.showPicker=!1)},increase:function(t){this.translate(t.target,1)},decrease:function(t){this.translate(t.target,-1)},translate:function(t,e){var n=this.changeOnArrowPressed(t.selectionStart,e);n&&this.$nextTick(function(e){return t.setSelectionRange(n.start,n.end)})},add:function(t,e){this.moment.add.apply(this.moment,arguments),this.$emit("input",this.moment)},nearestMinutesDist:function(t){var e=this.moment.minutes();if(e%this.stepTime==0)return t*this.stepTime;var n=t<0?"floor":"ceil";return this.stepTime*Math[n](e/this.stepTime)-e},updateMoment:function(t,e){switch(t){case"H":this.add(e,"hours");break;case"m":this.add(this.nearestMinutesDist(e),"minutes");break;case"s":this.add(e,"seconds");break;case"Y":this.add(e,"years");break;case"M":this.add(e,"months");break;case"D":this.add(e,"days");break;default:return!1}return!0},changeOnArrowPressed:function(t,e){var n=t;if(!this.updateMoment(this.displayFormat[n],e)&&t&&(n--,!this.updateMoment(this.displayFormat[n],e)))return null;var r=this.displayFormat[n];return{start:this.displayFormat.indexOf(r),end:this.displayFormat.lastIndexOf(r)+1}},rollback:function(){this.$field.$emit("clear"),this.localInputValue=null},clear:function(){this.rollback(),this.$emit("input",null)},handleBlur:function(){this.rollback()}},mounted:function(){this.setFocusable(this.$refs.input)}},Dr=Object(c.a)(Pr,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"YggDate",class:{"YggDate--open":t.showPicker}},[n("div",{staticClass:"YggDate__input-wrapper"},[n("input",{ref:"input",staticClass:"YggDate__input",attrs:{disabled:t.readOnly,placeholder:t.displayFormat},domProps:{value:t.inputValue},on:{blur:t.handleBlur,input:t.handleInput,keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.preventDefault(),t.decrease(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:(e.preventDefault(),t.increase(e))}]}}),t._v(" "),n("button",{ref:"clearButton",staticClass:"YggDate__clear-button",attrs:{type:"button"},on:{click:function(e){return t.clear()}}},[n("svg",{staticClass:"YggDate__clear-button-icon",attrs:{"aria-label":"close","fill-rule":"evenodd",height:"10",viewBox:"0 0 10 10",width:"10"}},[n("path",{attrs:{d:"M9.8 8.6L8.4 10 5 6.4 1.4 10 0 8.6 3.6 5 .1 1.4 1.5 0 5 3.6 8.6 0 10 1.4 6.4 5z"}})])])]),t._v(" "),n("b-popover",{attrs:{show:t.showPicker,target:function(){return t.$refs.input},placement:"bottom",triggers:"focus"},on:{"update:show":function(e){t.showPicker=e}}},[n("div",{staticClass:"YggDate__picker position-static"},[t.hasDate?[n("ygg-date-picker",{ref:"datepicker",staticClass:"YggDate__date",attrs:{language:t.language,"monday-first":t.mondayFirst,value:t.dateObject,inline:""},on:{selected:t.handleDateSelect}})]:t._e(),t._v(" "),t.hasTime?[n("ygg-time-picker",{ref:"timepicker",staticClass:"YggDate__time",attrs:{active:t.showPicker,format:t.displayFormat,max:t.maxTime,min:t.minTime,"minute-interval":t.stepTime,value:t.timeObject},on:{change:t.handleTimeSelect}})]:t._e()],2)])],1)},[],!1,null,null,null).exports,Ar={name:"YggCheck",props:{value:Boolean,text:String,readOnly:Boolean},methods:{handleCheck:function(t){this.$emit("input",t.target.checked)}}},$r=Object(c.a)(Ar,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"YggCheck"},[n("label",{staticClass:"YggCheck__label"},[n("input",{staticClass:"YggCheck__input",attrs:{type:"checkbox",disabled:t.readOnly},domProps:{checked:t.value},on:{change:t.handleCheck}}),t._v(" "),n("span",{staticClass:"YggCheck__appearance"},[n("svg",{staticClass:"YggCheck__checkmark",attrs:{width:"12",height:"9",viewBox:"0 0 12 9","fill-rule":"evenodd"}},[n("path",{attrs:{d:"M4.1 6.1L1.4 3.4 0 4.9 4.1 9l7.6-7.6L10.3 0z"}})])]),t._v(" "),n("span",{staticClass:"YggCheck__label-text"},[t._v(t._s(t.text))])])])},[],!1,null,null,null).exports,Lr=n("MQ60"),Er=n.n(Lr),Br={name:"YggListItem",extends:te,mixins:[I]},Ir=Object(c.a)(Br,void 0,void 0,!1,null,null,null).exports;function Fr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Mr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Fr(n,!0).forEach(function(e){Tr(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fr(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Tr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zr(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var Nr={name:"YggList",inject:["$form"],mixins:[m,U("itemFields"),de("itemFields")],components:{Draggable:Er.a,YggListItem:Ir,YggTemplate:Je},props:{fieldKey:String,fieldLayout:Object,value:Array,addable:{type:Boolean,default:!0},sortable:{type:Boolean,default:!1},removable:{type:Boolean,default:!1},addText:{type:String,default:"Ajouter un élément"},itemFields:{type:Object,required:!0},collapsedItemTemplate:String,maxItemCount:Number,itemIdAttribute:String,readOnly:Boolean,locale:String},data:function(){return{list:[],itemFieldsLocale:[],dragActive:!1,lastIndex:0}},computed:{classes:function(){return{"YggList--can-sort":this.showSortButton}},disabled:function(){return this.readOnly||this.dragActive},dragOptions:function(){return{disabled:!this.dragActive,handle:".YggList__overlay-handle"}},showAddButton:function(){return this.addable&&(this.list.length<this.maxItemCount||!this.maxItemCount)},showInsertButton:function(){return this.showAddButton&&this.sortable},showSortButton:function(){return this.sortable&&this.list.length>1},itemFieldsKeys:function(){return Object.keys(this.itemFields)},dragIndexSymbol:function(){return Symbol("dragIndex")},indexSymbol:function(){return Symbol("index")}},methods:{itemData:function(t){t.id,t._fieldsLocale;return zr(t,["id","_fieldsLocale"])},transformedFields:function(t){var e=this.list[t],n=this.itemData(e);return Le(this.readOnly||this.dragActive?this.readOnlyFields:this.itemFields,n)},indexedList:function(){var t=this;return(this.value||[]).map(function(e,n){return t.withLocale(Mr(Tr({},t.indexSymbol,n),e))})},createItem:function(){var t;return this.itemFieldsKeys.reduce(function(t,e){return t[e]=null,t},this.withLocale((Tr(t={},this.itemIdAttribute,null),Tr(t,this.indexSymbol,this.lastIndex++),t)))},insertNewItem:function(t,e){e.target&&e.target.blur(),this.list.splice(t+1,0,this.createItem())},add:function(){this.list.push(this.createItem())},remove:function(t){this.list.splice(t,1)},update:function(t){var e=this;return function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.forced,o=Mr({},e.list[t]),s=Mr({},a?null:Ie(e.itemFields,n,function(){return e.fieldLocalizedValue(n,null,o,o._fieldsLocale)}),Tr({},n,e.fieldLocalizedValue(n,r,o,o._fieldsLocale)));Object.assign(e.list[t],s)}},updateLocale:function(t,e,n){this.$set(this.list[t]._fieldsLocale,e,n)},collapsedItemData:function(t){return Mr({$index:t[this.dragIndexSymbol]},t)},toggleDrag:function(){var t=this;this.dragActive=!this.dragActive,this.list.forEach(function(e,n){return e[t.dragIndexSymbol]=n})},withLocale:function(t){return Mr({},t,{_fieldsLocale:this.defaultFieldLocaleMap({fields:this.itemFields,locales:this.$form.locales})})},initList:function(){this.list=this.indexedList(),this.lastIndex=this.list.length,this.$emit("input",this.list)}},created:function(){this.localized=this.$form.localized,this.initList()}},Vr=Object(c.a)(Nr,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"YggList",class:t.classes},[t.showSortButton?[n("button",{staticClass:"YggButton YggButton--ghost YggList__sort-button",class:{"YggButton--active":t.dragActive},attrs:{"data-active-text":t.l("form.list.sort_button.active"),"data-inactive-text":t.l("form.list.sort_button.inactive"),type:"button"},on:{click:t.toggleDrag}},[n("svg",{staticClass:"YggButton__icon",attrs:{"fill-rule":"evenodd",height:"22",viewBox:"0 0 24 22",width:"24"}},[n("path",{attrs:{d:"M20 14V0h-4v14h-4l6 8 6-8zM4 8v14h4V8h4L6 0 0 8z"}})])])]:t._e(),t._v(" "),n("draggable",{ref:"draggable",attrs:{list:t.list,options:t.dragOptions}},[n("transition-group",{attrs:{name:"expand",tag:"div"}},t._l(t.list,function(e,r){return n("div",{key:e[t.indexSymbol],staticClass:"YggList__item",class:{"YggList__item--collapsed":t.dragActive}},[n("div",{staticClass:"YggModule__inner"},[n("div",{staticClass:"YggModule__content"},[t.dragActive&&t.collapsedItemTemplate?[n("ygg-template",{attrs:{template:t.collapsedItemTemplate,"template-data":t.collapsedItemData(e),name:"CollapsedItem"}})]:[n("ygg-list-item",{attrs:{"error-identifier":r,layout:t.fieldLayout.item},scopedSlots:t._u([{key:"default",fn:function(i){return[n("ygg-field-display",{attrs:{"config-identifier":i.key,"context-data":e,"context-fields":t.transformedFields(r),"error-identifier":i.key,"field-key":i.key,locale:e._fieldsLocale[i.key],"update-data":t.update(r)},on:{"locale-change":function(e,n){return t.updateLocale(r,e,n)}}})]}}],null,!0)}),t._v(" "),!t.disabled&&t.removable?n("button",{staticClass:"YggButton YggButton--danger YggButton--sm mt-3",on:{click:function(e){return t.remove(r)}}},[t._v(t._s(t.l("form.list.remove_button"))+"\n                            ")]):t._e()],t._v(" "),t.dragActive?n("div",{staticClass:"YggList__overlay-handle"}):t._e()],2)]),t._v(" "),!t.disabled&&t.showInsertButton&&r<t.list.length-1?n("div",{staticClass:"YggList__new-item-zone"},[n("button",{staticClass:"YggButton YggButton--sm",on:{click:function(e){return t.insertNewItem(r,e)}}},[t._v(t._s(t.l("form.list.insert_button"))+"\n                    ")])]):t._e()])}),0),t._v(" "),n("template",{slot:"footer"},[!t.disabled&&t.showAddButton?n("button",{key:-1,staticClass:"YggButton YggList__add-button",class:"YggButton--ghost",attrs:{type:"button"},on:{click:t.add}},[t._v(t._s(t.addText)+"\n            ")]):t._e()])],2),t._v(" "),t.readOnly&&!t.list.length?n("em",{staticClass:"YggList__empty-alert"},[t._v(t._s(t.l("form.list.empty")))]):t._e()],2)},[],!1,null,null,null).exports,Rr={name:"YggSelect",mixins:[ir],components:{YggMultiselect:_,YggCheck:$r},props:{value:[Array,String,Number],uniqueIdentifier:String,options:{type:Array,required:!0,default:function(){return[]}},multiple:{type:Boolean,default:!1},display:{type:String,default:"dropdown"},clearable:{type:Boolean,default:!1},placeholder:{type:String,default:"-"},maxSelected:Number,readOnly:Boolean,inline:{type:Boolean,default:!0}},data:function(){return{checkboxes:this.value}},watch:{options:function(){this.init()}},computed:{multiselectOptions:function(){return this.options.map(function(t){return t.id})},optionsLabel:function(){var t=this;return this.options.reduce(function(e,n){return e[n.id]=t.localizedOptionLabel(n),e},{})}},methods:{remove:function(){this.$emit("input",null)},multiselectLabel:function(t){return this.optionsLabel[t]},handleInput:function(t){this.$emit("input",t)},checked:function(t){return-1!==this.value.indexOf(t)},handleCheckboxChanged:function(t,e){var n=this.value;t?n.push(e):n=this.value.filter(function(t){return t!==e}),this.$emit("input",n)},handleRadioChanged:function(t){this.$emit("input",t)},setDefault:function(){!this.clearable&&null==this.value&&this.options.length>0&&this.$emit("input",this.options[0].id,{force:!0})},init:function(){ln(this,this.setDefault,{dependantAttributes:["options"]})}},created:function(){this.init()}},qr=Object(c.a)(Rr,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"YggSelect",class:[{"YggSelect--multiple":t.multiple},"YggSelect--"+t.display]},["dropdown"===t.display?n("ygg-multiselect",{ref:"multiselect",attrs:{"allow-empty":t.clearable,"close-on-select":!t.multiple,"custom-label":t.multiselectLabel,disabled:t.readOnly,"hide-selected":t.multiple,max:t.maxSelected,multiple:t.multiple,options:t.multiselectOptions,placeholder:t.placeholder,searchable:!1,value:t.value},on:{close:function(e){return t.$emit("close")},input:t.handleInput,open:function(e){return t.$emit("open")}},scopedSlots:t._u([{key:"tag",fn:function(e){var r=e.option,i=e.remove;return[n("span",{key:r,staticClass:"multiselect__tag"},[n("span",[t._v(t._s(t.multiselectLabel(r)))]),t._v(" "),n("i",{staticClass:"multiselect__tag-icon",attrs:{"aria-hidden":"true",tabindex:"1"},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),i(r))},mousedown:function(t){return t.preventDefault(),t.stopPropagation(),i(r)}}})])]}}],null,!1,2660204576)},[t.clearable&&!t.multiple&&null!=t.value?[n("button",{staticClass:"YggSelect__clear-button",attrs:{slot:"caret",type:"button"},on:{mousedown:function(e){return e.stopPropagation(),e.preventDefault(),t.remove()}},slot:"caret"},[n("svg",{staticClass:"YggSelect__clear-button-icon",attrs:{"aria-label":"close",width:"10",height:"10",viewBox:"0 0 10 10","fill-rule":"evenodd"}},[n("path",{attrs:{d:"M9.8 8.6L8.4 10 5 6.4 1.4 10 0 8.6 3.6 5 .1 1.4 1.5 0 5 3.6 8.6 0 10 1.4 6.4 5z"}})])])]:t._e(),t._v(" "),t._v(" "),t._t("option",null,{slot:"option"})],2):[t.multiple?t._l(t.options,function(e){return n(t.inline?"span":"div",{key:e.id,tag:"component",staticClass:"YggSelect__item",class:{"YggSelect__item--inline":t.inline}},[n("ygg-check",{attrs:{value:t.checked(e.id),text:t.optionsLabel[e.id],"read-only":t.readOnly},on:{input:function(n){return t.handleCheckboxChanged(n,e.id)}}})],1)}):n("div",{staticClass:"YggSelect__radio-button-group",class:{"YggSelect__radio-button-group--block":!t.inline}},t._l(t.options,function(e,r){return n(t.inline?"span":"div",{key:e.id,tag:"component",staticClass:"YggSelect__item",class:{"YggSelect__item--inline":t.inline}},[n("input",{staticClass:"YggRadio",attrs:{type:"radio",tabindex:"0",id:""+t.uniqueIdentifier+r,disabled:t.readOnly,name:t.uniqueIdentifier},domProps:{checked:t.value===e.id,value:e.id},on:{change:function(n){return t.handleRadioChanged(e.id)}}}),t._v(" "),n("label",{staticClass:"YggRadio__label",attrs:{for:""+t.uniqueIdentifier+r}},[n("span",{staticClass:"YggRadio__appearance"}),t._v("\n                    "+t._s(t.optionsLabel[e.id])+"\n                ")])])}),1)]],2)},[],!1,null,null,null).exports,Kr={name:"YggHtml",components:{YggTemplate:Je},props:{value:Object,template:String}},Ur=Object(c.a)(Kr,function(){var t=this.$createElement;return(this._self._c||t)("ygg-template",{attrs:{template:this.template,"template-data":this.value,name:"Html"}})},[],!1,null,null,null).exports,Hr={name:"YggCard",props:{light:Boolean,hasClose:Boolean},computed:{cardClasses:function(){return{"YggModule--light":this.light}}}},Gr=Object(c.a)(Hr,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"YggModule",class:t.cardClasses},[n("div",{staticClass:"YggModule__inner"},[n("div",{staticClass:"YggModule__content"},[t._t("default")],2),t._v(" "),t.hasClose?[n("button",{staticClass:"YggModule__close-button",attrs:{type:"button"},on:{click:function(e){return t.$emit("close-click")}}},[n("svg",{staticClass:"YggModule__close-icon",attrs:{"aria-label":"close","fill-rule":"evenodd",height:"10",viewBox:"0 0 10 10",width:"10"}},[n("path",{attrs:{d:"M9.8 8.6L8.4 10 5 6.4 1.4 10 0 8.6 3.6 5 .1 1.4 1.5 0 5 3.6 8.6 0 10 1.4 6.4 5z"}})])])]:t._e()],2)])},[],!1,null,null,null).exports,Wr={props:{type:String,outline:Boolean,danger:Boolean,small:Boolean},computed:{buttonClasses:function(){return[this.type?"YggButton--".concat(this.type):"",{"YggButton--secondary":this.outline,"YggButton--danger":this.danger,"YggButton--sm":this.small}]}}},Qr=Object(c.a)(Wr,function(){var t=this.$createElement;return(this._self._c||t)("button",this._g({staticClass:"YggButton",class:this.buttonClasses},this.$listeners),[this._t("default")],2)},[],!1,null,null,null).exports;function Jr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Xr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zr(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var ti={mapTypeControl:!1,streetViewControl:!1};function ei(t){var e=t;return Array.isArray(e)?new google.maps.LatLngBounds(e[0],e[1]):null}function ni(t){var e=t.maxBounds,n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Jr(n,!0).forEach(function(e){Xr(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jr(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},Zr(t,["maxBounds"]));return Array.isArray(e)&&(n.restriction={latLngBounds:ei(e)}),n}function ri(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function ii(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ai={name:"YggGmaps",components:{GmapMap:s.Map,GmapMarker:s.Marker},props:{markerPosition:Object,center:Object,zoom:Number},computed:{options:function(){return ni(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ri(n,!0).forEach(function(e){ii(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ri(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},ti,{maxBounds:this.maxBounds}))}}},oi=Object(c.a)(ai,function(){var t=this.$createElement,e=this._self._c||t;return e("GmapMap",{ref:"map",attrs:{center:this.center,options:this.options,zoom:this.zoom}},[e("GmapMarker",{attrs:{position:this.markerPosition}})],1)},[],!1,null,null,null).exports;function si(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function li(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ci={name:"YggGmapsEditable",components:{GmapMap:s.Map,GmapMarker:s.Marker},props:{markerPosition:Object,bounds:Array,center:Object,zoom:Number,maxBounds:Array},computed:{options:function(){return ni(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?si(n,!0).forEach(function(e){li(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):si(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},ti,{maxBounds:this.maxBounds,draggableCursor:"crosshair"}))},hasMarker:function(){return!!this.markerPosition}},watch:{bounds:function(t){var e=ei(t);e&&this.$refs.map.$mapObject.fitBounds(e)}},methods:{handleMapClicked:function(t){this.$emit("change",t.latLng.toJSON())},handleMarkerDragEnd:function(t){this.$emit("change",t.latLng.toJSON())}}},ui=Object(c.a)(ci,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("GmapMap",{ref:"map",attrs:{center:t.center,options:t.options,zoom:t.zoom},on:{click:t.handleMapClicked}},[t.hasMarker?[n("GmapMarker",{attrs:{position:t.markerPosition,draggable:""},on:{dragend:t.handleMarkerDragEnd}})]:t._e()],2)},[],!1,null,null,null).exports,di=n("HZII"),fi=n.n(di)()(function(t){var e=t.apiKey,n={v:3};return e&&(n.key=e),Object(s.loadGmapApi)(n),i.a.$gmapApiPromiseLazy()}),hi=null;var pi=n("JpmB"),gi=n("Tith"),mi=n("pArE"),vi=n("4R65");function bi(t){var e=t;return Array.isArray(e)?Object(vi.latLngBounds)(e[0],e[1]):null}var yi={name:"YggOsm",components:{LMap:pi.a,LMarker:gi.a,LTileLayer:mi.a},props:{markerPosition:Object,zoom:Number,center:Object,maxBounds:Array,tilesUrl:{type:String,default:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}},computed:{transformedMaxBounds:function(){return bi(this.maxBounds)}}},_i=Object(c.a)(yi,function(){var t=this.$createElement,e=this._self._c||t;return e("LMap",{attrs:{center:this.center,"max-bounds":this.transformedMaxBounds,zoom:this.zoom}},[e("LTileLayer",{attrs:{url:this.tilesUrl}}),this._v(" "),e("LMarker",{attrs:{"lat-lng":this.markerPosition}})],1)},[],!1,null,null,null).exports,wi={name:"YggOsmEditable",components:{LMap:pi.a,LMarker:gi.a,LTileLayer:mi.a},props:{markerPosition:Object,center:Object,zoom:Number,bounds:Array,maxBounds:Array,tilesUrl:{type:String,default:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}},computed:{hasMarker:function(){return!!this.markerPosition},transformedBounds:function(){return bi(this.bounds)},transformedMaxBounds:function(){return bi(this.maxBounds)}},methods:{handleMapClicked:function(t){this.$emit("change",t.latlng)},handleMarkerDragEnd:function(t){this.$emit("change",t.target.getLatLng())}}},Oi=Object(c.a)(wi,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("LMap",{attrs:{bounds:t.transformedBounds,center:t.center,"max-bounds":t.transformedMaxBounds,zoom:t.zoom},on:{click:t.handleMapClicked}},[n("LTileLayer",{attrs:{url:t.tilesUrl}}),t._v(" "),t.hasMarker?[n("LMarker",{attrs:{"lat-lng":t.markerPosition,draggable:""},on:{dragend:t.handleMarkerDragEnd}})]:t._e()],2)},[],!1,null,null,null).exports;function Ci(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function xi(t){return T.a.get("https://nominatim.openstreetmap.org/search",{params:{q:t,format:"json"}}).then(function(t){return t.data})}function ki(t){return T.a.get("https://nominatim.openstreetmap.org/reverse",{params:{lat:t.lat,lon:t.lng,format:"json"}}).then(function(t){return[t.data]})}function Si(){return(Si=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){Ci(a,r,i,o,s,"next",t)}function s(t){Ci(a,r,i,o,s,"throw",t)}o(void 0)})}}(x.a.mark(function t(e){var n,r,i;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.address,!(r=e.latLng)){t.next=7;break}return t.next=4,ki(r);case 4:t.t0=t.sent,t.next=10;break;case 7:return t.next=9,xi(n);case 9:t.t0=t.sent;case 10:return i=t.t0,t.abrupt("return",i.map(function(t){return{location:{lat:Number(t.lat),lng:Number(t.lon)},bounds:[{lat:Number(t.boundingbox[0]),lng:Number(t.boundingbox[2])},{lat:Number(t.boundingbox[1]),lng:Number(t.boundingbox[3])}],address:t.display_name}}));case 12:case"end":return t.stop()}},t)}))).apply(this,arguments)}var Yi=function(t){return Si.apply(this,arguments)};function ji(t,e,n){return"gmaps"===t?(i=(r=e).address,a=r.latLng,hi||(hi=new google.maps.Geocoder),new Promise(function(t,e){hi.geocode({address:i,location:a},function(n,r){"OK"===r?t(n.map(function(t){return{location:t.geometry.location.toJSON(),bounds:(e=t.geometry.viewport,[e.getSouthWest().toJSON(),e.getNorthEast().toJSON()]),address:t.formatted_address};var e})):"ZERO_RESULTS"===r?t([]):e(r)})})):"osm"===t?Yi(e):Promise.resolve([]);var r,i,a}function Pi(t,e){var n=t<0?e?"W":"S":e?"E":"N",r=0|(t<0?t=-t:t),i=0|t%1*60,a=(0|60*t%1*6e3)/100;return"".concat(r,"°").concat(i,'"').concat(a,"' ").concat(n)}function Di(t){return t?t.name:null}function Ai(t){return t&&t.options||{}}function $i(t){return t?t.tilesUrl:null}var Li={mixins:[v("form.geolocation.modal")],components:{YggLoading:Ze,YggModal:wt,YggText:vn,YggButton:Qr},props:{location:Object,center:Object,bounds:Object,zoom:Number,maxBounds:Array,geocoding:Boolean,mapsProvider:{type:String,default:"gmaps"},mapsOptions:Object,geocodingProvider:{type:String,default:"gmaps"},geocodingOptions:Object},data:function(){return{loading:!1,search:null,message:null,currentLocation:this.location,currentBounds:this.bounds}},computed:{editableMapComponent:function(){return"gmaps"===(t=this.mapsProvider)?ui:"osm"===t?Oi:void 0;var t},hasGeocoding:function(){return this.geocoding},classes:function(){return{"YggGeolocationEdit--loading":this.loading}},mapClasses:function(){return["YggGeolocationEdit__map--".concat(this.mapsProvider)]},tilesUrl:function(){return $i(this.mapsOptions)}},methods:{handleSearchInput:function(t){this.search=t},handleMarkerPositionChanged:function(t){var e=this;this.currentLocation=t,this.message="",this.$emit("change",this.currentLocation),this.hasGeocoding&&(this.loading=!0,ji(this.geocodingProvider,{latLng:t},this.geocodingOptions).then(function(t){t.length>0&&(e.search=t[0].address)}).finally(function(){e.loading=!1}))},handleSearchSubmitted:function(){var t=this,e=this.search;this.message="",this.loading=!0,ji(this.geocodingProvider,{address:e},this.geocodingOptions).then(function(n){n.length>0?(t.currentLocation=n[0].location,t.currentBounds=n[0].bounds,t.$emit("change",t.currentLocation)):t.message=t.lSub("geocode_input.message.no_results").replace(":query",e||"")}).catch(function(e){t.message="".concat(t.lSub("geocode_input.message.error")).concat(e?" (".concat(e,")"):"")}).finally(function(){t.loading=!1})}}};function Ei(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}var Bi={name:"YggGeolocation",mixins:[m],inject:{$tab:{default:null}},components:{YggGeolocationEdit:Object(c.a)(Li,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"YggGeolocationEdit",class:t.classes},[t.hasGeocoding?[n("div",{staticClass:"mb-2"},[n("form",{on:{submit:function(e){return e.preventDefault(),t.handleSearchSubmitted(e)}}},[n("div",{staticClass:"row no-gutters"},[n("div",{staticClass:"col position-relative"},[n("YggText",{staticClass:"YggGeolocationEdit__input",attrs:{placeholder:t.lSub("geocode_input.placeholder"),value:t.search},on:{input:t.handleSearchInput}}),t._v(" "),t.loading?[n("YggLoading",{staticClass:"YggGeolocationEdit__loading",attrs:{inline:"",small:"",visible:""}})]:t._e()],2),t._v(" "),n("div",{staticClass:"col-auto pl-2"},[n("YggButton",{attrs:{outline:""}},[t._v(t._s(t.lSub("search_button")))])],1)])]),t._v(" "),t.message?[n("small",[t._v(t._s(t.message))])]:t._e()],2)]:t._e(),t._v(" "),n(t.editableMapComponent,{tag:"component",staticClass:"YggGeolocationEdit__map",class:t.mapClasses,attrs:{bounds:t.currentBounds,center:t.center,"marker-position":t.currentLocation,"max-bounds":t.maxBounds,"tiles-url":t.tilesUrl,zoom:t.zoom},on:{change:t.handleMarkerPositionChanged}})],2)},[],!1,null,null,null).exports,YggCard:Gr,YggButton:Qr,YggModal:wt},props:{value:Object,readOnly:Boolean,uniqueIdentifier:String,geocoding:Boolean,apiKey:String,boundaries:Object,zoomLevel:{type:Number,default:4},initialPosition:{type:Object,default:function(){return{lat:46.1445458,lng:-2.4343779}}},displayUnit:{type:String,default:"DD",validator:function(t){return"DMS"===t||"DD"===t}},mapsProvider:{type:Object,default:function(){return{name:"gmaps"}}},geocodingProvider:{type:Object,default:function(){return{name:"gmaps"}}}},data:function(){return{ready:!1,modalVisible:!1,location:this.value}},computed:{isLoading:function(){return!this.ready},isEmpty:function(){return!this.value},latLngString:function(){return"DMS"===this.displayUnit?{lat:Pi(this.value.lat),lng:Pi(this.value.lng,!0)}:"DD"===this.displayUnit?this.value:void 0},mapComponent:function(){return"gmaps"===(t=Di(this.mapsProvider))?oi:"osm"===t?_i:void 0;var t},mapClasses:function(){return["YggGeolocation__map--".concat(Di(this.mapsProvider))]},tilesUrl:function(){return $i(Ai(this.mapsProvider))},maxBounds:function(){return this.boundaries?[this.boundaries.sw,this.boundaries.ne]:null},modalTitle:function(){return this.geocoding?this.l("form.geolocation.modal.title"):this.l("form.geolocation.modal.title-no-geocoding")}},methods:{providerName:Di,providerOptions:Ai,handleModalSubmitted:function(){this.$emit("input",this.location)},handleRemoveButtonClicked:function(){this.$emit("input",null)},handleShowModalButtonClicked:function(){this.modalVisible=!0},handleEditButtonClicked:function(){this.modalVisible=!0},handleLocationChanged:function(t){this.location=t},loadProvider:function(t){var e,n=Di(t),r=Ai(t).apiKey;return e={apiKey:r},"gmaps"===n?Promise.resolve(fi(e)):Promise.resolve()},init:function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){Ei(a,r,i,o,s,"next",t)}function s(t){Ei(a,r,i,o,s,"throw",t)}o(void 0)})}}(x.a.mark(function t(){return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadProvider(this.mapsProvider);case 2:if(!this.geocodingProvider){t.next=5;break}return t.next=5,this.loadProvider(this.geocodingProvider);case 5:this.ready=!0;case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},created:function(){this.init()},mounted:function(){this.$tab&&this.$tab.$once("active",function(){!function(){if("function"==typeof Event)window.dispatchEvent(new Event("resize"));else{var t=document.createEvent("UIEvents");t.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(t)}}()})}},Ii=Object(c.a)(Bi,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"YggGeolocation"},[t.isLoading?[t._v("\n        "+t._s(t.l("form.geolocation.loading"))+"\n    ")]:t.isEmpty?[n("YggButton",{staticClass:"w-100",attrs:{outline:""},on:{click:t.handleShowModalButtonClicked}},[t._v("\n            "+t._s(t.l("form.geolocation.browse_button"))+"\n        ")])]:[n("YggCard",{staticClass:"YggModule--closeable",attrs:{"has-close":!t.readOnly,light:""},on:{"close-click":t.handleRemoveButtonClicked}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-7"},[n(t.mapComponent,{tag:"component",staticClass:"YggGeolocation__map",class:t.mapClasses,attrs:{center:t.value,"marker-position":t.value,"max-bounds":t.maxBounds,"tiles-url":t.tilesUrl,zoom:t.zoomLevel}})],1),t._v(" "),n("div",{staticClass:"col-5 pl-0"},[n("div",{staticClass:"d-flex flex-column justify-content-between h-100"},[n("div",[n("div",[n("small",[t._v("Latitude : "+t._s(t.latLngString.lat))])]),t._v(" "),n("div",[n("small",[t._v("Longitude : "+t._s(t.latLngString.lng))])])]),t._v(" "),n("div",[n("YggButton",{staticClass:"remove-button",attrs:{disabled:t.readOnly,outline:"",small:"",type:"danger"},on:{click:t.handleRemoveButtonClicked}},[t._v("\n                                "+t._s(t.l("form.geolocation.remove_button"))+"\n                            ")]),t._v(" "),n("YggButton",{attrs:{disabled:t.readOnly,outline:"",small:""},on:{click:t.handleEditButtonClicked}},[t._v("\n                                "+t._s(t.l("form.geolocation.edit_button"))+"\n                            ")])],1)])])])])],t._v(" "),n("YggModal",{attrs:{title:t.modalTitle,visible:t.modalVisible,"no-close-on-backdrop":""},on:{"update:visible":function(e){t.modalVisible=e},ok:t.handleModalSubmitted}},[n("transition",{attrs:{duration:300}},[t.modalVisible?[n("YggGeolocationEdit",{attrs:{center:t.value||t.initialPosition,geocoding:t.geocoding,"geocoding-options":t.providerOptions(t.geocodingProvider),"geocoding-provider":t.providerName(t.geocodingProvider),location:t.value,"maps-options":t.providerOptions(t.mapsProvider),"maps-provider":t.providerName(t.mapsProvider),"max-bounds":t.maxBounds,zoom:t.zoomLevel},on:{change:t.handleLocationChanged}})]:t._e()],2)],1)],2)},[],!1,null,null,null).exports,Fi=n("rX62"),Mi=n.n(Fi),Ti={bold:{attribute:"bold",icon:"fa-bold"},italic:{attribute:"italic",icon:"fa-italic"},strike:{attribute:"strike",icon:"fa-strikethrough"},link:{action:"link",attribute:"href",icon:"fa-link"},heading1:{attribute:"heading1",icon:"fa-header"},quote:{attribute:"quote",icon:"fa-quote-right"},code:{attribute:"code",icon:"fa-code"},bullet:{attribute:"bullet",icon:"fa-list-ul"},number:{attribute:"number",icon:"fa-list-ol"},increaseNestingLevel:{action:"increaseNestingLevel",icon:"fa-indent"},decreaseNestingLevel:{action:"decreaseNestingLevel",icon:"fa-outdent"},undo:{action:"undo",icon:"fa-undo"},redo:{action:"redo",icon:"fa-repeat"}},zi={mixins:[v("form.wysiwyg")],props:{toolbar:Array},data:function(){return{buttons:Ti}},directives:{buttonData:function(t,e){var n=e.value,r=n.attribute,i=n.action;r&&t.setAttribute("data-trix-attribute",r),i&&t.setAttribute("data-trix-action",i)}}},Ni=Object(c.a)(zi,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"editor-toolbar"},[t._l(t.toolbar,function(e){return["|"===e?n("i",{staticClass:"separator"},[t._v("|")]):t.buttons[e]?n("button",{directives:[{name:"button-data",rawName:"v-button-data",value:t.buttons[e],expression:"buttons[part]"}],staticClass:"fa",class:t.buttons[e].icon,attrs:{tabindex:"-1"}}):t._e()]})],2),t._v(" "),n("div",{staticClass:"trix-dialogs",attrs:{"data-trix-dialogs":""}},[n("div",{staticClass:"trix-dialog trix-dialog--link",attrs:{"data-trix-dialog":"href","data-trix-dialog-attribute":"href"}},[n("div",{staticClass:"trix-dialog__link-fields"},[n("input",{staticClass:"trix-input trix-input--dialog",attrs:{placeholder:t.lSub("dialogs.add_link.input_placeholder"),"data-trix-input":"",name:"href",required:"",type:"url"}}),t._v(" "),n("div",{staticClass:"trix-button-group"},[n("input",{staticClass:"trix-button trix-button--dialog",attrs:{value:t.lSub("dialogs.add_link.link_button"),"data-trix-method":"setAttribute",type:"button"}}),t._v(" "),n("input",{staticClass:"trix-button trix-button--dialog",attrs:{value:t.lSub("dialogs.add_link.unlink_button"),"data-trix-method":"removeAttribute",type:"button"}})])])])])])},[],!1,null,null,null).exports,Vi={name:"YggTrix",mixins:[Mn({textProp:"text"})],components:{TrixCustomToolbar:Ni},props:{value:Object,toolbar:Array,height:{type:Number,default:250},placeholder:String,readOnly:Boolean,uniqueIdentifier:String},watch:{locale:function(){this.localized&&this.$refs.trix.editor.loadHTML(this.text)}},computed:{inputId:function(){return"trix-input-".concat(this.uniqueIdentifier)},toolbarId:function(){return"trix-toolbar-".concat(this.uniqueIdentifier)},text:function(){return this.localized?this.localizedText:this.value.text}},methods:{handleChanged:function(t){this.$emit("input",this.localizedValue(t.target.value))}},created:function(){Mi.a.config.toolbar.getDefaultHTML=function(){return""}}},Ri=Object(c.a)(Vi,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"YggTrix",class:{"YggTrix--read-only":t.readOnly}},[n("div",{staticClass:"YggModule__inner"},[n("input",{attrs:{id:t.inputId,type:"hidden"},domProps:{value:t.text}}),t._v(" "),t.toolbar?n("trix-toolbar",{staticClass:"YggModule__header",attrs:{id:t.toolbarId}},[n("trix-custom-toolbar",{attrs:{toolbar:t.toolbar}})],1):t._e(),t._v(" "),n("trix-editor",{ref:"trix",staticClass:"YggModule__content",style:{height:t.height+"px",maxHeight:t.height+"px"},attrs:{input:t.inputId,placeholder:t.placeholder,toolbar:t.toolbarId},on:{"trix-change":t.handleChanged}})],1)])},[],!1,null,null,null).exports,qi=n("wmP1"),Ki={components:{ElDatePicker:n.n(qi).a},props:{value:{default:function(){return{start:null,end:null}}},displayFormat:{type:String,default:"DD/MM/YYYY"},startPlaceholder:{type:String,default:function(){return g("form.daterange.start_placeholder")}},endPlaceholder:{type:String,default:function(){return g("form.daterange.end_placeholder")}},clearable:{type:Boolean,default:!0},readOnly:Boolean,mondayFirst:Boolean},computed:{transformedValue:function(){var t=this.value||{};return t.start||t.end?[t.start,t.end]:null},transformedFormat:function(){return this.displayFormat.replace(/D/g,"d").replace(/Y/g,"y")},pickerOptions:function(){return{firstDayOfWeek:this.mondayFirst?1:7}},classes:function(){return{"YggDateRange--clearable":this.clearable}}},methods:{handleChanged:function(t){var e=t||[];this.$emit("input",{start:e[0],end:e[1]})},handleFocused:function(){this.$emit("focus")},handleBlur:function(){this.$emit("blur")}}},Ui=Object(c.a)(Ki,function(){var t=this,e=t.$createElement;return(t._self._c||e)("el-date-picker",{ref:"picker",staticClass:"YggDateRange",class:t.classes,attrs:{clearable:t.clearable,disabled:t.readOnly,"end-placeholder":t.endPlaceholder,format:t.transformedFormat,"picker-options":t.pickerOptions,"start-placeholder":t.startPlaceholder,value:t.transformedValue,"popper-class":"YggDateRange__popper",type:"daterange"},on:{blur:t.handleBlur,focus:t.handleFocused,input:t.handleChanged}})},[],!1,null,null,null).exports,Hi={autocomplete:fn,text:vn,textarea:gn,markdown:Qn,number:er,upload:rr,tags:vr,date:Dr,check:$r,list:Vr,select:qr,html:Ur,geolocation:Ii,wysiwyg:Ri,daterange:Ui};function Gi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Wi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Gi(n,!0).forEach(function(e){Qi(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gi(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Qi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ji(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Xi(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Zi=/^custom-(.+)$/,ta={name:"YggField",inheritAttrs:!1,provide:function(){return{$field:this}},props:{fieldKey:String,fieldType:String,fieldProps:Object,fieldLayout:Object,value:[String,Number,Boolean,Object,Array],locale:String,uniqueIdentifier:String,fieldConfigIdentifier:String,updateData:Function},computed:{isCustom:function(){return Zi.test(this.fieldType)},component:function(){if(this.isCustom){var t=Xi(this.fieldType.match(Zi)||[],2),e=(t[0],t[1]);return e="YggCustomField_".concat(e),i.a.options.components[e]}return Hi[this.fieldType]}},render:function(t){var e=this;if(!this.component){var n=this.isCustom?"unknown custom field type '".concat(this.fieldType,"', make sure you register it correctly"):"unknown type '".concat(this.fieldType,"'");return R("YggField '".concat(this.fieldKey,"': ").concat(n),this.fieldProps),null}var r=this.fieldProps,i=(r.key,Ji(r,["key"]));return t(this.component,{props:Wi({fieldKey:this.fieldKey,fieldLayout:this.fieldLayout,value:this.value,locale:this.locale,uniqueIdentifier:this.uniqueIdentifier,fieldConfigIdentifier:this.fieldConfigIdentifier},i),attrs:{dynamicAttributes:i.dynamicAttributes},on:{input:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.fieldProps.readOnly&&!n.force?V("YggField '".concat(e.fieldKey,"', can't update because is readOnly")):e.updateData(e.fieldKey,t,{forced:n.force})},blur:function(){e.fieldProps.focused=!1}}})}},ea=Object(c.a)(ta,void 0,void 0,!1,null,null,null).exports,na={props:{locales:{type:Array,required:!0},currentLocale:{type:String,required:!0},fieldValue:[String,Number,Boolean,Object,Array],isLocaleObject:Boolean},methods:{isActive:function(t){return this.currentLocale===t},isEmpty:function(t){var e=this.isLocaleObject?(this.fieldValue||{})[t]:this.fieldValue;return Array.isArray(e)?!e.length:!e},handleButtonClicked:function(t){this.$emit("change",t)}}};function ra(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function ia(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ra(n,!0).forEach(function(e){aa(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ra(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function aa(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var oa={name:"YggFieldContainer",mixins:[I,X],components:{YggField:ea,YggFieldLocaleSelector:Object(c.a)(na,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"YggFieldLocaleSelector"},[t._l(t.locales,function(e){return[n("button",{staticClass:"YggFieldLocaleSelector__btn ml-2",class:{"YggFieldLocaleSelector__btn--active":t.isActive(e),"YggFieldLocaleSelector__btn--empty":t.isEmpty(e)},on:{click:function(n){return t.handleButtonClicked(e)}}},[t._v("\n            "+t._s(e)+"\n        ")])]})],2)},[],!1,null,null,null).exports},inject:["$tab","$form"],props:ia({},ea.props,{label:String,helpMessage:String,originalValue:[String,Number,Boolean,Object,Array]}),data:function(){return{state:"classic",stateMessage:""}},watch:{value:function(){"error"===this.state&&this.clear()},"$form.errors":function(t){this.updateError(t)},locale:function(){this.updateError(this.$form.errors)}},computed:{formGroupClasses:function(){return["YggForm__form-item--type-".concat(this.fieldType),{"YggForm__form-item--danger":"error"===this.state,"YggForm__form-item--success":"ok"===this.state,"YggForm__form-item--no-label":!this.showLabel}]},extraStyle:function(){return this.fieldProps.extraStyle},exposedProps:function(){return ia({},this.$props,{uniqueIdentifier:this.mergedErrorIdentifier,fieldConfigIdentifier:this.mergedConfigIdentifier})},showLabel:function(){return!!this.label||""===this.label},resolvedOriginalValue:function(){return t={field:this.fieldProps,value:this.originalValue},e=t.field,n=t.value,"markdown"===e.type||"wysiwyg"===e.type?(n||{}).text:n;var t,e,n},isLocaleObject:function(){return se(this.fieldProps)}},methods:{updateError:function(t){var e=t[this.mergedErrorIdentifier];null==e?this.clear():Array.isArray(e)?this.setError(e[0]):R('FieldContainer : Not processable error "'.concat(this.mergedErrorIdentifier,'" : '),e)},setError:function(t){this.state="error",this.stateMessage=t,this.$tab&&this.$tab.$emit("error",this.mergedErrorIdentifier)},setOk:function(){this.state="ok",this.stateMessage=""},clear:function(){this.state="classic",this.stateMessage="",this.$tab&&this.$tab.$emit("clear",this.mergedErrorIdentifier),this.$form.$emit("error-cleared",this.mergedErrorIdentifier)},triggerFocus:function(){this.$set(this.fieldProps,"focused",!0)},handleBlur:function(){this.$set(this.fieldProps,"focused",!1)},handleLocaleChanged:function(t){this.$emit("locale-change",this.fieldKey,t)}},mounted:function(){}},sa=Object(c.a)(oa,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"YggFieldContainer YggForm__form-item",class:t.formGroupClasses,style:t.extraStyle},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[t.showLabel?n("label",{staticClass:"YggForm__label",on:{click:t.triggerFocus}},[t._v("\n                "+t._s(t.label)+"\n            ")]):t._e()]),t._v(" "),t.fieldProps.localized?[n("div",{staticClass:"col-auto"},[n("YggFieldLocaleSelector",{attrs:{"current-locale":t.locale,"field-value":t.resolvedOriginalValue,"is-locale-object":t.isLocaleObject,locales:t.$form.locales},on:{change:t.handleLocaleChanged}})],1)]:t._e()],2),t._v(" "),n("ygg-field",t._b({ref:"field",on:{blur:t.handleBlur,clear:t.clear,error:t.setError,ok:t.setOk}},"ygg-field",t.exposedProps,!1)),t._v(" "),n("div",{staticClass:"YggForm__form-requirement"},[t._v(t._s(t.stateMessage))]),t._v(" "),n("small",{staticClass:"YggForm__help-message"},[t._v(t._s(t.helpMessage))])],1)},[],!1,null,null,null).exports,la={computeSelectCondition:function(t){var e=t.condValues,n=t.fieldValue,r=t.isSingleSelect;if(Array.isArray(e))return r?e.some(function(t){return t==n}):e.some(function(t){return n.some(function(e){return e==t})});if("!"===e[0]){var i=e.substring(1);return r?i!=n:!n.some(function(t){return t==i})}return r?e==n:n.some(function(t){return t==e})}};function ca(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function ua(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ca(n,!0).forEach(function(e){da(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ca(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function da(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fa(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ha(t,e,n){return!n||function(t,e,n){var r=!0,i=n.operator;if("or"!==i&&"and"!==i)return R("Conditional display : unknown operator '".concat(i,"'"),n),!0;var a=!0,o=!1,s=void 0;try{for(var l,c=n.fields[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value;u.key in t||(R("Conditional display : can't find a field with key '".concat(n.key,"' in 'fields'"),n),r=!0);var d=t[u.key],f=e[u.key];if("autocomplete"===d.type||"select"===d.type||"tags"===d.type?r=la.computeSelectCondition({condValues:u.values,fieldValue:"autocomplete"===d.type?f&&f.id:f,isSingleSelect:"select"===d.type&&!d.multiple||"autocomplete"===d.type}):"check"===d.type?"boolean"!=typeof u.values?(R("Conditional display : 'values' must be a boolean for a 'check' field ('".concat(u.key,"')"),n,d),r=!0):r=!!f===u.values:(R("Conditional display : unprocessable field type '".concat(d.type,"'"),d),r=!0),"and"===i&&!r)return!1;if("or"===i&&r)return!0}}catch(t){o=!0,s=t}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return r}(t,e,n)}var pa=function(t,e,n,r){return t.localized&&e.localized&&n&&se(e)?n[r]:n},ga=function(t,e,n){return e.localized?"".concat(t,".").concat(n):t},ma={name:"YggFieldDisplay",functional:!0,inject:["$form"],render:function(t,e){var n=e.props,r=e.injections,i=e.data,a=n.fieldKey,o=n.contextFields,s=n.contextData,l=n.errorIdentifier,c=n.updateVisibility,u=fa(n,["fieldKey","contextFields","contextData","errorIdentifier","updateVisibility"]),d=r.$form,f=o[a],h=s[a];if(!(a in o))return R("Field display ('layout') : Can't find a field with key '".concat(a,"' in 'fields'"),o),null;var p=ha(o,s,f.conditionalDisplay);return c&&c(a,p),p?t(sa,ua({},i,{attrs:ua({fieldKey:a,fieldProps:f,fieldType:f.type,value:pa(d,f,h,n.locale),originalValue:h,label:f.label,helpMessage:f.helpMessage,errorIdentifier:ga(l,f,n.locale)},u)})):null}},va={name:"YggNavItem",props:{current:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},link:String},data:function(){return{}}},ba=Object(c.a)(va,function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"YggLeftNav__item",class:{"YggLeftNav__item--active":this.current,"YggLeftNav__item--disabled":this.disabled},attrs:{role:"menuitem"}},[this.disabled?[e("span",{staticClass:"YggLeftNav__item-link"},[this._t("default")],2)]:[e("a",{staticClass:"YggLeftNav__item-link",attrs:{href:this.link}},[this._t("default")],2)]],2)},[],!1,null,null,null).exports,ya={name:"YggCollapsibleItem",props:{label:String},data:function(){return{expanded:!1,ready:!1}},computed:{navItems:function(){return this.$slots.default.map(function(t){return t.componentInstance}).filter(function(t){return t&&t.$options.name===ba.name})}},methods:{toggle:function(){this.expanded=!this.expanded}},mounted:function(){var t=this;this.expanded=this.navItems.some(function(t){return t.current}),this.$nextTick(function(e){return t.ready=!0})}},_a=Object(c.a)(ya,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{directives:[{name:"show",rawName:"v-show",value:t.ready,expression:"ready"}],staticClass:"YggLeftNav__item YggLeftNav__item--has-children",class:{"YggLeftNav__item--expanded":t.expanded},attrs:{tabindex:"0"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.toggle(e)}}},[n("a",{staticClass:"YggLeftNav__item-link",on:{click:t.toggle}},[t._t("label",[t._v("\n            "+t._s(t.label)+"\n        ")]),t._v(" "),n("div",{staticClass:"YggLeftNav__item-icon"},[n("svg",{staticClass:"YggLeftNav__icon",attrs:{"fill-rule":"evenodd",height:"5",viewBox:"0 0 10 5",width:"10"}},[n("path",{attrs:{d:"M10 0L5 5 0 0z"}})])])],2),t._v(" "),n("ul",{staticClass:"YggLeftNav__list YggLeftNav__list--nested",attrs:{"aria-hidden":"true",role:"menu"}},[t._t("default")],2)])},[],!1,null,null,null).exports,wa={name:"YggFilterControl",props:{opened:Boolean,label:String,noCaret:Boolean},components:{DropdownArrow:p},computed:{classes:function(){return{"YggFilterControl--open":this.opened}}},methods:{handleClicked:function(){this.$emit("click")}}},Oa=Object(c.a)(wa,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"YggFilterControl",class:t.classes,on:{click:t.handleClicked}},[n("span",{staticClass:"YggFilterControl__text"},[t._v("\n        "+t._s(t.label)+"\n    ")]),t._v(" "),t._t("default"),t._v(" "),t.noCaret?t._e():[n("span",{staticClass:"YggFilterControl__caret-container"},[n("DropdownArrow",{staticClass:"YggFilterControl__caret"})],1)]],2)},[],!1,null,null,null).exports;function Ca(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function xa(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ka={name:"YggFilterSelect",mixins:[m],components:{YggDropdown:P,YggSelect:qr,YggAutocomplete:fn,YggFilterControl:Oa},props:{label:{type:String,required:!0},values:{type:Array,required:!0},value:{type:[String,Number,Array]},multiple:Boolean,required:Boolean,searchable:Boolean,searchKeys:Array,template:String},data:function(){return{opened:!1}},computed:{optionById:function(){return this.values.reduce(function(t,e){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ca(n,!0).forEach(function(e){xa(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ca(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t,xa({},e.id,e))},{})},empty:function(){return null==this.value||this.multiple&&!this.value.length},autocompleteValue:function(){var t=this;return this.multiple?(this.value||[]).map(function(e){return t.optionById[e]}):this.optionById[this.value]}},methods:{handleSelect:function(t){this.$emit("input",t)},handleAutocompleteInput:function(t){this.$emit("input",this.multiple?t.map(function(t){return t.id}):(t||{}).id)},handleClick:function(){this.opened?this.close():this.open()},open:function(){this.opened=!0,this.$emit("open"),this.$nextTick(this.showDropdown)},close:function(){this.opened=!1,this.$emit("close"),this.$nextTick(this.blur)},showDropdown:function(){this.$refs.autocomplete.$refs.multiselect.activate()},blur:function(){this.$refs.select.$refs.multiselect.deactivate()}}},Sa=Object(c.a)(ka,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"YggFilterSelect",class:{"YggFilterSelect--open":t.opened,"YggFilterSelect--empty":t.empty,"YggFilterSelect--multiple":t.multiple,"YggFilterSelect--searchable":t.searchable},attrs:{tabindex:"0"}},[n("ygg-autocomplete",{ref:"autocomplete",staticClass:"YggFilterSelect__select",attrs:{value:t.autocompleteValue,"local-values":t.values,"search-keys":t.searchKeys,"list-item-template":t.template,placeholder:t.l("resource_list.filter.search_placeholder"),multiple:t.multiple,"hide-selected":t.multiple,"allow-empty":!t.required,"preserve-search":!1,"show-pointer":!1,searchable:t.searchable,"no-result-item":"",mode:"local"},on:{"multiselect-input":t.handleAutocompleteInput,close:t.close}}),t._v(" "),n("YggFilterControl",{attrs:{label:t.label,"no-caret":""},on:{click:t.handleClick}},[n("ygg-select",{ref:"select",staticClass:"YggFilterSelect__select",attrs:{clearable:!t.required,inline:!1,multiple:t.multiple,options:t.values,value:t.value,placeholder:" "},on:{input:t.handleSelect}})],1)],1)},[],!1,null,null,null).exports;function Ya(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ja(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Pa(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Da={inject:{mainLoading:{default:new i.a}},components:{YggFilterSelect:Sa},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ja(n,!0).forEach(function(e){Pa(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ja(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},Object(a.b)("global-filters",{filters:"filters/filters",filterValue:"filters/value"})),methods:{handleFilterChanged:function(t,e){var n=this;this.$store.dispatch("global-filters/post",{filter:t,value:e}).then(function(){n.mainLoading.$emit("show"),location.href=at})},handleOpened:function(){this.$emit("open")},handleClosed:function(){this.$emit("close")},updateLayout:Q()(function(){var t=this;Ya(this.$el.querySelectorAll(".YggFilterSelect")).forEach(function(e){var n=t.$el.parentElement,r=n.offsetHeight-e.offsetHeight-(e.offsetTop-n.offsetTop);e.querySelector(".YggAutocomplete .multiselect__content").style.height="".concat(r,"px")})},300)},mounted:function(){this.updateLayout(),window.addEventListener("resize",this.updateLayout)},destroyed:function(){window.removeEventListener("resize",this.updateLayout)}},Aa=Object(c.a)(Da,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"YggGlobalFilters"},[t._l(t.filters,function(e){return[n("YggFilterSelect",{key:e.key,attrs:{label:e.label,multiple:e.multiple,required:e.required,"search-keys":e.searchKeys,searchable:e.searchable,template:e.template,value:t.filterValue(e.key),values:e.values},on:{close:function(n){return t.handleClosed(e)},input:function(n){return t.handleFilterChanged(e,n)},open:function(n){return t.handleOpened(e)}}})]})],2)},[],!1,null,null,null).exports;function $a(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function La(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Ea={name:"YggLeftNav",mixins:[J("lg")],components:{GlobalFilters:Aa,YggLoading:Ze},props:{items:Array,current:String,title:String,collapseable:{type:Boolean,default:!0},hasGlobalFilters:Boolean},data:function(){return{ready:!1,collapsed:!1,state:"expanded",filterOpened:!1}},watch:{collapsed:{handler:function(t){this.$root.$emit("setClass","leftNav--collapsed",this.collapsed),this.state=t?"collapsing":"expanding",setTimeout(this.updateState,250)}}},computed:{flattenedItems:function(){return this.items.reduce(function(t,e){return"category"===e.type?[].concat(La(t),La(e.resources)):[].concat(La(t),[e])},[])},currentIcon:function(){var t=this;return"dashboard"===this.current?"fa-dashboard":(this.flattenedItems.find(function(e){return e.key===t.current})||{}).icon},classes:function(){return["YggLeftNav--".concat(this.state),{"YggLeftNav--filter-opened":this.filterOpened,"YggLeftNav--collapseable":this.collapseable}]}},methods:{updateState:function(){this.state=this.collapsed?"collapsed":"expanded"},handleGlobalFilterOpened:function(){this.filterOpened=!0},handleGlobalFilterClosed:function(){this.filterOpened=!1},handleClicked:function(){this.collapsed&&(this.collapsed=!1)},init:function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){$a(a,r,i,o,s,"next",t)}function s(t){$a(a,r,i,o,s,"throw",t)}o(void 0)})}}(x.a.mark(function t(){return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.hasGlobalFilters){t.next=3;break}return t.next=3,this.$store.dispatch("global-filters/get");case 3:this.ready=!0;case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},created:function(){this.collapsed=this.isViewportSmall,this.updateState(),this.init()}},Ba=Object(c.a)(Ea,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"YggLeftNav",class:t.classes,attrs:{"aria-label":"Menu Ygg",role:"navigation"},on:{click:t.handleClicked}},[n("div",{staticClass:"YggLeftNav__top-icon"},[n("i",{staticClass:"fa",class:t.currentIcon})]),t._v(" "),n("div",{staticClass:"flex-grow-0"},[n("div",{staticClass:"YggLeftNav__title-container position-relative"},[n("h2",{staticClass:"YggLeftNav__title"},[t._v(t._s(t.title))])])]),t._v(" "),n("div",{staticClass:"flex-grow-1",staticStyle:{"min-height":"0"}},[t.ready?[n("div",{staticClass:"YggLeftNav__content d-flex flex-column h-100"},[n("div",{staticClass:"YggLeftNav__inner flex-grow-1",staticStyle:{"min-height":"0"}},[n("GlobalFilters",{on:{close:t.handleGlobalFilterClosed,open:t.handleGlobalFilterOpened}}),t._v(" "),t._t("default")],2),t._v(" "),n("div",{staticClass:"flex-grow-0"},[n("div",{staticClass:"YggLeftNav__collapse",on:{click:function(e){e.stopPropagation(),t.collapsed=!t.collapsed}}},[n("a",{staticClass:"YggLeftNav__collapse-link",attrs:{href:"#"},on:{click:function(t){t.preventDefault()}}},[n("svg",{staticClass:"YggLeftNav__collapse-arrow",attrs:{"fill-rule":"evenodd",height:"12",viewBox:"0 0 8 12",width:"8"}},[n("path",{attrs:{d:"M7.5 10.6L2.8 6l4.7-4.6L6.1 0 0 6l6.1 6z"}})])])])])])]:[n("div",{staticClass:"d-flex align-items-center justify-content-center h-100"},[n("YggLoading",{attrs:{inline:"",small:"",visible:""}})],1)]],2)])},[],!1,null,null,null).exports,Ia={name:"YggItemVisual",props:{item:Object,iconClass:String,imageClass:String},computed:{iconClasses:function(){var t=[this.item.icon];return this.iconClass&&t.push(this.iconClass),t}}},Fa=Object(c.a)(Ia,function(){var t=this.$createElement,e=this._self._c||t;return e("span",[this.item.icon?e("i",{staticClass:"fa",class:this.iconClasses}):this.item.image?e("img",{attrs:{src:this.item.image}}):this._e()])},[],!1,null,null,null).exports,Ma={name:"YggFilterDateRange",components:{YggDateRange:Ui,YggFilterControl:Oa},props:{value:{required:!0},required:Boolean,displayFormat:String,mondayFirst:Boolean,label:String},data:function(){return{opened:!1}},computed:{empty:function(){return!this.value},noCaret:function(){return!!this.value&&!this.required},classes:function(){return{"YggFilterDateRange--empty":this.empty}}},methods:{handleClicked:function(){this.$refs.range.$refs.picker.focus()},handleInput:function(t){this.$emit("input",t)},handlePickerFocused:function(){this.opened=!0},handlePickerBlur:function(){this.opened=!1}}},Ta=Object(c.a)(Ma,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"YggFilterDateRange",class:t.classes},[n("YggFilterControl",{attrs:{label:t.label,"no-caret":t.noCaret,opened:t.opened},on:{click:t.handleClicked}},[n("YggDateRange",{ref:"range",staticClass:"YggFilterDateRange__field",attrs:{clearable:!t.required,"display-format":t.displayFormat,"monday-first":t.mondayFirst,value:t.value},on:{blur:t.handlePickerBlur,focus:t.handlePickerFocused,input:t.handleInput}})],1)],1)},[],!1,null,null,null).exports;var za={name:"YggFilter",props:{filter:{type:Object,required:!0},value:[Object,Array,String,Number]},computed:{filterComp:function(){return"select"===(t=this.filter.type)?Sa:"daterange"===t?Ta:void 0;var t}},methods:{handleInput:function(t){this.$emit("input",t)}}},Na=Object(c.a)(za,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"YggFilter"},[e(this.filterComp,this._b({tag:"component",attrs:{value:this.value},on:{input:this.handleInput}},"component",this.filter,!1))],1)},[],!1,null,null,null).exports,Va={name:"YggDropdownSeparator"},Ra={name:"YggActionsDropdown",components:{YggDropdown:P,YggDropdownItem:A,YggDropdownSeparator:Object(c.a)(Va,function(){var t=this.$createElement;return(this._self._c||t)("li",{staticClass:"YggDropdown__separator"})},[],!1,null,null,null).exports},props:{actions:{type:Array}},computed:{actionGroups:function(){return this.actions.filter(function(t){return t.length>0})}},methods:{handleActionClicked:function(t){this.$emit("select",t)}}},qa=Object(c.a)(Ra,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("YggDropdown",{staticClass:"YggActionsDropdown"},[n("template",{slot:"text"},[t._t("text")],2),t._v(" "),t._l(t.actionGroups,function(e){return[t._l(e,function(e){return n("YggDropdownItem",{key:e.key,on:{click:function(n){return t.handleActionClicked(e)}}},[t._v("\n            "+t._s(e.label)+"\n            "),e.description?n("div",{staticClass:"YggActionsDropdown__description mt-1"},[t._v("\n                "+t._s(e.description)+"\n            ")]):t._e()])}),t._v(" "),n("YggDropdownSeparator")]})],2)},[],!1,null,null,null).exports,Ka={name:"YggActionBarList",components:{YggActionBar:u,YggText:vn,YggDropdown:P,YggDropdownItem:A,YggItemVisual:Fa,YggActionsDropdown:qa,YggFilter:Na},mixins:[m],props:{count:Number,search:String,filters:Array,filtersValues:Object,actions:Array,forms:Array,canCreate:Boolean,canReorder:Boolean,canSearch:Boolean,reorderActive:Boolean},data:function(){return{searchActive:!1}},computed:{hasForms:function(){return this.forms&&this.forms.length>0}},methods:{handleSearchFocused:function(){this.searchActive=!0},handleSearchBlur:function(){this.searchActive=!1},handleSearchInput:function(t){this.$emit("search-change",t.target.value)},handleClearButtonClicked:function(){this.$emit("search-change",""),this.$refs.search.focus()},handleSearchSubmitted:function(){this.$emit("search-submit")},handleFilterChanged:function(t,e){this.$emit("filter-change",t,e)},handleReorderButtonClicked:function(){this.$emit("reorder-click"),document.activeElement.blur()},handleReorderSubmitButtonClicked:function(){this.$emit("reorder-submit")},handleActionSelected:function(t){this.$emit("action",t)},handleCreateButtonClicked:function(){this.$emit("create")},handleCreateFormSelected:function(t){this.$emit("create",t)}}},Ua=Object(c.a)(Ka,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ygg-action-bar",{staticClass:"YggActionBarList",class:{"YggActionBarList--search-active":t.searchActive}},[n("template",{slot:"left"},[n("span",{staticClass:"text-content"},[t._v(t._s(t.count)+" "+t._s(t.l("action_bar.list.items_count")))])]),t._v(" "),n("template",{slot:"right"},[t.canSearch&&!t.reorderActive?n("div",{staticClass:"YggActionBar__search YggSearch YggSearch--lg",class:{"YggSearch--active":t.searchActive},attrs:{role:"search"}},[n("form",{on:{submit:function(e){return e.preventDefault(),t.handleSearchSubmitted(e)}}},[n("label",{staticClass:"YggSearch__label",attrs:{id:"ab-search-label",for:"ab-search-input"}},[t._v(t._s(t.l("action_bar.list.search.placeholder")))]),t._v(" "),n("input",{ref:"search",staticClass:"YggSearch__input",attrs:{placeholder:t.l("action_bar.list.search.placeholder"),"aria-labelledby":"ab-search-label",id:"ab-search-input",role:"search",type:"text"},domProps:{value:t.search},on:{blur:t.handleSearchBlur,focus:t.handleSearchFocused,input:t.handleSearchInput}}),t._v(" "),n("svg",{staticClass:"YggSearch__magnifier",attrs:{width:"16",height:"16",viewBox:"0 0 16 16","fill-rule":"evenodd"}},[n("path",{attrs:{d:"M6 2c2.2 0 4 1.8 4 4s-1.8 4-4 4-4-1.8-4-4 1.8-4 4-4zm0-2C2.7 0 0 2.7 0 6s2.7 6 6 6 6-2.7 6-6-2.7-6-6-6zM16 13.8L13.8 16l-3.6-3.6 2.2-2.2z"}}),t._v(" "),n("path",{attrs:{d:"M16 13.8L13.8 16l-3.6-3.6 2.2-2.2z"}})]),t._v(" "),n("svg",{staticClass:"YggSearch__close",class:{"YggSearch__close--hidden":!(t.search||"").length},attrs:{"fill-rule":"evenodd",height:"16",viewBox:"0 0 16 16",width:"16"},on:{click:t.handleClearButtonClicked}},[n("path",{attrs:{d:"M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm3.5 10.1l-1.4 1.4L8 9.4l-2.1 2.1-1.4-1.4L6.6 8 4.5 5.9l1.4-1.4L8 6.6l2.1-2.1 1.4 1.4L9.4 8l2.1 2.1z"}})])])]):t._e(),t._v(" "),t.canReorder?[t.reorderActive?[n("button",{staticClass:"YggButton YggButton--secondary-accent",on:{click:t.handleReorderButtonClicked}},[t._v("\n                    "+t._s(t.l("action_bar.list.reorder_button.cancel"))+"\n                ")]),t._v(" "),n("button",{staticClass:"YggButton YggButton--accent",on:{click:t.handleReorderSubmitButtonClicked}},[t._v("\n                    "+t._s(t.l("action_bar.list.reorder_button.finish"))+"\n                ")])]:[n("button",{staticClass:"YggButton YggButton--secondary-accent",on:{click:t.handleReorderButtonClicked}},[t._v("\n                    "+t._s(t.l("action_bar.list.reorder_button"))+"\n                ")])]]:t._e(),t._v(" "),t.reorderActive?t._e():[t.canCreate?[t.hasForms?n("ygg-dropdown",{staticClass:"YggActionBar__forms-dropdown",attrs:{text:t.l("action_bar.list.forms_dropdown")}},t._l(t.forms,function(e,r){return n("ygg-dropdown-item",{key:r,on:{click:function(n){return t.handleCreateFormSelected(e)}}},[n("ygg-item-visual",{attrs:{item:e,"icon-class":"fa-fw"}}),t._v(t._s(e.label)+"\n                    ")],1)}),1):n("button",{staticClass:"YggButton YggButton--accent",on:{click:t.handleCreateButtonClicked}},[t._v("\n                    "+t._s(t.l("action_bar.list.create_button"))+"\n                ")])]:t._e()]],2),t._v(" "),n("template",{slot:"extras"},[t.reorderActive?t._e():void 0,t._v(" "),n("div",{staticClass:"row mx-n2"},[t._l(t.filters,function(e){return[n("div",{staticClass:"col-auto px-2"},[n("YggFilter",{key:e.id,attrs:{filter:e,value:t.filtersValues[e.key]},on:{input:function(n){return t.handleFilterChanged(e,n)}}})],1)]})],2)],2),t._v(" "),t.actions.length?n("template",{slot:"extras-right"},[n("YggActionsDropdown",{staticClass:"YggActionBar__actions-dropdown YggActionBar__actions-dropdown--actions",attrs:{actions:t.actions},on:{select:t.handleActionSelected}},[n("div",{attrs:{slot:"text"},slot:"text"},[t._v("\n                "+t._s(t.l("resource_list.actions.resource.label"))+"\n            ")])])],1):t._e()],2)},[],!1,null,null,null).exports,Ha=n("gznC"),Ga=n.n(Ha),Wa={name:"YggPagination",functional:!0,render:function(t,e){return e.data.staticClass="YggPagination",t({name:"YggPagination",extends:Ga.a,watch:{numberOfPages:{immediate:!0,handler:function(t){var n,r=this;e.props.minPageEndButtons&&(n=function(){return r.hideGotoEndButtons=t<e.props.minPageEndButtons},i.a.config.silent=!0,n(),i.a.config.silent=!1)}}}},e.data,e.children)}},Qa=Object(c.a)(Wa,void 0,void 0,!1,null,null,null).exports;function Ja(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Xa={props:{columns:Array,row:{type:Object,default:function(){return{}}},url:String,header:Boolean},computed:{hasLink:function(){return!!this.url}},methods:{colClasses:function(t){return["col-".concat(t.sizeXS),"col-md-".concat(t.size)].concat(Ja(t.hideOnXS?["d-none d-md-flex"]:[]))}}},Za=Object(c.a)(Xa,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"YggDataList__row container",class:{"YggDataList__row--header":t.header,"YggDataList__row--disabled":!t.header&&!t.hasLink}},[n("div",{staticClass:"YggDataList__cols"},[n("div",{staticClass:"row"},[t._l(t.columns,function(e){return[n("div",{class:[t.header?"YggDataList__th":"YggDataList__td",t.colClasses(e)]},[t._t("cell",[e.html?[n("div",{staticClass:"YggDataList__td-html-container",domProps:{innerHTML:t._s(t.row[e.key])}})]:[t._v("\n                            "+t._s(t.row[e.key])+"\n                        ")]],{row:t.row,column:e})],2)]})],2),t._v(" "),t.hasLink?[n("a",{staticClass:"YggDataList__row-link",attrs:{href:t.url}})]:t._e()],2),t._v(" "),t.$slots.append?[n("div",{staticClass:"YggDataList__row-append align-self-center"},[t._t("append")],2)]:t._e()],2)},[],!1,null,null,null).exports;function to(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var eo={components:{YggPagination:Qa,YggDataListRow:Za,Draggable:Er.a},props:{items:Array,columns:Array,paginated:Boolean,totalCount:Number,pageSize:Number,page:Number,reorderActive:Boolean,sort:String,dir:String},data:function(){return{reorderedItems:null,headerRowAppendWidth:0}},watch:{reorderActive:function(t){this.handleReorderActiveChanged(t)}},computed:{hasPagination:function(){return!!this.paginated&&this.totalCount/this.pageSize>1},draggableOptions:function(){return{disabled:!this.reorderActive}},currentItems:function(){return this.reorderActive?this.reorderedItems:this.items},isEmpty:function(){return 0===(this.items||[]).length}},methods:{handleItemsChanged:function(t){this.reorderedItems=t,this.$emit("change",t)},handleSortClicked:function(t){this.$emit("sort-change",{prop:t,dir:this.sort===t&&"asc"===this.dir?"desc":"asc"})},handlePageChanged:function(t){this.$emit("page-change",t)},handleReorderActiveChanged:function(t){this.reorderedItems=t?to(this.items):null},updateLayout:function(){var t=this.$refs.body;if(t){var e=t.querySelector(".YggDataList__row-append");this.headerRowAppendWidth=e?"".concat(e.offsetWidth,"px"):0}}},mounted:function(){this.updateLayout(),window.addEventListener("resize",this.updateLayout)},destroyed:function(){window.removeEventListener("resize",this.updateLayout)}},no=Object(c.a)(eo,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"YggDataList",class:{"YggDataList--reordering":t.reorderActive}},[t.isEmpty?[t._t("empty")]:[n("div",{staticClass:"YggDataList__table YggDataList__table--border"},[n("div",{ref:"head",staticClass:"YggDataList__thead"},[n("YggDataListRow",{attrs:{columns:t.columns,header:""},scopedSlots:t._u([{key:"cell",fn:function(e){var r=e.column;return[n("span",[t._v(t._s(r.label))]),t._v(" "),r.sortable?[n("svg",{staticClass:"YggDataList__caret",class:{"YggDataList__caret--selected":t.sort===r.key,"YggDataList__caret--ascending":t.sort===r.key&&"asc"===t.dir},attrs:{width:"10",height:"5",viewBox:"0 0 10 5","fill-rule":"evenodd"}},[n("path",{attrs:{d:"M10 0L5 5 0 0z"}})]),t._v(" "),n("a",{staticClass:"YggDataList__sort-link",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.handleSortClicked(r.key)}}})]:t._e()]}}])},[t._v(" "),t.headerRowAppendWidth?[n("template",{slot:"append"},[n("div",{staticClass:"d-none d-md-block",style:{width:t.headerRowAppendWidth}},[t._v(" ")])])]:t._e()],2)],1),t._v(" "),n("div",{ref:"body",staticClass:"YggDataList__tbody"},[n("Draggable",{attrs:{options:t.draggableOptions,value:t.reorderedItems},on:{input:t.handleItemsChanged}},[t._l(t.currentItems,function(e){return[t._t("item",[n("YggDataListRow",{attrs:{columns:t.columns,row:e}})],{item:e})]})],2)],1)])],t._v(" "),t.hasPagination?[n("div",{staticClass:"YggDataList__pagination-container"},[n("YggPagination",{attrs:{"total-rows":t.totalCount,"per-page":t.pageSize,"min-page-end-buttons":3,limit:7,value:t.page},on:{change:t.handlePageChanged}})],1)]:t._e()],2)},[],!1,null,null,null).exports,ro={name:"YggStateIcon",props:{color:{required:!0,type:String}},computed:{isClass:function(){return/^ygg_/.test(this.color)},className:function(){return this.isClass?this.color:null},style:function(){return this.isClass?null:{background:this.color}}}},io=Object(c.a)(ro,function(){var t=this.$createElement;return(this._self._c||t)("span",{staticClass:"StateIcon",class:this.className,style:this.style})},[],!1,null,null,null).exports,ao={components:{YggModal:wt,YggForm:He},props:{form:Object},data:function(){return{visible:!1}},watch:{form:function(t){this.visible=!!t}},methods:{submit:function(){var t;return(t=this.$refs.form).submit.apply(t,arguments)},handleSubmitButtonClicked:function(t){t.preventDefault(),this.$emit("submit")},handleClosed:function(){this.$emit("close")}}},oo=Object(c.a)(ao,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("YggModal",{attrs:{visible:t.visible},on:{"update:visible":function(e){t.visible=e},ok:t.handleSubmitButtonClicked,hidden:t.handleClosed}},[n("transition",[t.visible?n("YggForm",{ref:"form",staticStyle:{"transition-duration":"300ms"},attrs:{props:t.form,independant:"","ignore-authorizations":""}}):t._e()],1)],1)},[],!1,null,null,null).exports,so={name:"YggViewPanel",props:{content:String},computed:{visible:function(){return!!this.content}},methods:{handleBackdropClicked:function(){this.$emit("close")}},directives:{srcdoc:{inserted:function(t,e){var n=e.value;t.contentWindow.document.write(n)}}}},lo=Object(c.a)(so,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{directives:[{name:"show",rawName:"v-show",value:this.visible,expression:"visible"}],staticClass:"YggViewPanel__glasspane",on:{click:this.handleBackdropClicked}}),this._v(" "),e("transition",{attrs:{"enter-class":"YggViewPanel--collapsed","enter-active-class":"YggViewPanel--expanding","enter-to-class":"YggViewPanel--expanded","leave-class":"YggViewPanel--expanded","leave-active-class":"YggViewPanel--collapsing","leave-to-class":"YggViewPanel--collapsed"}},[this.visible?[e("div",{staticClass:"YggViewPanel"},[e("iframe",{directives:[{name:"srcdoc",rawName:"v-srcdoc",value:this.content,expression:"content"}],attrs:{src:"about:blank",sandbox:"allow-forms allow-scripts allow-same-origin allow-popups"}})])]:this._e()],2)],1)},[],!1,null,null,null).exports;function co(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function uo(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){co(a,r,i,o,s,"next",t)}function s(t){co(a,r,i,o,s,"throw",t)}o(void 0)})}}function fo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function ho(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fo(n,!0).forEach(function(e){po(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fo(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function po(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var go,mo,vo,bo,yo={data:function(){return{actionCurrentForm:null,actionViewContent:null}},methods:{transformActionForm:function(t){return ho({},t,{layout:{tabs:[{columns:[{fields:t.layout}]}]}})},downloadActionFile:function(t){var e=document.createElement("a");this.$el.appendChild(e),e.href=URL.createObjectURL(t.data),e.download=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})["content-disposition"];if(t&&t.includes("attachment")){var e=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(t);if(null!=e&&e[1])return e[1].replace(/['"]/g,"")}return null}(t.headers),e.click()},handleActionResponse:(bo=uo(x.a.mark(function t(e){var n;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("application/json"!==e.data.type){t.next=7;break}return t.next=3,q(e.data);case 3:n=t.sent,this.handleActionRequestedResponse(n.action,n),t.next=8;break;case 7:this.downloadActionFile(e);case 8:case"end":return t.stop()}},t,this)})),function(t){return bo.apply(this,arguments)}),postActionForm:(vo=uo(x.a.mark(function t(e){var n,r;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.postFn,t.next=3,this.$refs.actionForm.submit({postFn:n});case 3:return r=t.sent,t.next=6,this.handleActionResponse(r);case 6:this.actionCurrentForm=null;case 7:case"end":return t.stop()}},t,this)})),function(t){return vo.apply(this,arguments)}),showActionForm:(mo=uo(x.a.mark(function t(e,n){var r,i,a,o,s=this;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.postForm,i=n.getFormData,!e.fetch_initial_data){t.next=7;break}return t.next=4,i();case 4:t.t0=t.sent,t.next=8;break;case 7:t.t0={};case 8:a=t.t0,o=function(){return s.postActionForm({postFn:r})},this.actionCurrentForm=this.transformActionForm(ho({},e.form,{data:a})),this.$refs.actionForm.$on("submit",o),this.$refs.actionForm.$once("close",function(){s.$refs.actionForm.$off("submit",o),s.actionCurrentForm=null});case 13:case"end":return t.stop()}},t,this)})),function(t,e){return mo.apply(this,arguments)}),sendAction:(go=uo(x.a.mark(function t(e,n){var r,i,a,o,s,l,c=this;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.postAction,i=n.getFormData,a=n.postForm,o=e.form,s=e.confirmation,!o){t.next=4;break}return t.abrupt("return",this.showActionForm(e,{postForm:a,getFormData:i}));case 4:if(!s){t.next=7;break}return t.next=7,new Promise(function(t){c.actionsBus.$emit("showMainModal",{title:c.l("modals.action.confirm.title"),text:s,okCallback:t})});case 7:return t.prev=7,t.next=10,r();case 10:return l=t.sent,t.next=13,this.handleActionResponse(l);case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(7),console.error(t.t0);case 18:case"end":return t.stop()}},t,this,[[7,15]])})),function(t,e){return go.apply(this,arguments)}),addActionHandlers:function(t){this.actionHandlers=ho({},this.actionHandlers,{},t)},handleActionRequestedResponse:function(t,e){var n=this.actionHandlers[t];n&&n(e)},handleReloadAction:function(){this.init()},handleInfoAction:function(t){this.actionsBus.$emit("showMainModal",{title:this.l("modals.action.info.title"),text:t.message,okCloseOnly:!0})},handleViewAction:function(t){this.actionViewContent=t.html},handleLinkAction:function(t){window.location.href=t.link},handleActionViewPanelClosed:function(){this.actionViewContent=null}},created:function(){this.addActionHandlers({reload:this.handleReloadAction,info:this.handleInfoAction,link:this.handleLinkAction,view:this.handleViewAction})},mounted:function(){this.$refs.actionForm||console.error("withActions: ActionForm not found")}};function _o(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function wo(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){_o(a,r,i,o,s,"next",t)}function s(t){_o(a,r,i,o,s,"throw",t)}o(void 0)})}}function Oo(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Co(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function xo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Co(n,!0).forEach(function(e){ko(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Co(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function ko(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var So,Yo={name:"YggResourceListPage",mixins:[Et,m,yo],components:{YggActionBarList:Ua,YggDataList:no,YggDataListRow:Za,YggStateIcon:io,YggActionsDropdown:qa,YggDropdown:P,YggDropdownItem:A,YggActionFormModal:oo,YggActionViewPanel:lo},data:function(){return{ready:!1,page:0,search:"",sortedBy:null,sortDir:null,sortDirs:{},reorderActive:!1,reorderedItems:null,fields:null,layout:null,data:null,config:null,authorizations:null,forms:null}},watch:{$route:"init"},computed:xo({},Object(a.c)("resource-list",{resourceKey:function(t){return t.resourceKey}}),{},Object(a.b)("resource-list",{filters:"filters/filters",filtersValues:"filters/values",filterNextQuery:"filters/nextQuery",getFiltersValuesFromQuery:"filters/getValuesFromQuery"}),{hasMultiforms:function(){return!!this.forms},apiParams:function(){return this.$route.query},apiPath:function(){return"list/".concat(this.resourceKey)},allowedResourceActions:function(){return(this.config.actions.resource||[]).map(function(t){return t.filter(function(t){return t.authorization})})},multiforms:function(){return this.forms?Object.values(this.forms):null},canCreate:function(){return!!this.authorizations.create},canReorder:function(){return this.config.reorderable&&this.authorizations.update&&this.data.items.length>1},canSearch:function(){return!!this.config.searchable},items:function(){return this.data.items||[]},columns:function(){var t=this;return this.layout.map(function(e){return xo({},e,{},t.fields[e.key])})},paginated:function(){return!!this.config.paginated},totalCount:function(){return this.data.totalCount||this.items.length},pageSize:function(){return this.data.pageSize},hasActionsColumn:function(){var t=this;return this.items.some(function(e){return t.instanceHasState(e)||t.instanceHasActions(e)})}}),methods:{handleSearchChanged:function(t){this.search=t},handleSearchSubmitted:function(){this.$router.push({query:xo({},this.$route.query,{search:this.search,page:1})})},handleFilterChanged:function(t,e){this.$router.push({query:xo({},this.$route.query,{},this.filterNextQuery({filter:t,value:e}),{page:1})})},handleReorderButtonClicked:function(){this.reorderActive=!this.reorderActive,this.reorderedItems=this.reorderActive?Oo(this.data.items):null},handleReorderSubmitted:function(){var t=this;return this.$store.dispatch("resource-list/reorder",{instances:this.reorderedItems.map(function(e){return t.instanceId(e)})}).then(function(){t.$set(t.data,"items",Oo(t.reorderedItems)),t.reorderedItems=null,t.reorderActive=!1})},handleResourceActionRequested:function(t){this.handleActionRequested(t,{endpoint:this.actionEndpoint(t.key)})},handleCreateButtonClicked:function(t){var e=t?this.formUrl({formKey:t.key}):this.formUrl();location.href=e},instanceId:function(t){var e=this.config.instanceIdAttribute;return e?t[e]:t.id},instanceState:function(t){if(!this.instanceHasState(t))return null;var e=this.config.state.attribute;return e?t[e]:t.state},instanceHasState:function(t){return!!this.config.state},instanceHasActions:function(t){return this.instanceActions(t).flat().length>0},instanceHasStateAuthorization:function(t){if(!this.instanceHasState(t))return!1;var e=this.config.state.authorization,n=this.instanceId(t);return Array.isArray(e)?e.includes(n):!!e},instanceActions:function(t){var e=this.config.actions.instance||[],n=this.instanceId(t);return e.reduce(function(t,e){return[].concat(Oo(t),[e.filter(function(t){return t.authorization.includes(n)})])},[])},instanceStateIconColor:function(t){var e=this.instanceState(t);return this.instanceStateOptions(e).color},instanceStateLabel:function(t){var e=this.instanceState(t);return this.instanceStateOptions(e).label},instanceStateOptions:function(t){return this.config.state?this.config.state.values.find(function(e){return e.value===t}):null},instanceForm:function(t){var e=this.instanceId(t);return this.multiforms.find(function(t){return t.instances.includes(e)})},instanceFormUrl:function(t){var e=this.instanceId(t);if(!this.instanceHasViewAuthorization(t))return null;if(this.hasMultiforms){var n=this.instanceForm(t)||{};return this.formUrl({formKey:n.key,instanceId:e})}return this.formUrl({instanceId:e})},instanceHasViewAuthorization:function(t){var e=this.instanceId(t),n=this.authorizations.view;return Array.isArray(n)?n.includes(e):!!n},filterByKey:function(t){return(this.config.filters||[]).find(function(e){return e.key===t})},setState:(So=wo(x.a.mark(function t(e,n){var r,i,a=this;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.instanceId(e),!(i=this.config.state.confirmation)){t.next=5;break}return t.next=5,new Promise(function(t){a.actionsBus.$emit("showMainModal",{title:a.l("modals.action.confirm.title"),text:i,okCallback:t})});case 5:return t.abrupt("return",this.axiosInstance.post("".concat(this.apiPath,"/state/").concat(r),{attribute:this.config.state.attribute,value:n}).then(function(t){var e=t.data;a.handleActionRequestedResponse(e.action,e)}).catch(function(t){var e=t.response.data;422===t.response.status&&a.actionsBus.$emit("showMainModal",{title:a.l("modals.state.422.title"),text:e.message,isError:!0,okCloseOnly:!0})}));case 6:case"end":return t.stop()}},t,this)})),function(t,e){return So.apply(this,arguments)}),handleInstanceStateChanged:function(t,e){this.setState(t,e)},handleInstanceActionRequested:function(t,e){var n=this.instanceId(t);this.handleActionRequested(e,{endpoint:this.actionEndpoint(e.key,n)})},handleSortChanged:function(t){var e=t.prop,n=t.dir;this.$router.push({query:xo({},this.$route.query,{page:1,sort:e,dir:n})})},handleReorderedItemsChanged:function(t){this.reorderedItems=t},handlePageChanged:function(t){this.$router.push({query:xo({},this.$route.query,{page:t})})},formUrl:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.formKey,n=t.instanceId;return"".concat(at,"/form/").concat(this.resourceKey).concat(e?":".concat(e):"").concat(n?"/".concat(n):"")},tryParseNumber:function(t){if(Array.isArray(t))return t.map(this.tryParseNumber);var e=Number(t);return isNaN(Number(e))?t:e},filterValueOrDefault:function(t,e){return null!=t&&""!==t?this.tryParseNumber(t):e.default||(e.multiple?[]:null)},initActions:function(){this.addActionHandlers({refresh:this.handleRefreshAction})},handleActionRequested:function(t,e){var n=this,r=e.endpoint,i=this.$route.query;this.sendAction(t,{postAction:function(){return n.axiosInstance.post(r,{query:i},{responseType:"blob"})},postForm:function(t){return n.axiosInstance.post(r,{query:i,data:t},{responseType:"blob"})},getFormData:function(){return n.axiosInstance.get("".concat(r,"/data"),{params:i}).then(function(t){return t.data.data})}})},handleRefreshAction:function(t){var e=this;this.data.items=this.data.items.map(function(n){return r=t.items,i=n,r.find(function(t){return e.instanceId(i)===e.instanceId(t)})||n;var r,i})},actionEndpoint:function(t,e){return"".concat(this.apiPath,"/action/").concat(t).concat(e?"/".concat(e):"")},mount:function(t){var e=t.fields,n=t.layout,r=t.data,i=void 0===r?{}:r,a=t.config,o=void 0===a?{}:a,s=t.authorizations,l=t.forms;this.fields=e,this.layout=n,this.data=i,this.config=o,this.authorizations=s,this.forms=l,this.config.actions=o.actions||{},this.config.filters=o.filters||[],this.page=this.data.page,!this.sortDir&&(this.sortDir=this.config.defaultSortDir),!this.sortedBy&&(this.sortedBy=this.config.defaultSort)},bindParams:function(t){var e=t.search,n=t.page,r=t.sort,i=t.dir;this.search=e,n&&(this.page=Number(n)),r&&(this.sortedBy=r),i&&(this.sortDir=i)},init:function(){var t=wo(x.a.mark(function t(){return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("resource-list/setResourceKey",this.$route.params.id);case 2:return t.next=4,this.get();case 4:return this.bindParams(this.$route.query),t.next=7,this.$store.dispatch("resource-list/update",{config:this.config,filtersValues:this.getFiltersValuesFromQuery(this.$route.query)});case 7:this.ready=!0;case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},beforeMount:function(){this.init(),this.initActions()}},jo=Object(c.a)(Yo,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"YggResourceListPage"},[t.ready?[n("YggActionBarList",{attrs:{count:t.totalCount,search:t.search,filters:t.filters,"filters-values":t.filtersValues,actions:t.allowedResourceActions,forms:t.multiforms,"reorder-active":t.reorderActive,"can-create":t.canCreate,"can-reorder":t.canReorder,"can-search":t.canSearch},on:{"search-change":t.handleSearchChanged,"search-submit":t.handleSearchSubmitted,"filter-change":t.handleFilterChanged,"reorder-click":t.handleReorderButtonClicked,"reorder-submit":t.handleReorderSubmitted,action:t.handleResourceActionRequested,create:t.handleCreateButtonClicked}}),t._v(" "),n("div",{staticClass:"container"},[n("YggDataList",{attrs:{columns:t.columns,dir:t.sortDir,items:t.items,page:t.page,"page-size":t.pageSize,paginated:t.paginated,"reorder-active":t.reorderActive,sort:t.sortedBy,"total-count":t.totalCount},on:{change:t.handleReorderedItemsChanged,"page-change":t.handlePageChanged,"sort-change":t.handleSortChanged},scopedSlots:t._u([{key:"item",fn:function(e){var r=e.item;return[n("YggDataListRow",{attrs:{columns:t.columns,row:r,url:t.instanceFormUrl(r)}},[t.hasActionsColumn?[n("template",{slot:"append"},[n("div",{staticClass:"row justify-content-end justify-content-md-start mx-n2"},[t.instanceHasState(r)?[n("div",{staticClass:"col-auto col-md-12 my-1 px-2"},[n("YggDropdown",{staticClass:"YggResourceList__state-dropdown",attrs:{disabled:!t.instanceHasStateAuthorization(r)}},[n("template",{slot:"text"},[n("YggStateIcon",{attrs:{color:t.instanceStateIconColor(r)}}),t._v(" "),n("span",{staticClass:"text-truncate"},[t._v("\n                                                "+t._s(t.instanceStateLabel(r))+"\n                                            ")])],1),t._v(" "),t._l(t.config.state.values,function(e){return n("YggDropdownItem",{key:e.value,on:{click:function(n){return t.handleInstanceStateChanged(r,e.value)}}},[n("YggStateIcon",{attrs:{color:e.color}}),t._v(" \n                                                    "+t._s(e.label)+"\n                                                ")],1)})],2)],1)]:t._e(),t._v(" "),t.instanceHasActions(r)?[n("div",{staticClass:"col-auto col-md-12 my-1 px-2"},[n("YggActionsDropdown",{staticClass:"YggResourceList__actions-dropdown",attrs:{actions:t.instanceActions(r)},on:{select:function(e){return t.handleInstanceActionRequested(r,e)}}},[n("template",{slot:"text"},[t._v("\n                                                    "+t._s(t.l("resource_list.actions.instance.label"))+"\n                                                ")])],2)],1)]:t._e()],2)])]:t._e()],2)]}}],null,!1,1135218798)},[n("template",{slot:"empty"},[t._v("\n                    "+t._s(t.l("resource_list.empty_text"))+"\n                ")])],2)],1)]:t._e(),t._v(" "),n("YggActionFormModal",{ref:"actionForm",attrs:{form:t.actionCurrentForm}}),t._v(" "),n("YggActionViewPanel",{attrs:{content:t.actionViewContent},on:{close:t.handleActionViewPanelClosed}})],2)},[],!1,null,null,null).exports;function Po(t){return(Po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Do={name:"YggWidgetPanel",components:{YggTemplate:Je},props:{value:Object,template:String},computed:{getData:function(){return"object"===Po(this.value)?this.value.data:[]}}},Ao=Object(c.a)(Do,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"YggWidgetPanel"},[e("ygg-template",{attrs:{name:"WidgetPanel",template:this.template,"template-data":this.getData}})],1)},[],!1,null,null,null).exports,$o={name:"YggWidgetForm",components:{YggForm:He},props:{resourceKey:String,instanceId:String,submitLabel:String},methods:{submit:function(){var t;return(t=this.$refs.form).submit.apply(t,arguments)},label:function(t,e){var n,r="action_bar.form.".concat(t);if(this.actionsState){var i=this.actionsState,a=i.state,o=i.modifier;n=g("".concat(r,".").concat(a,".").concat(o))}return!n&&e&&(r+=".".concat(e)),n||g(r)}},computed:{}},Lo=Object(c.a)($o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"YggWidgetPanel"},[n("YggForm",{ref:"form",staticStyle:{"transition-duration":"300ms"},attrs:{"resource-key":t.resourceKey,"instance-id":t.instanceId,reloadOnSubmit:""}}),t._v(" "),n("div",[n("button",{staticClass:"YggButton YggButton--accent",on:{click:function(e){return t.submit()}}},[t._v("\n            "+t._s(t.label("submit_button",t.submitLabel))+"\n        ")])])],1)},[],!1,null,null,null).exports;function Eo(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Bo(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){Eo(a,r,i,o,s,"next",t)}function s(t){Eo(a,r,i,o,s,"throw",t)}o(void 0)})}}function Io(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Fo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Mo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Fo(n,!0).forEach(function(e){To(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fo(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function To(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var zo={name:"YggWidgetList",mixins:[Et,m,yo],components:{YggDataList:no,YggDataListRow:Za,YggStateIcon:io,YggActionsDropdown:qa,YggDropdown:P,YggDropdownItem:A,YggActionFormModal:oo,YggActionViewPanel:lo},data:function(){return{ready:!1,page:0,search:"",sortedBy:null,sortDir:null,sortDirs:{},reorderActive:!1,reorderedItems:null,fields:null,layout:null,data:null,config:null,authorizations:null,forms:null}},props:{resourceKey:String},computed:Mo({},Object(a.b)("resource-list",{filters:"filters/filters",filtersValues:"filters/values",filterNextQuery:"filters/nextQuery",getFiltersValuesFromQuery:"filters/getValuesFromQuery"}),{hasMultiforms:function(){return!!this.forms},apiParams:function(){return this.$route.query},apiPath:function(){return"list/".concat(this.resourceKey)},allowedResourceActions:function(){return(this.config.actions.resource||[]).map(function(t){return t.filter(function(t){return t.authorization})})},multiforms:function(){return this.forms?Object.values(this.forms):null},canCreate:function(){return!!this.authorizations.create},canReorder:function(){return this.config.reorderable&&this.authorizations.update&&this.data.items.length>1},canSearch:function(){return!!this.config.searchable},items:function(){return this.data.items||[]},columns:function(){var t=this;return this.layout.map(function(e){return Mo({},e,{},t.fields[e.key])})},paginated:function(){return!!this.config.paginated},totalCount:function(){return this.data.totalCount||this.items.length},pageSize:function(){return this.data.pageSize},hasActionsColumn:function(){var t=this;return this.items.some(function(e){return t.instanceHasState(e)||t.instanceHasActions(e)})}}),methods:{handleSearchChanged:function(t){this.search=t},handleSearchSubmitted:function(){this.$router.push({query:Mo({},this.$route.query,{search:this.search,page:1})})},handleFilterChanged:function(t,e){this.$router.push({query:Mo({},this.$route.query,{},this.filterNextQuery({filter:t,value:e}),{page:1})})},handleReorderButtonClicked:function(){this.reorderActive=!this.reorderActive,this.reorderedItems=this.reorderActive?Io(this.data.items):null},handleReorderSubmitted:function(){var t=this;return this.$store.dispatch("resource-list/reorder",{instances:this.reorderedItems.map(function(e){return t.instanceId(e)})}).then(function(){t.$set(t.data,"items",Io(t.reorderedItems)),t.reorderedItems=null,t.reorderActive=!1})},handleResourceActionRequested:function(t){this.handleActionRequested(t,{endpoint:this.actionEndpoint(t.key)})},handleCreateButtonClicked:function(t){var e=t?this.formUrl({formKey:t.key}):this.formUrl();location.href=e},instanceId:function(t){var e=this.config.instanceIdAttribute;return e?t[e]:t.id},instanceState:function(t){if(!this.instanceHasState(t))return null;var e=this.config.state.attribute;return e?t[e]:t.state},instanceHasState:function(t){return!!this.config.state},instanceHasActions:function(t){return this.instanceActions(t).flat().length>0},instanceHasStateAuthorization:function(t){if(!this.instanceHasState(t))return!1;var e=this.config.state.authorization,n=this.instanceId(t);return Array.isArray(e)?e.includes(n):!!e},instanceActions:function(t){var e=this.config.actions.instance||[],n=this.instanceId(t);return e.reduce(function(t,e){return[].concat(Io(t),[e.filter(function(t){return t.authorization.includes(n)})])},[])},instanceStateIconColor:function(t){var e=this.instanceState(t);return this.instanceStateOptions(e).color},instanceStateLabel:function(t){var e=this.instanceState(t);return this.instanceStateOptions(e).label},instanceStateOptions:function(t){return this.config.state?this.config.state.values.find(function(e){return e.value===t}):null},instanceForm:function(t){var e=this.instanceId(t);return this.multiforms.find(function(t){return t.instances.includes(e)})},instanceFormUrl:function(t){var e=this.instanceId(t);if(!this.instanceHasViewAuthorization(t))return null;if(this.hasMultiforms){var n=this.instanceForm(t)||{};return this.formUrl({formKey:n.key,instanceId:e})}return this.formUrl({instanceId:e})},instanceHasViewAuthorization:function(t){var e=this.instanceId(t),n=this.authorizations.view;return Array.isArray(n)?n.includes(e):!!n},filterByKey:function(t){return(this.config.filters||[]).find(function(e){return e.key===t})},setState:function(){var t=Bo(x.a.mark(function t(e,n){var r,i,a=this;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.instanceId(e),!(i=this.config.state.confirmation)){t.next=5;break}return t.next=5,new Promise(function(t){a.actionsBus.$emit("showMainModal",{title:a.l("modals.action.confirm.title"),text:i,okCallback:t})});case 5:return t.abrupt("return",this.axiosInstance.post("".concat(this.apiPath,"/state/").concat(r),{attribute:this.config.state.attribute,value:n}).then(function(t){var e=t.data;a.handleActionRequestedResponse(e.action,e)}).catch(function(t){var e=t.response.data;422===t.response.status&&a.actionsBus.$emit("showMainModal",{title:a.l("modals.state.422.title"),text:e.message,isError:!0,okCloseOnly:!0})}));case 6:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),handleInstanceStateChanged:function(t,e){this.setState(t,e)},handleInstanceActionRequested:function(t,e){var n=this.instanceId(t);this.handleActionRequested(e,{endpoint:this.actionEndpoint(e.key,n)})},handleSortChanged:function(t){var e=t.prop,n=t.dir;this.$router.push({query:Mo({},this.$route.query,{page:1,sort:e,dir:n})})},handleReorderedItemsChanged:function(t){this.reorderedItems=t},handlePageChanged:function(t){this.$router.push({query:Mo({},this.$route.query,{page:t})})},formUrl:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.formKey,n=t.instanceId;return"".concat(at,"/form/").concat(this.resourceKey).concat(e?":".concat(e):"").concat(n?"/".concat(n):"")},tryParseNumber:function(t){if(Array.isArray(t))return t.map(this.tryParseNumber);var e=Number(t);return isNaN(Number(e))?t:e},filterValueOrDefault:function(t,e){return null!=t&&""!==t?this.tryParseNumber(t):e.default||(e.multiple?[]:null)},initActions:function(){this.addActionHandlers({refresh:this.handleRefreshAction})},handleActionRequested:function(t,e){var n=this,r=e.endpoint,i=this.$route.query;this.sendAction(t,{postAction:function(){return n.axiosInstance.post(r,{query:i},{responseType:"blob"})},postForm:function(t){return n.axiosInstance.post(r,{query:i,data:t},{responseType:"blob"})},getFormData:function(){return n.axiosInstance.get("".concat(r,"/data"),{params:i}).then(function(t){return t.data.data})}})},handleRefreshAction:function(t){var e=this;this.data.items=this.data.items.map(function(n){return r=t.items,i=n,r.find(function(t){return e.instanceId(i)===e.instanceId(t)})||n;var r,i})},actionEndpoint:function(t,e){return"".concat(this.apiPath,"/action/").concat(t).concat(e?"/".concat(e):"")},mount:function(t){var e=t.fields,n=t.layout,r=t.data,i=void 0===r?{}:r,a=t.config,o=void 0===a?{}:a,s=t.authorizations,l=t.forms;this.fields=e,this.layout=n,this.data=i,this.config=o,this.authorizations=s,this.forms=l,this.config.actions=o.actions||{},this.config.filters=o.filters||[],this.page=this.data.page,!this.sortDir&&(this.sortDir=this.config.defaultSortDir),!this.sortedBy&&(this.sortedBy=this.config.defaultSort)},bindParams:function(t){var e=t.search,n=t.page,r=t.sort,i=t.dir;this.search=e,n&&(this.page=Number(n)),r&&(this.sortedBy=r),i&&(this.sortDir=i)},init:function(){var t=Bo(x.a.mark(function t(){return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get();case 2:this.bindParams(this.$route.query),this.ready=!0;case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},beforeMount:function(){this.init(),this.initActions()}},No=Object(c.a)(zo,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"YggWidgetPanel"},[n("YggDataList",{attrs:{columns:t.columns,dir:t.sortDir,items:t.items,page:t.page,"page-size":t.pageSize,paginated:t.paginated,"reorder-active":t.reorderActive,sort:t.sortedBy,"total-count":t.totalCount},on:{change:t.handleReorderedItemsChanged,"page-change":t.handlePageChanged,"sort-change":t.handleSortChanged},scopedSlots:t._u([{key:"item",fn:function(e){var r=e.item;return[n("YggDataListRow",{attrs:{columns:t.columns,row:r,url:t.instanceFormUrl(r)}},[t.hasActionsColumn?[n("template",{slot:"append"},[n("div",{staticClass:"row justify-content-end justify-content-md-start mx-n2"},[t.instanceHasState(r)?[n("div",{staticClass:"col-auto col-md-12 my-1 px-2"},[n("YggDropdown",{staticClass:"YggResourceList__state-dropdown",attrs:{disabled:!t.instanceHasStateAuthorization(r)}},[n("template",{slot:"text"},[n("YggStateIcon",{attrs:{color:t.instanceStateIconColor(r)}}),t._v(" "),n("span",{staticClass:"text-truncate"},[t._v("\n                                                "+t._s(t.instanceStateLabel(r))+"\n                                            ")])],1),t._v(" "),t._l(t.config.state.values,function(e){return n("YggDropdownItem",{key:e.value,on:{click:function(n){return t.handleInstanceStateChanged(r,e.value)}}},[n("YggStateIcon",{attrs:{color:e.color}}),t._v(" \n                                            "+t._s(e.label)+"\n                                        ")],1)})],2)],1)]:t._e(),t._v(" "),t.instanceHasActions(r)?[n("div",{staticClass:"col-auto col-md-12 my-1 px-2"},[n("YggActionsDropdown",{staticClass:"YggResourceList__actions-dropdown",attrs:{actions:t.instanceActions(r)},on:{select:function(e){return t.handleInstanceActionRequested(r,e)}}},[n("template",{slot:"text"},[t._v("\n                                            "+t._s(t.l("resource_list.actions.instance.label"))+"\n                                        ")])],2)],1)]:t._e()],2)])]:t._e()],2)]}}])},[n("template",{slot:"empty"},[t._v("\n            "+t._s(t.l("resource_list.empty_text"))+"\n        ")])],2),t._v(" "),n("YggActionFormModal",{ref:"actionForm",attrs:{form:t.actionCurrentForm}}),t._v(" "),n("YggActionViewPanel",{attrs:{content:t.actionViewContent},on:{close:t.handleActionViewPanelClosed}})],1)},[],!1,null,null,null).exports,Vo=n("H8ri"),Ro={extends:Vo.b,mixins:[Vo.d.reactiveProp],props:{chartData:Object},computed:{options:function(){return{title:{display:!1},legend:{display:!1},maintainAspectRatio:!1,scales:{yAxes:[{ticks:{suggestedMin:0},gridLines:{display:!1}}],xAxes:[{gridLines:{display:!1}}]}}}},mounted:function(){this.renderChart(this.chartData,this.options)}},qo=Object(c.a)(Ro,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("canvas",{ref:"canvas"})])},[],!1,null,null,null).exports;var Ko={extends:Vo.a,mixins:[Vo.d.reactiveProp],props:{chartData:Object},computed:{options:function(){return{title:{display:!1},legend:{display:!1},maintainAspectRatio:!1,scales:{yAxes:[{ticks:{suggestedMin:0},gridLines:{display:!1}}],xAxes:[{gridLines:{display:!1},categoryPercentage:.5,barPercentage:.2}]}}}},mounted:function(){this.renderChart(this.chartData,this.options)}},Uo=Object(c.a)(Ko,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("canvas",{ref:"canvas"})])},[],!1,null,null,null).exports;var Ho={extends:Vo.c,mixins:[Vo.d.reactiveProp],props:{chartData:Object},computed:{options:function(){return{title:{display:!1},legend:{display:!1},maintainAspectRatio:!1,cutoutPercentage:0}}},mounted:function(){this.renderChart(this.chartData,this.options)}},Go=Object(c.a)(Ho,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("canvas",{ref:"canvas"})])},[],!1,null,null,null).exports;function Wo(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Qo(t,e){return"line"===t?(r=(n=e).datasets,i=n.labels,{datasets:r.map(function(t){return{data:t.data,label:t.label,borderColor:t.color,fill:!1}}),labels:i}):"bar"===t?function(t){var e=t.datasets,n=t.labels;return{datasets:e.map(function(t){return{data:t.data,label:t.label,backgroundColor:t.color}}),labels:n}}(e):"pie"===t?function(t){var e=t.datasets;return{datasets:[e.reduce(function(t,e){return{data:[].concat(Wo(t.data||[]),[e.data[0]]),backgroundColor:[].concat(Wo(t.backgroundColor||[]),[e.color])}},{})],labels:e.reduce(function(t,e){return[].concat(Wo(t),[e.label])},[])}}(e):void 0;var n,r,i}var Jo={name:"YggLegend",props:{datasets:Array}},Xo={name:"YggWidgetChart",components:{YggChartLegend:Object(c.a)(Jo,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"YggLegend"},[n("div",{staticClass:"YggLegend__list row"},t._l(t.datasets,function(e){return n("div",{staticClass:"YggLegend__item col-sm"},[n("span",{staticClass:"YggLegend__color",style:{background:e.color}}),t._v(" "),n("span",{staticClass:"YggLegend__text"},[t._v(t._s(e.label))])])}),0)])},[],!1,null,null,null).exports},props:{display:String,title:String,value:Object,ratioX:Number,ratioY:Number},computed:{chartComp:function(){return"line"===(t=this.display)?qo:"bar"===t?Uo:"pie"===t?Go:void 0;var t},chartData:function(){return Qo(this.display,this.value)},classes:function(){return"YggWidgetChart YggWidgetChart--".concat(this.display)},style:function(){return{"padding-top":"".concat(this.ratioY/this.ratioX*100,"%")}}}},Zo=Object(c.a)(Xo,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.title?[n("h2",{staticClass:"mb-2"},[t._v(t._s(t.title))])]:t._e(),t._v(" "),n("YggChartLegend",{attrs:{datasets:t.value.datasets}}),t._v(" "),n("div",{class:t.classes,style:t.style},[n(t.chartComp,{tag:"component",staticClass:"YggWidgetChart__inner",attrs:{"chart-data":t.chartData}})],1)],2)},[],!1,null,null,null).exports;function ts(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function es(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ns={name:"YggWidget",props:{widgetType:String,widgetProps:Object,value:Object},computed:{widgetComp:function(){return function(t){switch(t){case"graph":return Zo;case"panel":return Ao;case"form":return Lo;case"list":return No}}(this.widgetType,this.widgetProps.display)},exposedProps:function(){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ts(n,!0).forEach(function(e){es(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ts(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},this.widgetProps,{value:this.value})},hasLink:function(){return!!this.widgetProps.link}}},rs=Object(c.a)(ns,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"YggWidget YggCard",class:{"YggWidget--chart":"graph"===t.widgetType,"YggWidget--link":t.hasLink}},[n(t.hasLink?"a":"div",{tag:"component",class:{YggWidget__link:t.hasLink},attrs:{href:t.widgetProps.link}},[n("div",{staticClass:"YggCard__overview"},[n("div",{staticClass:"YggCard__overview-about"},[n(t.widgetComp,t._b({tag:"component"},"component",t.exposedProps,!1))],1)])])],1)},[],!1,null,null,null).exports;function is(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function as(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?is(n,!0).forEach(function(e){os(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):is(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function os(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ss={name:"YggActionBarDashboard",mixins:[m],components:{YggActionBar:u,YggFilter:Na,YggActionsDropdown:qa},props:{actions:Array},computed:as({},Object(a.b)("dashboard",{filters:"filters/filters",filterValue:"filters/value",filterNextQuery:"filters/nextQuery"})),methods:{filterKey:function(t){return"actionbardashboard_".concat(t.key)},handleFilterChanged:function(t,e){this.$router.push({query:as({},this.$route.query,{},this.filterNextQuery({filter:t,value:e}))})},handleActionSelected:function(t){this.$emit("action",t)}}};function ls(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function cs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function us(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ds={name:"YggDashboardPage",mixins:[Lt,yo],components:{YggGrid:Xt,YggWidget:rs,YggActionBarDashboard:Object(c.a)(ss,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("YggActionBar",[n("template",{slot:"extras"},[n("div",{staticClass:"row mx-n2"},[t._l(t.filters,function(e){return[n("div",{staticClass:"col-auto px-2"},[n("YggFilter",{key:e.id,attrs:{filter:e,value:t.filterValue(e.key)},on:{input:function(n){return t.handleFilterChanged(e,n)}}})],1)]})],2)]),t._v(" "),t.actions.length?n("template",{slot:"extras-right"},[n("YggActionsDropdown",{staticClass:"YggActionBar__actions-dropdown YggActionBar__actions-dropdown--actions",attrs:{actions:t.actions},on:{select:t.handleActionSelected}},[n("div",{attrs:{slot:"text"},slot:"text"},[t._v("\n                "+t._s(t.l("dashboard.actions.dashboard.label"))+"\n            ")])])],1):t._e()],2)},[],!1,null,null,null).exports,YggActionFormModal:oo,YggActionViewPanel:lo},data:function(){return{ready:!1}},watch:{$route:"init"},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?cs(n,!0).forEach(function(e){us(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cs(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},Object(a.c)("dashboard",{data:function(t){return t.data},widgets:function(t){return t.widgets},layout:function(t){return t.layout}}),{},Object(a.b)("dashboard",{getFiltersValuesFromQuery:"filters/getValuesFromQuery",actionsForType:"actions/forType"}),{actions:function(){return this.actionsForType("dashboard")||[]}}),methods:{handleActionRequested:function(t){var e=this,n=this.$route.query;this.sendAction(t,{postAction:function(){return e.$store.dispatch("dashboard/postAction",{action:t,query:n})},postForm:function(r){return e.$store.dispatch("dashboard/postAction",{action:t,query:n,data:r})},getFormData:function(){return e.$store.dispatch("dashboard/getActionFormData",{action:t,query:n})}})},init:function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){ls(a,r,i,o,s,"next",t)}function s(t){ls(a,r,i,o,s,"throw",t)}o(void 0)})}}(x.a.mark(function t(){return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("dashboard/setDashboardKey",this.$route.params.id);case 2:return t.next=4,this.$store.dispatch("dashboard/get",{filtersValues:this.getFiltersValuesFromQuery(this.$route.query)});case 4:this.ready=!0;case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},created:function(){this.init()}},fs=[{name:"resource-list",path:"/list/:id",component:jo},{name:"dashboard",path:"/dashboard/:id",component:Object(c.a)(ds,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"YggDashboardPage"},[t.ready?[n("YggActionBarDashboard",{attrs:{actions:t.actions},on:{action:t.handleActionRequested}}),t._v(" "),n("div",{staticClass:"container"},[n("YggGrid",{attrs:{rows:t.layout.rows},scopedSlots:t._u([{key:"default",fn:function(e){return[n("YggWidget",{attrs:{value:t.data[e.key],"widget-props":t.widgets[e.key],"widget-type":t.widgets[e.key].type}})]}}],null,!1,4079794834)})],1)]:t._e(),t._v(" "),n("YggActionFormModal",{ref:"actionForm",attrs:{form:t.actionCurrentForm}}),t._v(" "),n("YggActionViewPanel",{attrs:{content:t.actionViewContent},on:{close:t.handleActionViewPanelClosed}})],2)},[],!1,null,null,null).exports}],hs=n("eqyj"),ps=n.n(hs),gs=n("7pj7"),ms=n.n(gs);function vs(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var bs,ys="YYYYMMDD";function _s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function ws(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_s(n,!0).forEach(function(e){Cs(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_s(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Os(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Cs(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var xs=new RegExp("^".concat("filter_")),ks={namespaced:!0,state:function(){return{filters:null,values:{}}},mutations:(bs={},Cs(bs,"SET_FILTERS",function(t,e){t.filters=e}),Cs(bs,"SET_FILTER_VALUE",function(t,e){var n=e.key,r=e.value;i.a.set(t.values,n,r)}),bs),getters:{value:function(t){return function(e){return t.values[e]}},filters:function(t){return t.filters||[]},values:function(t){return t.values},filter:function(t){return function(e){return(t.filters||[]).find(function(t){return t.key===e})}},defaultValue:function(){return function(t){return(t||{}).default}},isDateRange:function(){return function(t){return"daterange"===(t||{}).type}},filterQueryKey:function(){return function(t){return"".concat("filter_").concat(t)}},getQueryParams:function(t,e){return function(t){return Object.entries(t).reduce(function(t,n){var r=Os(n,2),i=r[0],a=r[1];return ws({},t,Cs({},e.filterQueryKey(i),e.serializeValue({filter:e.filter(i),value:a})))},{})}},getValuesFromQuery:function(){return function(t){return Object.entries(t||{}).filter(function(t){var e=Os(t,1)[0];return xs.test(e)}).reduce(function(t,e){var n=Os(e,2),r=n[0],i=n[1];return ws({},t,Cs({},r.replace(xs,""),i))},{})}},resolveFilterValue:function(t,e){return function(t){var n,r,i,a=t.filter,o=t.value;return null==o?e.defaultValue(a):a.multiple&&!Array.isArray(o)?[o]:e.isDateRange(a)?(n=vs((o||"").split(".."),2),r=n[0],i=n[1],{start:r?xr()(r,ys).toDate():null,end:i?xr()(i,ys).toDate():null}):o}},serializeValue:function(t,e){return function(t){var n=t.filter,r=t.value;return e.isDateRange(n)?function(t){if("string"==typeof t)return t;var e=(t||{}).start,n=(t||{}).end;return e&&(e=xr()(e).format(ys)),n&&(n=xr()(n).format(ys)),e||n?"".concat(e||"","..").concat(n||""):null}(r):r}},nextValues:function(t){return function(e){var n=e.filter,r=e.value,i=t.values;return n.master&&(i=Object.keys(t.values).reduce(function(t,e){return ws({},t,Cs({},e,null))},{})),ws({},i,Cs({},n.key,r))}},nextQuery:function(t,e){return function(t){var n=t.filter,r=t.value;return e.getQueryParams(e.nextValues({filter:n,value:r}))}}},actions:{update:function(t,e){var n=t.commit,r=t.dispatch,i=e.filters,a=e.values;return n("SET_FILTERS",i),Promise.all((i||[]).map(function(t){r("setFilterValue",{filter:t,value:(a||{})[t.key]})}))},setFilterValue:function(t,e){var n=t.commit,r=t.getters,i=e.filter,a=e.value;n("SET_FILTER_VALUE",{key:i.key,value:r.resolveFilterValue({filter:i,value:a})})}}};var Ss,Ys,js,Ps,Ds={namespaced:!0,state:{actions:null},mutations:(Ss={},Ys="SET_ACTIONS",js=function(t,e){t.actions=e},Ys in Ss?Object.defineProperty(Ss,Ys,{value:js,enumerable:!0,configurable:!0,writable:!0}):Ss[Ys]=js,Ss),getters:{forType:function(t){return function(e){return t.actions?t.actions[e]:null}}},actions:{update:function(t,e){(0,t.commit)("SET_ACTIONS",e.actions)}}};function As(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function $s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ls,Es={namespaced:!0,modules:{filters:ks,actions:Ds},state:{dashboardKey:null,data:null,widgets:null,config:null,layout:null},mutations:(Ps={},$s(Ps,"UPDATE",function(t,e){var n=e.data,r=e.layout,i=e.widgets,a=e.config;t.data=n,t.widgets=i,t.layout=r,t.config=a}),$s(Ps,"SET_DASHBOARD_KEY",function(t,e){t.dashboardKey=e}),Ps),actions:{update:function(t,e){var n=t.commit,r=t.dispatch,i=e.data,a=e.widgets,o=e.layout,s=e.config,l=e.filtersValues;return n("UPDATE",{data:i,widgets:a,layout:o,config:s}),Promise.all([r("filters/update",{filters:s.filters,values:l}),r("actions/update",{actions:s.actions})])},get:(Ls=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){As(a,r,i,o,s,"next",t)}function s(t){As(a,r,i,o,s,"throw",t)}o(void 0)})}}(x.a.mark(function t(e,n){var r,i,a,o,s;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state,i=e.dispatch,a=e.getters,o=n.filtersValues,t.next=4,bt({dashboardKey:r.dashboardKey,filters:a["filters/getQueryParams"](o)});case 4:return s=t.sent,t.next=7,i("update",{data:s.data,widgets:s.widgets,layout:s.layout,config:s.config,filtersValues:o});case 7:case"end":return t.stop()}},t)})),function(t,e){return Ls.apply(this,arguments)}),postAction:function(t,e){var n=t.state,r=e.action,i=e.data,a=e.query;return function(t){var e=t.dashboardKey,n=t.actionKey,r=t.query,i=t.data;return vt.post("dashboard/".concat(e,"/action/").concat(n),{query:r,data:i},{responseType:"blob"})}({dashboardKey:n.dashboardKey,actionKey:r.key,data:i,query:a})},getActionFormData:function(t,e){var n=t.state,r=e.action,i=e.query;return function(t){var e=t.dashboardKey,n=t.actionKey,r=t.query;return vt.get("dashboard/".concat(e,"/action/").concat(n,"/data"),{params:gt({},r)}).then(function(t){return t.data.data})}({dashboardKey:n.dashboardKey,actionKey:r.key,query:i})},setDashboardKey:function(t,e){(0,t.commit)("SET_DASHBOARD_KEY",e)}}};function Bs(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}var Is={modules:{dashboard:Es,"resource-list":{namespaced:!0,modules:{filters:ks},state:{resourceKey:null},mutations:function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},"SET_RESOURCE_KEY",function(t,e){t.resourceKey=e}),actions:{update:function(t,e){var n=t.dispatch,r=(e.data,e.layout,e.config),i=e.filtersValues;return Promise.all([n("filters/update",{filters:r.filters,values:i})])},reorder:function(t,e){var n=t.state,r=e.instances;return function(t){var e=t.resourceKey,n=t.instances;return vt.post("list/".concat(e,"/reorder"),{instances:n})}({resourceKey:n.resourceKey,instances:r})},setResourceKey:function(t,e){(0,t.commit)("SET_RESOURCE_KEY",e)}}},"global-filters":{namespaced:!0,modules:{filters:ks},actions:{get:function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){Bs(a,r,i,o,s,"next",t)}function s(t){Bs(a,r,i,o,s,"throw",t)}o(void 0)})}}(x.a.mark(function t(e){var n,r;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.dispatch,t.next=3,vt.get("filters").then(function(t){return t.data});case 3:r=t.sent,n("filters/update",{filters:r.filters});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),post:function(t,e){!function(t){if(null==t)throw new TypeError("Cannot destructure undefined")}(t);var n=e.filter,r=e.value;return function(t){var e=t.filterKey,n=t.value;return vt.post("filters/".concat(e),{value:n})}({filterKey:n.key,value:r})}}}}},Fs=n("SJdT"),Ms=n.n(Fs),Ts=n("j4aL"),zs=n.n(Ts),Ns=n("3M0M"),Vs=n.n(Ns),Rs=n("PtZe"),qs=n.n(Rs),Ks=n("stYL"),Us=n.n(Ks),Hs={fr:zs.a,ru:Vs.a,es:qs.a,en:Us.a};Ms.a.use(function(){var t=document.documentElement.lang;return Hs[t]||Hs.en}()),i.a.use(ms.a),i.a.use(s.install,{installComponents:!1}),i.a.config.ignoredElements=[/^trix-/],i.a.component(ma.name,ma);var Gs=i.a.extend(Ze);new i.a({el:"#ygg-app",provide:{mainLoading:new Gs({el:"#glasspane"}),xsrfToken:ps.a.read(T.a.defaults.xsrfCookieName)},components:{YggActionView:jt,YggForm:He,YggCollapsibleItem:_a,YggNavItem:ba,YggLeftNav:Ba,YggItemVisual:Fa},created:function(){var t=this;this.$on("setClass",function(e,n){t.$el.classList[n?"add":"remove"](e)})},store:new a.a.Store(Is),router:new o.a({mode:"history",routes:fs,base:"".concat(at,"/"),parseQuery:function(t){return ct.a.parse(t,{strictNullHandling:!0})},stringifyQuery:function(t){return ct.a.stringify(t,{addQueryPrefix:!0,skipNulls:!0})}})})},yiJr:function(t,e){}},[[0,0,1]]]);